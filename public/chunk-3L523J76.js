import{a as at,d as rt,e as y}from"./chunk-TM2JIGAP.js";import{a as ot}from"./chunk-O55KTLHW.js";import{a as b,b as Z,c as tt}from"./chunk-6L47K6ET.js";import{c as j,d as Q,e as B,f as N,g as A,h as L,i as G,j as J,k as K,l as U,m as W,n as X,o as Y,v as M,w as it}from"./chunk-WVTRBHAQ.js";import{a as F,d as H,e as $,f as q,g as z,h as et,j as nt}from"./chunk-4FB4XD3U.js";import"./chunk-ZK4NZR2G.js";import"./chunk-PCZAAENJ.js";import{L as V}from"./chunk-KCBGSXGR.js";import"./chunk-CARY4E7O.js";import{k}from"./chunk-V6SC6RTQ.js";import{$a as w,Cb as o,Db as i,Eb as g,Fb as p,Gb as u,Ib as x,Nb as T,Ob as _,Tb as S,Ub as v,Vb as E,Xb as a,Zb as f,_a as d,ec as P,fc as O,ic as R,jc as I,la as D,qb as s,sb as m,va as C,wa as h}from"./chunk-NVPCUW4N.js";import"./chunk-5G567QLT.js";var dt=()=>[5,10,25,100];function mt(t,n){t&1&&(o(0,"th",22)(1,"b",23),a(2,"Paciente"),i()())}function ct(t,n){if(t&1&&(o(0,"td",24),a(1),i()),t&2){let e=n.$implicit;m("appEstadoTurno",e.estado),d(),f(" ",e.paciente," ")}}function st(t,n){t&1&&(o(0,"th",25)(1,"b"),a(2,"Especialista"),i()())}function pt(t,n){if(t&1&&(o(0,"td",24),a(1),i()),t&2){let e=n.$implicit;m("appEstadoTurno",e.estado),d(),f(" ",e.especialista," ")}}function ut(t,n){t&1&&(o(0,"th",25)(1,"b"),a(2,"Especialidad"),i()())}function ft(t,n){if(t&1&&(o(0,"td",24),a(1),i()),t&2){let e=n.$implicit;m("appEstadoTurno",e.estado),d(),f(" ",e.especialidad," ")}}function _t(t,n){t&1&&(o(0,"th",25)(1,"b"),a(2,"Fecha"),i()())}function Ct(t,n){if(t&1&&(o(0,"td",24),a(1),R(2,"timestamp"),i()),t&2){let e=n.$implicit;m("appEstadoTurno",e.estado),d(),f(" ",I(2,2,e.fecha)," ")}}function ht(t,n){t&1&&(o(0,"th",25)(1,"b"),a(2,"Horario"),i()())}function gt(t,n){if(t&1&&(o(0,"td",24),a(1),i()),t&2){let e=n.$implicit;m("appEstadoTurno",e.estado),d(),f(" ",e.hora,"hs ")}}function xt(t,n){t&1&&(o(0,"th",25)(1,"b"),a(2,"Estado"),i()())}function Tt(t,n){if(t&1&&(o(0,"td",24),a(1),i()),t&2){let e=n.$implicit;m("appEstadoTurno",e.estado),d(),f(" ",e.estado," ")}}function bt(t,n){t&1&&(o(0,"th",26)(1,"b"),a(2,"Acciones"),i()())}function Mt(t,n){if(t&1){let e=x();o(0,"button",28),T("click",function(){C(e);let r=_().$implicit,c=_();return h(c.cancelarTurno(r))}),a(1," Cancelar "),i()}}function wt(t,n){if(t&1){let e=x();o(0,"button",28),T("click",function(){C(e);let r=_().$implicit,c=_();return h(c.verComentario(r))}),a(1),i()}if(t&2){let e=_().$implicit;d(),f(" ",e.estado==="finalizado"?"Ver rese\xF1a":"Ver comentario"," ")}}function St(t,n){if(t&1&&(o(0,"td",24),s(1,Mt,2,0,"button",27)(2,wt,2,1,"button",27),i()),t&2){let e=n.$implicit;m("appEstadoTurno",e.estado),d(),m("ngIf",e.estado==="pendiente"),d(),m("ngIf",e.comentario)}}function vt(t,n){t&1&&g(0,"tr",29)}function Et(t,n){t&1&&g(0,"tr",30)}function yt(t,n){t&1&&(o(0,"tr",31)(1,"td",32),a(2,"No se encontraron resultados."),i()())}var Kt=(()=>{class t{constructor(e,l){this.firestoreService=e,this.dialog=l,this.displayedColumns=["paciente","especialista","especialidad","fecha","hora","estado","acciones"],this.turnoSeleccionado=null}ngOnInit(){this.firestoreService.getTurnos().then(e=>{this.dataSource=new Y(e),this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort})}applyFilter(e){let l=e.target.value;this.dataSource.filter=l.trim().toLowerCase(),this.dataSource.paginator&&this.dataSource.paginator.firstPage()}cancelarTurno(e){this.dialog.open(y,{data:{titulo:"Cancelar turno",mensaje:"Por favor, indique el motivo de la cancelacion del turno.",requiereComentario:!0}}).afterClosed().subscribe(r=>{r&&(e.estado="cancelado",e.comentario=r,this.firestoreService.updateDocument(`turnos/${e.id}`,{estado:"cancelado",comentario:r}))})}verComentario(e){this.dialog.open(y,{data:{titulo:"Rese\xF1a de la consulta",mensaje:e.comentario,requiereComentario:!1,requiereEncuesta:!1}}).afterClosed().subscribe(r=>{})}static{this.\u0275fac=function(l){return new(l||t)(w(V),w(rt))}}static{this.\u0275cmp=D({type:t,selectors:[["app-turnos"]],viewQuery:function(l,r){if(l&1&&(S(M,5),S(b,5)),l&2){let c;v(c=E())&&(r.paginator=c.first),v(c=E())&&(r.sort=c.first)}},standalone:!0,features:[P],decls:34,vars:5,consts:[["input",""],[1,"table-usuarios","mx-5"],[1,"w-100"],[1,"search-field"],["matInput","","placeholder","Buscar...",3,"keyup"],[1,"mat-elevation-z8","shadow-none"],["mat-table","","matSort","","matSortActive","fecha","matSortDirection","desc",3,"dataSource"],["matColumnDef","paciente"],["mat-header-cell","","mat-sort-header","","class","th-p","id","izq",4,"matHeaderCellDef"],["mat-cell","","class","fila-turno",3,"appEstadoTurno",4,"matCellDef"],["matColumnDef","especialista"],["mat-header-cell","","mat-sort-header","","class","th-p",4,"matHeaderCellDef"],["matColumnDef","especialidad"],["matColumnDef","fecha"],["matColumnDef","hora"],["matColumnDef","estado"],["matColumnDef","acciones"],["mat-header-cell","","class","th-p der","id","der",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","fail-search",4,"matNoDataRow"],["aria-label","Selecciona",1,"div-paginator",3,"pageSizeOptions"],["mat-header-cell","","mat-sort-header","","id","izq",1,"th-p"],[1,"izq"],["mat-cell","",1,"fila-turno",3,"appEstadoTurno"],["mat-header-cell","","mat-sort-header","",1,"th-p"],["mat-header-cell","","id","der",1,"th-p","der"],["mat-button","","class","btn-accion shadow-sm me-2",3,"click",4,"ngIf"],["mat-button","",1,"btn-accion","shadow-sm","me-2",3,"click"],["mat-header-row",""],["mat-row",""],[1,"fail-search"],["colspan","4",1,"mat-cell","ps-4","pt-4"]],template:function(l,r){if(l&1){let c=x();o(0,"div",1)(1,"div",2)(2,"mat-form-field",3)(3,"mat-label"),a(4,"Buscar"),i(),o(5,"input",4,0),T("keyup",function(lt){return C(c),h(r.applyFilter(lt))}),i()()(),o(7,"div",5)(8,"table",6),p(9,7),s(10,mt,3,0,"th",8)(11,ct,2,2,"td",9),u(),p(12,10),s(13,st,3,0,"th",11)(14,pt,2,2,"td",9),u(),p(15,12),s(16,ut,3,0,"th",11)(17,ft,2,2,"td",9),u(),p(18,13),s(19,_t,3,0,"th",11)(20,Ct,3,4,"td",9),u(),p(21,14),s(22,ht,3,0,"th",11)(23,gt,2,2,"td",9),u(),p(24,15),s(25,xt,3,0,"th",11)(26,Tt,2,2,"td",9),u(),p(27,16),s(28,bt,3,0,"th",17)(29,St,3,3,"td",9),u(),s(30,vt,1,0,"tr",18)(31,Et,1,0,"tr",19)(32,yt,3,0,"tr",20),i(),g(33,"mat-paginator",21),i()()}l&2&&(d(8),m("dataSource",r.dataSource),d(22),m("matHeaderRowDef",r.displayedColumns),d(),m("matRowDefColumns",r.displayedColumns),d(2),m("pageSizeOptions",O(4,dt)))},dependencies:[$,H,F,z,q,X,j,B,G,N,Q,J,A,L,K,U,W,tt,b,Z,it,M,k,ot,nt,et,at],styles:[".table-usuarios[_ngcontent-%COMP%]{padding-top:150px;padding-bottom:100px}.search-field[_ngcontent-%COMP%]{width:100%;margin:auto}.th-p[_ngcontent-%COMP%]{font-size:17px}th[_ngcontent-%COMP%]{background-color:#d7d7d7!important}#izq[_ngcontent-%COMP%]{border-radius:5px 0 0!important}#der[_ngcontent-%COMP%]{border-radius:0 5px 0 0!important}.fila-turno[_ngcontent-%COMP%]{border:none;color:#171717;background-color:#d7d7d7}.div-paginator[_ngcontent-%COMP%]{background-color:#d7d7d7;border-radius:0 0 5px 5px}.div-detalle[_ngcontent-%COMP%]{height:700px;width:35%;background-color:#d7d7d7;border-radius:5px;margin-top:25px;display:flex;flex-direction:column;justify-content:center;align-items:center}.div-alta-usuario[_ngcontent-%COMP%]{height:700px;width:49%;background-color:#d7d7d7;border-radius:5px;margin-top:25px;display:flex;flex-direction:column;justify-content:center;align-items:center}.txt-alta-usuario[_ngcontent-%COMP%]{font-size:30px;font-weight:600}.div-imgs[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.btn-sel[_ngcontent-%COMP%], .img-btn-sel[_ngcontent-%COMP%]{border-radius:50%}.btn-sel[_ngcontent-%COMP%]:hover{opacity:.3}.div-detalle-usuario[_ngcontent-%COMP%]{width:440px}.img-usuario[_ngcontent-%COMP%]{width:200px;height:200px;border-radius:5px}.detalle-turno[_ngcontent-%COMP%]{width:100%;min-height:600px;border-radius:5px;background-color:#d7d7d7;display:flex}.btn-accion[_ngcontent-%COMP%]{background-color:#bebebe;min-width:110px;font-weight:600!important}"]})}}return t})();export{Kt as TurnosComponent};
