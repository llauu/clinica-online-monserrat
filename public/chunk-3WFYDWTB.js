import{a as rt,b as P}from"./chunk-5QYNRND2.js";import{a as at}from"./chunk-UIGXXQV5.js";import{c as lt}from"./chunk-6QBQ4ZNY.js";import{a as b,b as Z,c as tt}from"./chunk-6L47K6ET.js";import{a as j,b as B,c as Q,d as L,e as N,f as A,g as G,h as J,i as K,j as U,k as W,l as X,m as Y,o as M,p as nt}from"./chunk-W5ET73U7.js";import{a as F,d as H,e as $,f as q,g as z,h as et,j as it}from"./chunk-GBIG63BY.js";import"./chunk-NYWZOZWN.js";import"./chunk-BQSLCKPJ.js";import"./chunk-ZK4NZR2G.js";import{a as ot}from"./chunk-CVIZ75M7.js";import"./chunk-PCZAAENJ.js";import{N as V}from"./chunk-GMVTRFNN.js";import"./chunk-CARY4E7O.js";import{k}from"./chunk-V6SC6RTQ.js";import{$a as w,Cb as o,Db as n,Eb as g,Fb as s,Gb as u,Ib as x,Nb as T,Ob as _,Tb as S,Ub as v,Vb as y,Xb as a,Zb as f,_a as m,ec as R,fc as I,ic as E,jc as D,la as O,qb as c,sb as d,va as C,wa as h}from"./chunk-NVPCUW4N.js";import"./chunk-5G567QLT.js";var dt=()=>[5,10,25,100];function pt(t,i){t&1&&(o(0,"th",22)(1,"b",23),a(2,"Paciente"),n()())}function ct(t,i){if(t&1&&(o(0,"td",24),a(1),n()),t&2){let e=i.$implicit;d("appEstadoTurno",e.estado),m(),f(" ",e.paciente," ")}}function st(t,i){t&1&&(o(0,"th",25)(1,"b"),a(2,"Especialista"),n()())}function ut(t,i){if(t&1&&(o(0,"td",24),a(1),n()),t&2){let e=i.$implicit;d("appEstadoTurno",e.estado),m(),f(" ",e.especialista," ")}}function ft(t,i){t&1&&(o(0,"th",25)(1,"b"),a(2,"Especialidad"),n()())}function _t(t,i){if(t&1&&(o(0,"td",24),a(1),n()),t&2){let e=i.$implicit;d("appEstadoTurno",e.estado),m(),f(" ",e.especialidad," ")}}function Ct(t,i){t&1&&(o(0,"th",25)(1,"b"),a(2,"Fecha"),n()())}function ht(t,i){if(t&1&&(o(0,"td",24),a(1),E(2,"timestamp"),n()),t&2){let e=i.$implicit;d("appEstadoTurno",e.estado),m(),f(" ",D(2,2,e.fecha)," ")}}function gt(t,i){t&1&&(o(0,"th",25)(1,"b"),a(2,"Horario"),n()())}function xt(t,i){if(t&1&&(o(0,"td",24),a(1),n()),t&2){let e=i.$implicit;d("appEstadoTurno",e.estado),m(),f(" ",e.hora,"hs ")}}function Tt(t,i){t&1&&(o(0,"th",25)(1,"b"),a(2,"Estado"),n()())}function bt(t,i){if(t&1&&(o(0,"td",24),a(1),E(2,"primerLetraMayus"),n()),t&2){let e=i.$implicit;d("appEstadoTurno",e.estado),m(),f(" ",D(2,2,e.estado)," ")}}function Mt(t,i){t&1&&(o(0,"th",26)(1,"b"),a(2,"Acciones"),n()())}function wt(t,i){if(t&1){let e=x();o(0,"button",28),T("click",function(){C(e);let r=_().$implicit,p=_();return h(p.cancelarTurno(r))}),a(1," Cancelar "),n()}}function St(t,i){if(t&1){let e=x();o(0,"button",28),T("click",function(){C(e);let r=_().$implicit,p=_();return h(p.verComentario(r))}),a(1),n()}if(t&2){let e=_().$implicit;m(),f(" ",e.estado==="finalizado"?"Ver rese\xF1a":"Ver comentario"," ")}}function vt(t,i){if(t&1&&(o(0,"td",24),c(1,wt,2,0,"button",27)(2,St,2,1,"button",27),n()),t&2){let e=i.$implicit;d("appEstadoTurno",e.estado),m(),d("ngIf",e.estado==="pendiente"),m(),d("ngIf",e.comentario)}}function yt(t,i){t&1&&g(0,"tr",29)}function Et(t,i){t&1&&g(0,"tr",30)}function Dt(t,i){t&1&&(o(0,"tr",31)(1,"td",32),a(2,"No se encontraron resultados."),n()())}var Wt=(()=>{class t{constructor(e,l){this.firestoreService=e,this.dialog=l,this.displayedColumns=["paciente","especialista","especialidad","fecha","hora","estado","acciones"],this.turnoSeleccionado=null}ngOnInit(){this.firestoreService.getTurnos().then(e=>{this.dataSource=new Y(e),this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort})}applyFilter(e){let l=e.target.value;this.dataSource.filter=l.trim().toLowerCase(),this.dataSource.paginator&&this.dataSource.paginator.firstPage()}cancelarTurno(e){this.dialog.open(P,{data:{titulo:"Cancelar turno",mensaje:"Por favor, indique el motivo de la cancelacion del turno.",requiereComentario:!0}}).afterClosed().subscribe(r=>{r&&(e.estado="cancelado",e.comentario=r,this.firestoreService.updateDocument(`turnos/${e.id}`,{estado:"cancelado",comentario:r}))})}verComentario(e){this.dialog.open(P,{data:{titulo:"Rese\xF1a de la consulta",mensaje:e.comentario,requiereComentario:!1,requiereEncuesta:!1}}).afterClosed().subscribe(r=>{})}static{this.\u0275fac=function(l){return new(l||t)(w(V),w(lt))}}static{this.\u0275cmp=O({type:t,selectors:[["app-turnos"]],viewQuery:function(l,r){if(l&1&&(S(M,5),S(b,5)),l&2){let p;v(p=y())&&(r.paginator=p.first),v(p=y())&&(r.sort=p.first)}},standalone:!0,features:[R],decls:34,vars:5,consts:[["input",""],[1,"table-usuarios","mx-5"],[1,"w-100"],[1,"search-field"],["matInput","","placeholder","Buscar...",3,"keyup"],[1,"mat-elevation-z8","shadow-none"],["mat-table","","matSort","","matSortActive","fecha","matSortDirection","desc",3,"dataSource"],["matColumnDef","paciente"],["mat-header-cell","","mat-sort-header","","class","th-p","id","izq",4,"matHeaderCellDef"],["mat-cell","","class","fila-turno",3,"appEstadoTurno",4,"matCellDef"],["matColumnDef","especialista"],["mat-header-cell","","mat-sort-header","","class","th-p",4,"matHeaderCellDef"],["matColumnDef","especialidad"],["matColumnDef","fecha"],["matColumnDef","hora"],["matColumnDef","estado"],["matColumnDef","acciones"],["mat-header-cell","","class","th-p der","id","der",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","fail-search",4,"matNoDataRow"],["aria-label","Selecciona",1,"div-paginator",3,"pageSizeOptions"],["mat-header-cell","","mat-sort-header","","id","izq",1,"th-p"],[1,"izq"],["mat-cell","",1,"fila-turno",3,"appEstadoTurno"],["mat-header-cell","","mat-sort-header","",1,"th-p"],["mat-header-cell","","id","der",1,"th-p","der"],["mat-button","","class","btn-accion shadow-sm me-2",3,"click",4,"ngIf"],["mat-button","",1,"btn-accion","shadow-sm","me-2",3,"click"],["mat-header-row",""],["mat-row",""],[1,"fail-search"],["colspan","4",1,"mat-cell","ps-4","pt-4"]],template:function(l,r){if(l&1){let p=x();o(0,"div",1)(1,"div",2)(2,"mat-form-field",3)(3,"mat-label"),a(4,"Buscar"),n(),o(5,"input",4,0),T("keyup",function(mt){return C(p),h(r.applyFilter(mt))}),n()()(),o(7,"div",5)(8,"table",6),s(9,7),c(10,pt,3,0,"th",8)(11,ct,2,2,"td",9),u(),s(12,10),c(13,st,3,0,"th",11)(14,ut,2,2,"td",9),u(),s(15,12),c(16,ft,3,0,"th",11)(17,_t,2,2,"td",9),u(),s(18,13),c(19,Ct,3,0,"th",11)(20,ht,3,4,"td",9),u(),s(21,14),c(22,gt,3,0,"th",11)(23,xt,2,2,"td",9),u(),s(24,15),c(25,Tt,3,0,"th",11)(26,bt,3,4,"td",9),u(),s(27,16),c(28,Mt,3,0,"th",17)(29,vt,3,3,"td",9),u(),c(30,yt,1,0,"tr",18)(31,Et,1,0,"tr",19)(32,Dt,3,0,"tr",20),n(),g(33,"mat-paginator",21),n()()}l&2&&(m(8),d("dataSource",r.dataSource),m(22),d("matHeaderRowDef",r.displayedColumns),m(),d("matRowDefColumns",r.displayedColumns),m(2),d("pageSizeOptions",I(4,dt)))},dependencies:[$,H,F,z,q,X,j,Q,G,L,B,J,N,A,K,U,W,tt,b,Z,nt,M,k,at,it,et,rt,ot],styles:[".table-usuarios[_ngcontent-%COMP%]{padding-top:150px;padding-bottom:100px}.search-field[_ngcontent-%COMP%]{width:100%;margin:auto}.th-p[_ngcontent-%COMP%]{font-size:17px}th[_ngcontent-%COMP%]{background-color:#d7d7d7!important}#izq[_ngcontent-%COMP%]{border-radius:5px 0 0!important}#der[_ngcontent-%COMP%]{border-radius:0 5px 0 0!important}.fila-turno[_ngcontent-%COMP%]{border:none;color:#171717;background-color:#d7d7d7}.div-paginator[_ngcontent-%COMP%]{background-color:#d7d7d7;border-radius:0 0 5px 5px}.div-detalle[_ngcontent-%COMP%]{height:700px;width:35%;background-color:#d7d7d7;border-radius:5px;margin-top:25px;display:flex;flex-direction:column;justify-content:center;align-items:center}.div-alta-usuario[_ngcontent-%COMP%]{height:700px;width:49%;background-color:#d7d7d7;border-radius:5px;margin-top:25px;display:flex;flex-direction:column;justify-content:center;align-items:center}.txt-alta-usuario[_ngcontent-%COMP%]{font-size:30px;font-weight:600}.div-imgs[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.btn-sel[_ngcontent-%COMP%], .img-btn-sel[_ngcontent-%COMP%]{border-radius:50%}.btn-sel[_ngcontent-%COMP%]:hover{opacity:.3}.div-detalle-usuario[_ngcontent-%COMP%]{width:440px}.img-usuario[_ngcontent-%COMP%]{width:200px;height:200px;border-radius:5px}.detalle-turno[_ngcontent-%COMP%]{width:100%;min-height:600px;border-radius:5px;background-color:#d7d7d7;display:flex}.btn-accion[_ngcontent-%COMP%]{background-color:#bebebe;min-width:110px;font-weight:600!important}"]})}}return t})();export{Wt as TurnosComponent};
