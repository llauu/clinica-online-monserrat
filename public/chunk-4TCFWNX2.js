import{a as Sc,b as Lp,c as Fp,d as tt,e as bc,f as js,g as Up,m as $p,o as Rc,p as Bp}from"./chunk-FF7OLIXW.js";import{$ as ve,A as Qe,Aa as yc,B as lc,Ba as up,C as np,Ca as Gt,D as hc,Da as _c,Ea as vc,Eb as Rp,Fa as Yn,H as pn,Ha as lp,Ia as Ic,J as Qn,Ja as hp,K as ii,Ka as gn,Lb as Cp,M as dc,Ma as wc,N as Jn,Na as Xn,O as rp,Oa as Zn,Pa as dp,Q as Os,Qa as fp,Qb as Pp,R as zt,Ra as pp,S as fc,Sa as mp,Sb as Dp,T as ip,Ta as gp,Tb as Np,U as pc,Ua as yp,Va as _p,Wa as yn,X as mc,Y as ot,Z as sp,Za as vp,Zb as kp,_a as oi,a as F,aa as pe,ab as et,ac as Fs,b as Ae,bc as Op,cc as Us,d as Bt,da as re,dc as xp,e as y,ec as Mp,f as Yf,fa as op,fb as Ip,fc as Tc,g as rc,ga as Ie,gb as Ec,gc as Ac,h as fn,ha as gc,hc as $s,i as ic,ia as se,ib as Se,j as sc,ja as G,jb as wp,jc as Vp,k as jt,ka as $e,kc as Bs,l as Ke,ma as si,n as Xf,na as xs,nb as Ep,o as Zf,oa as ap,ob as Tp,p as qt,pb as Ap,q as oc,qa as Ms,qb as Sp,r as ac,ra as Et,s as cc,sa as cp,sb as bp,t as Ue,ta as Vs,u as B,ua as mn,v as ri,va as Ls,w as ep,x as tp,y as ne,z as uc}from"./chunk-52PAEBTB.js";var Dc=class extends Fp{constructor(){super(...arguments),this.supportsDOMEvents=!0}},Nc=class n extends Dc{static makeCurrent(){Lp(new n)}onAndCancel(e,t,r){return e.addEventListener(t,r),()=>{e.removeEventListener(t,r)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=Hv();return t==null?null:Kv(t)}resetBaseElement(){ai=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return Up(document.cookie,e)}},ai=null;function Hv(){return ai=ai||document.querySelector("base"),ai?ai.getAttribute("href"):null}function Kv(n){return new URL(n,document.baseURI).pathname}var Qv=(()=>{class n{build(){return new XMLHttpRequest}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=re({token:n,factory:n.\u0275fac})}}return n})(),kc=new Ie(""),Gp=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(s=>s.supports(t)),!r)throw new pe(5101,!1);return this._eventNameToPlugin.set(t,r),r}static{this.\u0275fac=function(r){return new(r||n)(se(kc),se(Se))}}static{this.\u0275prov=re({token:n,factory:n.\u0275fac})}}return n})(),qs=class{constructor(e){this._doc=e}},Cc="ng-app-id",Wp=(()=>{class n{constructor(t,r,i,s={}){this.doc=t,this.appId=r,this.nonce=i,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=Rc(s),this.resetHostNodes()}addStyles(t){for(let r of t)this.changeUsageCount(r,1)===1&&this.onStyleAdded(r)}removeStyles(t){for(let r of t)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){let t=this.styleNodesInDOM;t&&(t.forEach(r=>r.remove()),t.clear());for(let r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(let r of this.getAllStyles())this.addStyleToHost(t,r)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(let r of this.hostNodes)this.addStyleToHost(r,t)}onStyleRemoved(t){let r=this.styleRef;r.get(t)?.elements?.forEach(i=>i.remove()),r.delete(t)}collectServerRenderedStyles(){let t=this.doc.head?.querySelectorAll(`style[${Cc}="${this.appId}"]`);if(t?.length){let r=new Map;return t.forEach(i=>{i.textContent!=null&&r.set(i.textContent,i)}),r}return null}changeUsageCount(t,r){let i=this.styleRef;if(i.has(t)){let s=i.get(t);return s.usage+=r,s.usage}return i.set(t,{usage:r,elements:[]}),r}getStyleElement(t,r){let i=this.styleNodesInDOM,s=i?.get(r);if(s?.parentNode===t)return i.delete(r),s.removeAttribute(Cc),s;{let a=this.doc.createElement("style");return this.nonce&&a.setAttribute("nonce",this.nonce),a.textContent=r,this.platformIsServer&&a.setAttribute(Cc,this.appId),t.appendChild(a),a}}addStyleToHost(t,r){let i=this.getStyleElement(t,r),s=this.styleRef,a=s.get(r)?.elements;a?a.push(i):s.set(r,{elements:[i],usage:1})}resetHostNodes(){let t=this.hostNodes;t.clear(),t.add(this.doc.head)}static{this.\u0275fac=function(r){return new(r||n)(se(tt),se(Ic),se(wc,8),se(gn))}}static{this.\u0275prov=re({token:n,factory:n.\u0275fac})}}return n})(),Pc={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Mc=/%COMP%/g,Hp="%COMP%",Jv=`_nghost-${Hp}`,Yv=`_ngcontent-${Hp}`,Xv=!0,Zv=new Ie("",{providedIn:"root",factory:()=>Xv});function eI(n){return Yv.replace(Mc,n)}function tI(n){return Jv.replace(Mc,n)}function Kp(n,e){return e.map(t=>t.replace(Mc,n))}var jp=(()=>{class n{constructor(t,r,i,s,a,c,u,d=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=s,this.doc=a,this.platformId=c,this.ngZone=u,this.nonce=d,this.rendererByCompId=new Map,this.platformIsServer=Rc(c),this.defaultRenderer=new ci(t,a,u,this.platformIsServer)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===si.ShadowDom&&(r=Ae(F({},r),{encapsulation:si.Emulated}));let i=this.getOrCreateRenderer(t,r);return i instanceof zs?i.applyToHost(t):i instanceof ui&&i.applyStyles(),i}getOrCreateRenderer(t,r){let i=this.rendererByCompId,s=i.get(r.id);if(!s){let a=this.doc,c=this.ngZone,u=this.eventManager,d=this.sharedStylesHost,p=this.removeStylesOnCompDestroy,g=this.platformIsServer;switch(r.encapsulation){case si.Emulated:s=new zs(u,d,r,this.appId,p,a,c,g);break;case si.ShadowDom:return new Oc(u,d,t,r,a,c,this.nonce,g);default:s=new ui(u,d,r,p,a,c,g);break}i.set(r.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}static{this.\u0275fac=function(r){return new(r||n)(se(Gp),se(Wp),se(Ic),se(Zv),se(tt),se(gn),se(Se),se(wc))}}static{this.\u0275prov=re({token:n,factory:n.\u0275fac})}}return n})(),ci=class{constructor(e,t,r,i){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(Pc[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(qp(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(qp(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new pe(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;let s=Pc[i];s?e.setAttributeNS(s,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let i=Pc[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(oi.DashCase|oi.Important)?e.style.setProperty(t,r,i&oi.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&oi.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r){if(typeof e=="string"&&(e=Sc().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(r))}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))===!1&&t.preventDefault()}}};function qp(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var Oc=class extends ci{constructor(e,t,r,i,s,a,c,u){super(e,s,a,u),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let d=Kp(i.id,i.styles);for(let p of d){let g=document.createElement("style");c&&g.setAttribute("nonce",c),g.textContent=p,this.shadowRoot.appendChild(g)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},ui=class extends ci{constructor(e,t,r,i,s,a,c,u){super(e,s,a,c),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i,this.styles=u?Kp(u,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},zs=class extends ui{constructor(e,t,r,i,s,a,c,u){let d=i+"-"+r.id;super(e,t,r,s,a,c,u,d),this.contentAttr=eI(d),this.hostAttr=tI(d)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}},nI=(()=>{class n extends qs{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}static{this.\u0275fac=function(r){return new(r||n)(se(tt))}}static{this.\u0275prov=re({token:n,factory:n.\u0275fac})}}return n})(),zp=["alt","control","meta","shift"],rI={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},iI={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},sI=(()=>{class n extends qs{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,r,i){let s=n.parseEventName(r),a=n.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Sc().onAndCancel(t,s.domEventName,a))}static parseEventName(t){let r=t.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let s=n._normalizeKey(r.pop()),a="",c=r.indexOf("code");if(c>-1&&(r.splice(c,1),a="code."),zp.forEach(d=>{let p=r.indexOf(d);p>-1&&(r.splice(p,1),a+=d+".")}),a+=s,r.length!=0||s.length===0)return null;let u={};return u.domEventName=i,u.fullKey=a,u}static matchEventFullKeyCode(t,r){let i=rI[t.key]||t.key,s="";return r.indexOf("code.")>-1&&(i=t.code,s="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),zp.forEach(a=>{if(a!==i){let c=iI[a];c(t)&&(s+=a+".")}}),s+=i,s===r)}static eventCallback(t,r,i){return s=>{n.matchEventFullKeyCode(s,t)&&i.runGuarded(()=>r(s))}}static _normalizeKey(t){return t==="esc"?"escape":t}static{this.\u0275fac=function(r){return new(r||n)(se(tt))}}static{this.\u0275prov=re({token:n,factory:n.\u0275fac})}}return n})();function N0(n,e){return Vp(F({rootComponent:n},oI(e)))}function oI(n){return{appProviders:[...hI,...n?.providers??[]],platformProviders:lI}}function aI(){Nc.makeCurrent()}function cI(){return new _c}function uI(){return lp(document),document}var lI=[{provide:gn,useValue:$p},{provide:hp,useValue:aI,multi:!0},{provide:tt,useFactory:uI,deps:[]}];var hI=[{provide:cp,useValue:"root"},{provide:_c,useFactory:cI,deps:[]},{provide:kc,useClass:nI,multi:!0,deps:[tt,Se,gn]},{provide:kc,useClass:sI,multi:!0,deps:[tt]},jp,Wp,Gp,{provide:Ip,useExisting:jp},{provide:Bp,useClass:Qv,deps:[]},[]];var Qp=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static{this.\u0275fac=function(r){return new(r||n)(se(tt))}}static{this.\u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var dI=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=re({token:n,factory:function(r){let i=null;return r?i=new(r||n):i=se(fI),i},providedIn:"root"})}}return n})(),fI=(()=>{class n extends dI{constructor(t){super(),this._doc=t}sanitize(t,r){if(r==null)return null;switch(t){case yn.NONE:return r;case yn.HTML:return Zn(r,"HTML")?Xn(r):_p(this._doc,String(r)).toString();case yn.STYLE:return Zn(r,"Style")?Xn(r):r;case yn.SCRIPT:if(Zn(r,"Script"))return Xn(r);throw new pe(5200,!1);case yn.URL:return Zn(r,"URL")?Xn(r):yp(String(r));case yn.RESOURCE_URL:if(Zn(r,"ResourceURL"))return Xn(r);throw new pe(5201,!1);default:throw new pe(5202,!1)}}bypassSecurityTrustHtml(t){return dp(t)}bypassSecurityTrustStyle(t){return fp(t)}bypassSecurityTrustScript(t){return pp(t)}bypassSecurityTrustUrl(t){return mp(t)}bypassSecurityTrustResourceUrl(t){return gp(t)}static{this.\u0275fac=function(r){return new(r||n)(se(tt))}}static{this.\u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var z="primary",Ai=Symbol("RouteTitle"),$c=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function ir(n){return new $c(n)}function mI(n,e,t){let r=t.path.split("/");if(r.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||r.length<n.length))return null;let i={};for(let s=0;s<r.length;s++){let a=r[s],c=n[s];if(a.startsWith(":"))i[a.substring(1)]=c;else if(a!==c.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function gI(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!at(n[t],e[t]))return!1;return!0}function at(n,e){let t=n?Bc(n):void 0,r=e?Bc(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let s=0;s<t.length;s++)if(i=t[s],!nm(n[i],e[i]))return!1;return!0}function Bc(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function nm(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),r=[...e].sort();return t.every((i,s)=>r[s]===i)}else return n===e}function rm(n){return n.length>0?n[n.length-1]:null}function Kt(n){return ep(n)?n:xp(n)?Ue(Promise.resolve(n)):B(n)}var yI={exact:sm,subset:om},im={exact:_I,subset:vI,ignored:()=>!0};function Jp(n,e,t){return yI[t.paths](n.root,e.root,t.matrixParams)&&im[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function _I(n,e){return at(n,e)}function sm(n,e,t){if(!vn(n.segments,e.segments)||!Hs(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!n.children[r]||!sm(n.children[r],e.children[r],t))return!1;return!0}function vI(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>nm(n[t],e[t]))}function om(n,e,t){return am(n,e,e.segments,t)}function am(n,e,t,r){if(n.segments.length>t.length){let i=n.segments.slice(0,t.length);return!(!vn(i,t)||e.hasChildren()||!Hs(i,t,r))}else if(n.segments.length===t.length){if(!vn(n.segments,t)||!Hs(n.segments,t,r))return!1;for(let i in e.children)if(!n.children[i]||!om(n.children[i],e.children[i],r))return!1;return!0}else{let i=t.slice(0,n.segments.length),s=t.slice(n.segments.length);return!vn(n.segments,i)||!Hs(n.segments,i,r)||!n.children[z]?!1:am(n.children[z],e,s,r)}}function Hs(n,e,t){return e.every((r,i)=>im[t](n[i].parameters,r.parameters))}var Wt=class{constructor(e=new Z([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=ir(this.queryParams),this._queryParamMap}toString(){return EI.serialize(this)}},Z=class{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Ks(this)}},_n=class{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=ir(this.parameters),this._parameterMap}toString(){return um(this)}};function II(n,e){return vn(n,e)&&n.every((t,r)=>at(t.parameters,e[r].parameters))}function vn(n,e){return n.length!==e.length?!1:n.every((t,r)=>t.path===e[r].path)}function wI(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===z&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==z&&(t=t.concat(e(i,r)))}),t}var fu=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=re({token:n,factory:()=>new Js,providedIn:"root"})}}return n})(),Js=class{parse(e){let t=new qc(e);return new Wt(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${li(e.root,!0)}`,r=SI(e.queryParams),i=typeof e.fragment=="string"?`#${TI(e.fragment)}`:"";return`${t}${r}${i}`}},EI=new Js;function Ks(n){return n.segments.map(e=>um(e)).join("/")}function li(n,e){if(!n.hasChildren())return Ks(n);if(e){let t=n.children[z]?li(n.children[z],!1):"",r=[];return Object.entries(n.children).forEach(([i,s])=>{i!==z&&r.push(`${i}:${li(s,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}else{let t=wI(n,(r,i)=>i===z?[li(n.children[z],!1)]:[`${i}:${li(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[z]!=null?`${Ks(n)}/${t[0]}`:`${Ks(n)}/(${t.join("//")})`}}function cm(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Gs(n){return cm(n).replace(/%3B/gi,";")}function TI(n){return encodeURI(n)}function jc(n){return cm(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Qs(n){return decodeURIComponent(n)}function Yp(n){return Qs(n.replace(/\+/g,"%20"))}function um(n){return`${jc(n.path)}${AI(n.parameters)}`}function AI(n){return Object.entries(n).map(([e,t])=>`;${jc(e)}=${jc(t)}`).join("")}function SI(n){let e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(i=>`${Gs(t)}=${Gs(i)}`).join("&"):`${Gs(t)}=${Gs(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var bI=/^[^\/()?;#]+/;function Vc(n){let e=n.match(bI);return e?e[0]:""}var RI=/^[^\/()?;=#]+/;function CI(n){let e=n.match(RI);return e?e[0]:""}var PI=/^[^=?&#]+/;function DI(n){let e=n.match(PI);return e?e[0]:""}var NI=/^[^&#]+/;function kI(n){let e=n.match(NI);return e?e[0]:""}var qc=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new Z([],{}):new Z([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[z]=new Z(e,t)),r}parseSegment(){let e=Vc(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new pe(4009,!1);return this.capture(e),new _n(Qs(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=CI(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let i=Vc(this.remaining);i&&(r=i,this.capture(r))}e[Qs(t)]=Qs(r)}parseQueryParam(e){let t=DI(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let a=kI(this.remaining);a&&(r=a,this.capture(r))}let i=Yp(t),s=Yp(r);if(e.hasOwnProperty(i)){let a=e[i];Array.isArray(a)||(a=[a],e[i]=a),a.push(s)}else e[i]=s}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=Vc(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new pe(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=z);let a=this.parseChildren();t[s]=Object.keys(a).length===1?a[z]:new Z([],a),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new pe(4011,!1)}};function lm(n){return n.segments.length>0?new Z([],{[z]:n}):n}function hm(n){let e={};for(let[r,i]of Object.entries(n.children)){let s=hm(i);if(r===z&&s.segments.length===0&&s.hasChildren())for(let[a,c]of Object.entries(s.children))e[a]=c;else(s.segments.length>0||s.hasChildren())&&(e[r]=s)}let t=new Z(n.segments,e);return OI(t)}function OI(n){if(n.numberOfChildren===1&&n.children[z]){let e=n.children[z];return new Z(n.segments.concat(e.segments),e.children)}return n}function sr(n){return n instanceof Wt}function xI(n,e,t=null,r=null){let i=dm(n);return fm(i,e,t,r)}function dm(n){let e;function t(s){let a={};for(let u of s.children){let d=t(u);a[u.outlet]=d}let c=new Z(s.url,a);return s===n&&(e=c),c}let r=t(n.root),i=lm(r);return e??i}function fm(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(e.length===0)return Lc(i,i,i,t,r);let s=MI(e);if(s.toRoot())return Lc(i,i,new Z([],{}),t,r);let a=VI(s,i,n),c=a.processChildren?fi(a.segmentGroup,a.index,s.commands):mm(a.segmentGroup,a.index,s.commands);return Lc(i,a.segmentGroup,c,t,r)}function Ys(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function gi(n){return typeof n=="object"&&n!=null&&n.outlets}function Lc(n,e,t,r,i){let s={};r&&Object.entries(r).forEach(([u,d])=>{s[u]=Array.isArray(d)?d.map(p=>`${p}`):`${d}`});let a;n===e?a=t:a=pm(n,e,t);let c=lm(hm(a));return new Wt(c,s,i)}function pm(n,e,t){let r={};return Object.entries(n.children).forEach(([i,s])=>{s===e?r[i]=t:r[i]=pm(s,e,t)}),new Z(n.segments,r)}var Xs=class{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Ys(r[0]))throw new pe(4003,!1);let i=r.find(gi);if(i&&i!==rm(r))throw new pe(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function MI(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new Xs(!0,0,n);let e=0,t=!1,r=n.reduce((i,s,a)=>{if(typeof s=="object"&&s!=null){if(s.outlets){let c={};return Object.entries(s.outlets).forEach(([u,d])=>{c[u]=typeof d=="string"?d.split("/"):d}),[...i,{outlets:c}]}if(s.segmentPath)return[...i,s.segmentPath]}return typeof s!="string"?[...i,s]:a===0?(s.split("/").forEach((c,u)=>{u==0&&c==="."||(u==0&&c===""?t=!0:c===".."?e++:c!=""&&i.push(c))}),i):[...i,s]},[]);return new Xs(t,e,r)}var nr=class{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}};function VI(n,e,t){if(n.isAbsolute)return new nr(e,!0,0);if(!t)return new nr(e,!1,NaN);if(t.parent===null)return new nr(t,!0,0);let r=Ys(n.commands[0])?0:1,i=t.segments.length-1+r;return LI(t,i,n.numberOfDoubleDots)}function LI(n,e,t){let r=n,i=e,s=t;for(;s>i;){if(s-=i,r=r.parent,!r)throw new pe(4005,!1);i=r.segments.length}return new nr(r,!1,i-s)}function FI(n){return gi(n[0])?n[0].outlets:{[z]:n}}function mm(n,e,t){if(n??=new Z([],{}),n.segments.length===0&&n.hasChildren())return fi(n,e,t);let r=UI(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let s=new Z(n.segments.slice(0,r.pathIndex),{});return s.children[z]=new Z(n.segments.slice(r.pathIndex),n.children),fi(s,0,i)}else return r.match&&i.length===0?new Z(n.segments,{}):r.match&&!n.hasChildren()?zc(n,e,t):r.match?fi(n,0,i):zc(n,e,t)}function fi(n,e,t){if(t.length===0)return new Z(n.segments,{});{let r=FI(t),i={};if(Object.keys(r).some(s=>s!==z)&&n.children[z]&&n.numberOfChildren===1&&n.children[z].segments.length===0){let s=fi(n.children[z],e,t);return new Z(n.segments,s.children)}return Object.entries(r).forEach(([s,a])=>{typeof a=="string"&&(a=[a]),a!==null&&(i[s]=mm(n.children[s],e,a))}),Object.entries(n.children).forEach(([s,a])=>{r[s]===void 0&&(i[s]=a)}),new Z(n.segments,i)}}function UI(n,e,t){let r=0,i=e,s={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return s;let a=n.segments[i],c=t[r];if(gi(c))break;let u=`${c}`,d=r<t.length-1?t[r+1]:null;if(i>0&&u===void 0)break;if(u&&d&&typeof d=="object"&&d.outlets===void 0){if(!Zp(u,d,a))return s;r+=2}else{if(!Zp(u,{},a))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function zc(n,e,t){let r=n.segments.slice(0,e),i=0;for(;i<t.length;){let s=t[i];if(gi(s)){let u=$I(s.outlets);return new Z(r,u)}if(i===0&&Ys(t[0])){let u=n.segments[e];r.push(new _n(u.path,Xp(t[0]))),i++;continue}let a=gi(s)?s.outlets[z]:`${s}`,c=i<t.length-1?t[i+1]:null;a&&c&&Ys(c)?(r.push(new _n(a,Xp(c))),i+=2):(r.push(new _n(a,{})),i++)}return new Z(r,{})}function $I(n){let e={};return Object.entries(n).forEach(([t,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[t]=zc(new Z([],{}),0,r))}),e}function Xp(n){let e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function Zp(n,e,t){return n==t.path&&at(e,t.parameters)}var pi="imperative",be=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(be||{}),Je=class{constructor(e,t){this.id=e,this.url=t}},yi=class extends Je{constructor(e,t,r="imperative",i=null){super(e,t),this.type=be.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Tt=class extends Je{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=be.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},ze=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n}(ze||{}),Gc=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(Gc||{}),Ht=class extends Je{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=be.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},In=class extends Je{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=be.NavigationSkipped}},_i=class extends Je{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=be.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Zs=class extends Je{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=be.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Wc=class extends Je{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=be.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Hc=class extends Je{constructor(e,t,r,i,s){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s,this.type=be.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Kc=class extends Je{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=be.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Qc=class extends Je{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=be.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Jc=class{constructor(e){this.route=e,this.type=be.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Yc=class{constructor(e){this.route=e,this.type=be.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Xc=class{constructor(e){this.snapshot=e,this.type=be.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Zc=class{constructor(e){this.snapshot=e,this.type=be.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},eu=class{constructor(e){this.snapshot=e,this.type=be.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},tu=class{constructor(e){this.snapshot=e,this.type=be.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var vi=class{},Ii=class{constructor(e){this.url=e}};var nu=class{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new so,this.attachRef=null}},so=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){let i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){let r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new nu,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),eo=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=ru(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){let t=ru(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=iu(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return iu(e,this._root).map(t=>t.value)}};function ru(n,e){if(n===e.value)return e;for(let t of e.children){let r=ru(n,t);if(r)return r}return null}function iu(n,e){if(n===e.value)return[e];for(let t of e.children){let r=iu(n,t);if(r.length)return r.unshift(e),r}return[]}var qe=class{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function tr(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var to=class extends eo{constructor(e,t){super(e),this.snapshot=t,mu(this,e)}toString(){return this.snapshot.toString()}};function gm(n){let e=BI(n),t=new Ke([new _n("",{})]),r=new Ke({}),i=new Ke({}),s=new Ke({}),a=new Ke(""),c=new wn(t,r,s,a,i,z,n,e.root);return c.snapshot=e.root,new to(new qe(c,[]),e)}function BI(n){let e={},t={},r={},i="",s=new wi([],e,r,i,t,z,n,null,{});return new no("",new qe(s,[]))}var wn=class{constructor(e,t,r,i,s,a,c,u){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=s,this.outlet=a,this.component=c,this._futureSnapshot=u,this.title=this.dataSubject?.pipe(ne(d=>d[Ai]))??B(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(ne(e=>ir(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(ne(e=>ir(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function pu(n,e,t="emptyOnly"){let r,{routeConfig:i}=n;return e!==null&&(t==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:F(F({},e.params),n.params),data:F(F({},e.data),n.data),resolve:F(F(F(F({},n.data),e.data),i?.data),n._resolvedData)}:r={params:F({},n.params),data:F({},n.data),resolve:F(F({},n.data),n._resolvedData??{})},i&&_m(i)&&(r.resolve[Ai]=i.title),r}var wi=class{get title(){return this.data?.[Ai]}constructor(e,t,r,i,s,a,c,u,d){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=a,this.component=c,this.routeConfig=u,this._resolve=d}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=ir(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=ir(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},no=class extends eo{constructor(e,t){super(t),this.url=e,mu(this,t)}toString(){return ym(this._root)}};function mu(n,e){e.value._routerState=n,e.children.forEach(t=>mu(n,t))}function ym(n){let e=n.children.length>0?` { ${n.children.map(ym).join(", ")} } `:"";return`${n.value}${e}`}function Fc(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,at(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),at(e.params,t.params)||n.paramsSubject.next(t.params),gI(e.url,t.url)||n.urlSubject.next(t.url),at(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function su(n,e){let t=at(n.params,e.params)&&II(n.url,e.url),r=!n.parent!=!e.parent;return t&&!r&&(!n.parent||su(n.parent,e.parent))}function _m(n){return typeof n.title=="string"||n.title===null}var jI=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=z,this.activateEvents=new Yn,this.deactivateEvents=new Yn,this.attachEvents=new Yn,this.detachEvents=new Yn,this.parentContexts=G(so),this.location=G(wp),this.changeDetector=G($s),this.environmentInjector=G(Vs),this.inputBinder=G(gu,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(t){if(t.name){let{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new pe(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new pe(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new pe(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new pe(4013,!1);this._activatedRoute=t;let i=this.location,a=t.snapshot.component,c=this.parentContexts.getOrCreateContext(this.name).children,u=new ou(t,c,i.injector);this.activated=i.createComponent(a,{index:i.length,injector:u,environmentInjector:r??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275dir=Ms({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Ls]})}}return n})(),ou=class n{__ngOutletInjector(e){return new n(this.route,this.childContexts,e)}constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===wn?this.route:e===so?this.childContexts:this.parent.get(e,t)}},gu=new Ie("");function qI(n,e,t){let r=Ei(n,e._root,t?t._root:void 0);return new to(r,e)}function Ei(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let r=t.value;r._futureSnapshot=e.value;let i=zI(n,e,t);return new qe(r,i)}else{if(n.shouldAttach(e.value)){let s=n.retrieve(e.value);if(s!==null){let a=s.route;return a.value._futureSnapshot=e.value,a.children=e.children.map(c=>Ei(n,c)),a}}let r=GI(e.value),i=e.children.map(s=>Ei(n,s));return new qe(r,i)}}function zI(n,e,t){return e.children.map(r=>{for(let i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return Ei(n,r,i);return Ei(n,r)})}function GI(n){return new wn(new Ke(n.url),new Ke(n.params),new Ke(n.queryParams),new Ke(n.fragment),new Ke(n.data),n.outlet,n.component,n)}var vm="ngNavigationCancelingError";function Im(n,e){let{redirectTo:t,navigationBehaviorOptions:r}=sr(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=wm(!1,ze.Redirect);return i.url=t,i.navigationBehaviorOptions=r,i}function wm(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[vm]=!0,t.cancellationCode=e,t}function WI(n){return Em(n)&&sr(n.url)}function Em(n){return!!n&&n[vm]}var HI=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=ap({type:n,selectors:[["ng-component"]],standalone:!0,features:[kp],decls:1,vars:0,template:function(r,i){r&1&&Rp(0,"router-outlet")},dependencies:[jI],encapsulation:2})}}return n})();function KI(n,e){return n.providers&&!n._injector&&(n._injector=Ap(n.providers,e,`Route: ${n.path}`)),n._injector??e}function yu(n){let e=n.children&&n.children.map(yu),t=e?Ae(F({},n),{children:e}):F({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==z&&(t.component=HI),t}function ct(n){return n.outlet||z}function QI(n,e){let t=n.filter(r=>ct(r)===e);return t.push(...n.filter(r=>ct(r)!==e)),t}function Si(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var JI=(n,e,t,r)=>ne(i=>(new au(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)),au=class{constructor(e,t,r,i,s){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=s}activate(e){let t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),Fc(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){let i=tr(t);e.children.forEach(s=>{let a=s.value.outlet;this.deactivateRoutes(s,i[a],r),delete i[a]}),Object.values(i).forEach(s=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,t,r){let i=e.value,s=t?t.value:null;if(i===s)if(i.component){let a=r.getContext(i.outlet);a&&this.deactivateChildRoutes(e,t,a.children)}else this.deactivateChildRoutes(e,t,r);else s&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=tr(e);for(let a of Object.values(s))this.deactivateRouteAndItsChildren(a,i);if(r&&r.outlet){let a=r.outlet.detach(),c=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:a,route:e,contexts:c})}}deactivateRouteAndOutlet(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=tr(e);for(let a of Object.values(s))this.deactivateRouteAndItsChildren(a,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){let i=tr(t);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new tu(s.value.snapshot))}),e.children.length&&this.forwardEvent(new Zc(e.value.snapshot))}activateRoutes(e,t,r){let i=e.value,s=t?t.value:null;if(Fc(i),i===s)if(i.component){let a=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,a.children)}else this.activateChildRoutes(e,t,r);else if(i.component){let a=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let c=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),a.children.onOutletReAttached(c.contexts),a.attachRef=c.componentRef,a.route=c.route.value,a.outlet&&a.outlet.attach(c.componentRef,c.route.value),Fc(c.route.value),this.activateChildRoutes(e,null,a.children)}else{let c=Si(i.snapshot);a.attachRef=null,a.route=i,a.injector=c,a.outlet&&a.outlet.activateWith(i,a.injector),this.activateChildRoutes(e,null,a.children)}}else this.activateChildRoutes(e,null,r)}},ro=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},rr=class{constructor(e,t){this.component=e,this.route=t}};function YI(n,e,t){let r=n._root,i=e?e._root:null;return hi(r,i,t,[r.value])}function XI(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function ar(n,e){let t=Symbol(),r=e.get(n,t);return r===t?typeof n=="function"&&!op(n)?n:e.get(n):r}function hi(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=tr(e);return n.children.forEach(a=>{ZI(a,s[a.value.outlet],t,r.concat([a.value]),i),delete s[a.value.outlet]}),Object.entries(s).forEach(([a,c])=>mi(c,t.getContext(a),i)),i}function ZI(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=n.value,a=e?e.value:null,c=t?t.getContext(n.value.outlet):null;if(a&&s.routeConfig===a.routeConfig){let u=ew(a,s,s.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new ro(r)):(s.data=a.data,s._resolvedData=a._resolvedData),s.component?hi(n,e,c?c.children:null,r,i):hi(n,e,t,r,i),u&&c&&c.outlet&&c.outlet.isActivated&&i.canDeactivateChecks.push(new rr(c.outlet.component,a))}else a&&mi(e,c,i),i.canActivateChecks.push(new ro(r)),s.component?hi(n,null,c?c.children:null,r,i):hi(n,null,t,r,i);return i}function ew(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!vn(n.url,e.url);case"pathParamsOrQueryParamsChange":return!vn(n.url,e.url)||!at(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!su(n,e)||!at(n.queryParams,e.queryParams);case"paramsChange":default:return!su(n,e)}}function mi(n,e,t){let r=tr(n),i=n.value;Object.entries(r).forEach(([s,a])=>{i.component?e?mi(a,e.children.getContext(s),t):mi(a,null,t):mi(a,e,t)}),i.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new rr(e.outlet.component,i)):t.canDeactivateChecks.push(new rr(null,i)):t.canDeactivateChecks.push(new rr(null,i))}function bi(n){return typeof n=="function"}function tw(n){return typeof n=="boolean"}function nw(n){return n&&bi(n.canLoad)}function rw(n){return n&&bi(n.canActivate)}function iw(n){return n&&bi(n.canActivateChild)}function sw(n){return n&&bi(n.canDeactivate)}function ow(n){return n&&bi(n.canMatch)}function Tm(n){return n instanceof tp||n?.name==="EmptyError"}var Ws=Symbol("INITIAL_VALUE");function or(){return ot(n=>uc(n.map(e=>e.pipe(Jn(1),mc(Ws)))).pipe(ne(e=>{for(let t of e)if(t!==!0){if(t===Ws)return Ws;if(t===!1||t instanceof Wt)return t}return!0}),pn(e=>e!==Ws),Jn(1)))}function aw(n,e){return Qe(t=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:a}}=t;return a.length===0&&s.length===0?B(Ae(F({},t),{guardsResult:!0})):cw(a,r,i,n).pipe(Qe(c=>c&&tw(c)?uw(r,s,n,e):B(c)),ne(c=>Ae(F({},t),{guardsResult:c})))})}function cw(n,e,t,r){return Ue(n).pipe(Qe(i=>pw(i.component,i.route,t,e,r)),zt(i=>i!==!0,!0))}function uw(n,e,t,r){return Ue(e).pipe(ii(i=>np(hw(i.route.parent,r),lw(i.route,r),fw(n,i.path,t),dw(n,i.route,t))),zt(i=>i!==!0,!0))}function lw(n,e){return n!==null&&e&&e(new eu(n)),B(!0)}function hw(n,e){return n!==null&&e&&e(new Xc(n)),B(!0)}function dw(n,e,t){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return B(!0);let i=r.map(s=>hc(()=>{let a=Si(e)??t,c=ar(s,a),u=rw(c)?c.canActivate(e,n):mn(a,()=>c(e,n));return Kt(u).pipe(zt())}));return B(i).pipe(or())}function fw(n,e,t){let r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(a=>XI(a)).filter(a=>a!==null).map(a=>hc(()=>{let c=a.guards.map(u=>{let d=Si(a.node)??t,p=ar(u,d),g=iw(p)?p.canActivateChild(r,n):mn(d,()=>p(r,n));return Kt(g).pipe(zt())});return B(c).pipe(or())}));return B(s).pipe(or())}function pw(n,e,t,r,i){let s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!s||s.length===0)return B(!0);let a=s.map(c=>{let u=Si(e)??i,d=ar(c,u),p=sw(d)?d.canDeactivate(n,e,t,r):mn(u,()=>d(n,e,t,r));return Kt(p).pipe(zt())});return B(a).pipe(or())}function mw(n,e,t,r){let i=e.canLoad;if(i===void 0||i.length===0)return B(!0);let s=i.map(a=>{let c=ar(a,n),u=nw(c)?c.canLoad(e,t):mn(n,()=>c(e,t));return Kt(u)});return B(s).pipe(or(),Am(r))}function Am(n){return rc(ve(e=>{if(sr(e))throw Im(n,e)}),ne(e=>e===!0))}function gw(n,e,t,r){let i=e.canMatch;if(!i||i.length===0)return B(!0);let s=i.map(a=>{let c=ar(a,n),u=ow(c)?c.canMatch(e,t):mn(n,()=>c(e,t));return Kt(u)});return B(s).pipe(or(),Am(r))}var Ti=class{constructor(e){this.segmentGroup=e||null}},io=class extends Error{constructor(e){super(),this.urlTree=e}};function er(n){return ri(new Ti(n))}function yw(n){return ri(new pe(4e3,!1))}function _w(n){return ri(wm(!1,ze.GuardRejected))}var cu=class{constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return B(r);if(i.numberOfChildren>1||!i.children[z])return yw(e.redirectTo);i=i.children[z]}}applyRedirectCommands(e,t,r){let i=this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r);if(t.startsWith("/"))throw new io(i);return i}applyRedirectCreateUrlTree(e,t,r,i){let s=this.createSegmentGroup(e,t.root,r,i);return new Wt(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let r={};return Object.entries(e).forEach(([i,s])=>{if(typeof s=="string"&&s.startsWith(":")){let c=s.substring(1);r[i]=t[c]}else r[i]=s}),r}createSegmentGroup(e,t,r,i){let s=this.createSegments(e,t.segments,r,i),a={};return Object.entries(t.children).forEach(([c,u])=>{a[c]=this.createSegmentGroup(e,u,r,i)}),new Z(s,a)}createSegments(e,t,r,i){return t.map(s=>s.path.startsWith(":")?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,t,r){let i=r[t.path.substring(1)];if(!i)throw new pe(4001,!1);return i}findOrReturn(e,t){let r=0;for(let i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}},uu={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function vw(n,e,t,r,i){let s=_u(n,e,t);return s.matched?(r=KI(e,r),gw(r,e,t,i).pipe(ne(a=>a===!0?s:F({},uu)))):B(s)}function _u(n,e,t){if(e.path==="**")return Iw(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?F({},uu):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let i=(e.matcher||mI)(t,n,e);if(!i)return F({},uu);let s={};Object.entries(i.posParams??{}).forEach(([c,u])=>{s[c]=u.path});let a=i.consumed.length>0?F(F({},s),i.consumed[i.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:a,positionalParamSegments:i.posParams??{}}}function Iw(n){return{matched:!0,parameters:n.length>0?rm(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function em(n,e,t,r){return t.length>0&&Tw(n,t,r)?{segmentGroup:new Z(e,Ew(r,new Z(t,n.children))),slicedSegments:[]}:t.length===0&&Aw(n,t,r)?{segmentGroup:new Z(n.segments,ww(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new Z(n.segments,n.children),slicedSegments:t}}function ww(n,e,t,r){let i={};for(let s of t)if(oo(n,e,s)&&!r[ct(s)]){let a=new Z([],{});i[ct(s)]=a}return F(F({},r),i)}function Ew(n,e){let t={};t[z]=e;for(let r of n)if(r.path===""&&ct(r)!==z){let i=new Z([],{});t[ct(r)]=i}return t}function Tw(n,e,t){return t.some(r=>oo(n,e,r)&&ct(r)!==z)}function Aw(n,e,t){return t.some(r=>oo(n,e,r))}function oo(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function Sw(n,e,t,r){return ct(n)!==r&&(r===z||!oo(e,t,n))?!1:_u(e,n,t).matched}function bw(n,e,t){return e.length===0&&!n.children[t]}var lu=class{};function Rw(n,e,t,r,i,s,a="emptyOnly"){return new hu(n,e,t,r,i,a,s).recognize()}var Cw=31,hu=class{constructor(e,t,r,i,s,a,c){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=s,this.paramsInheritanceStrategy=a,this.urlSerializer=c,this.applyRedirects=new cu(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new pe(4002,`'${e.segmentGroup}'`)}recognize(){let e=em(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(ne(t=>{let r=new wi([],Object.freeze({}),Object.freeze(F({},this.urlTree.queryParams)),this.urlTree.fragment,{},z,this.rootComponentType,null,{}),i=new qe(r,t),s=new no("",i),a=xI(r,[],this.urlTree.queryParams,this.urlTree.fragment);return a.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(a),this.inheritParamsAndData(s._root,null),{state:s,tree:a}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e,z).pipe(Qn(r=>{if(r instanceof io)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof Ti?this.noMatchError(r):r}))}inheritParamsAndData(e,t){let r=e.value,i=pu(r,t,this.paramsInheritanceStrategy);r.params=Object.freeze(i.params),r.data=Object.freeze(i.data),e.children.forEach(s=>this.inheritParamsAndData(s,r))}processSegmentGroup(e,t,r,i){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,i,!0).pipe(ne(s=>s instanceof qe?[s]:[]))}processChildren(e,t,r){let i=[];for(let s of Object.keys(r.children))s==="primary"?i.unshift(s):i.push(s);return Ue(i).pipe(ii(s=>{let a=r.children[s],c=QI(t,s);return this.processSegmentGroup(e,c,a,s)}),pc((s,a)=>(s.push(...a),s)),dc(null),ip(),Qe(s=>{if(s===null)return er(r);let a=Sm(s);return Pw(a),B(a)}))}processSegment(e,t,r,i,s,a){return Ue(t).pipe(ii(c=>this.processSegmentAgainstRoute(c._injector??e,t,c,r,i,s,a).pipe(Qn(u=>{if(u instanceof Ti)return B(null);throw u}))),zt(c=>!!c),Qn(c=>{if(Tm(c))return bw(r,i,s)?B(new lu):er(r);throw c}))}processSegmentAgainstRoute(e,t,r,i,s,a,c){return Sw(r,i,s,a)?r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,s,a):this.allowRedirects&&c?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,s,a):er(i):er(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,s,a){let{matched:c,consumedSegments:u,positionalParamSegments:d,remainingSegments:p}=_u(t,i,s);if(!c)return er(t);i.redirectTo.startsWith("/")&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>Cw&&(this.allowRedirects=!1));let g=this.applyRedirects.applyRedirectCommands(u,i.redirectTo,d);return this.applyRedirects.lineralizeSegments(i,g).pipe(Qe(I=>this.processSegment(e,r,t,I.concat(p),a,!1)))}matchSegmentAgainstRoute(e,t,r,i,s){let a=vw(t,r,i,e,this.urlSerializer);return r.path==="**"&&(t.children={}),a.pipe(ot(c=>c.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(ot(({routes:u})=>{let d=r._loadedInjector??e,{consumedSegments:p,remainingSegments:g,parameters:I}=c,R=new wi(p,I,Object.freeze(F({},this.urlTree.queryParams)),this.urlTree.fragment,Nw(r),ct(r),r.component??r._loadedComponent??null,r,kw(r)),{segmentGroup:D,slicedSegments:O}=em(t,p,g,u);if(O.length===0&&D.hasChildren())return this.processChildren(d,u,D).pipe(ne($=>$===null?null:new qe(R,$)));if(u.length===0&&O.length===0)return B(new qe(R,[]));let N=ct(r)===s;return this.processSegment(d,u,D,O,N?z:s,!0).pipe(ne($=>new qe(R,$ instanceof qe?[$]:[])))}))):er(t)))}getChildConfig(e,t,r){return t.children?B({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?B({routes:t._loadedRoutes,injector:t._loadedInjector}):mw(e,t,r,this.urlSerializer).pipe(Qe(i=>i?this.configLoader.loadChildren(e,t).pipe(ve(s=>{t._loadedRoutes=s.routes,t._loadedInjector=s.injector})):_w(t))):B({routes:[],injector:e})}};function Pw(n){n.sort((e,t)=>e.value.outlet===z?-1:t.value.outlet===z?1:e.value.outlet.localeCompare(t.value.outlet))}function Dw(n){let e=n.value.routeConfig;return e&&e.path===""}function Sm(n){let e=[],t=new Set;for(let r of n){if(!Dw(r)){e.push(r);continue}let i=e.find(s=>r.value.routeConfig===s.value.routeConfig);i!==void 0?(i.children.push(...r.children),t.add(i)):e.push(r)}for(let r of t){let i=Sm(r.children);e.push(new qe(r.value,i))}return e.filter(r=>!t.has(r))}function Nw(n){return n.data||{}}function kw(n){return n.resolve||{}}function Ow(n,e,t,r,i,s){return Qe(a=>Rw(n,e,t,r,a.extractedUrl,i,s).pipe(ne(({state:c,tree:u})=>Ae(F({},a),{targetSnapshot:c,urlAfterRedirects:u}))))}function xw(n,e){return Qe(t=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return B(t);let s=new Set(i.map(u=>u.route)),a=new Set;for(let u of s)if(!a.has(u))for(let d of bm(u))a.add(d);let c=0;return Ue(a).pipe(ii(u=>s.has(u)?Mw(u,r,n,e):(u.data=pu(u,u.parent,n).resolve,B(void 0))),ve(()=>c++),fc(1),Qe(u=>c===a.size?B(t):qt))})}function bm(n){let e=n.children.map(t=>bm(t)).flat();return[n,...e]}function Mw(n,e,t,r){let i=n.routeConfig,s=n._resolve;return i?.title!==void 0&&!_m(i)&&(s[Ai]=i.title),Vw(s,n,e,r).pipe(ne(a=>(n._resolvedData=a,n.data=pu(n,n.parent,t).resolve,null)))}function Vw(n,e,t,r){let i=Bc(n);if(i.length===0)return B({});let s={};return Ue(i).pipe(Qe(a=>Lw(n[a],e,t,r).pipe(zt(),ve(c=>{s[a]=c}))),fc(1),rp(s),Qn(a=>Tm(a)?qt:ri(a)))}function Lw(n,e,t,r){let i=Si(e)??r,s=ar(n,i),a=s.resolve?s.resolve(e,t):mn(i,()=>s(e,t));return Kt(a)}function Uc(n){return ot(e=>{let t=n(e);return t?Ue(t).pipe(ne(()=>e)):B(e)})}var Rm=(()=>{class n{buildTitle(t){let r,i=t.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(s=>s.outlet===z);return r}getResolvedTitleForRoute(t){return t.data[Ai]}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=re({token:n,factory:()=>G(Fw),providedIn:"root"})}}return n})(),Fw=(()=>{class n extends Rm{constructor(t){super(),this.title=t}updateTitle(t){let r=this.buildTitle(t);r!==void 0&&this.title.setTitle(r)}static{this.\u0275fac=function(r){return new(r||n)(se(Qp))}}static{this.\u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),vu=new Ie("",{providedIn:"root",factory:()=>({})}),Iu=new Ie(""),Uw=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=G(Ac)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return B(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);let r=Kt(t.loadComponent()).pipe(ne(Cm),ve(s=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=s}),Os(()=>{this.componentLoaders.delete(t)})),i=new sc(r,()=>new jt).pipe(ic());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return B({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let s=$w(r,this.compiler,t,this.onLoadEndListener).pipe(Os(()=>{this.childrenLoaders.delete(r)})),a=new sc(s,()=>new jt).pipe(ic());return this.childrenLoaders.set(r,a),a}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function $w(n,e,t,r){return Kt(n.loadChildren()).pipe(ne(Cm),Qe(i=>i instanceof Tp||Array.isArray(i)?B(i):Ue(e.compileModuleAsync(i))),ne(i=>{r&&r(n);let s,a,c=!1;return Array.isArray(i)?(a=i,c=!0):(s=i.create(t).injector,a=s.get(Iu,[],{optional:!0,self:!0}).flat()),{routes:a.map(yu),injector:s}}))}function Bw(n){return n&&typeof n=="object"&&"default"in n}function Cm(n){return Bw(n)?n.default:n}var wu=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=re({token:n,factory:()=>G(jw),providedIn:"root"})}}return n})(),jw=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),qw=new Ie("");var zw=(()=>{class n{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new jt,this.transitionAbortSubject=new jt,this.configLoader=G(Uw),this.environmentInjector=G(Vs),this.urlSerializer=G(fu),this.rootContexts=G(so),this.location=G(js),this.inputBindingEnabled=G(gu,{optional:!0})!==null,this.titleStrategy=G(Rm),this.options=G(vu,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=G(wu),this.createViewTransition=G(qw,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>B(void 0),this.rootComponentType=null;let t=i=>this.events.next(new Jc(i)),r=i=>this.events.next(new Yc(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=t}complete(){this.transitions?.complete()}handleNavigationRequest(t){let r=++this.navigationId;this.transitions?.next(Ae(F(F({},this.transitions.value),t),{id:r}))}setupNavigations(t,r,i){return this.transitions=new Ke({id:0,currentUrlTree:r,currentRawUrl:r,extractedUrl:this.urlHandlingStrategy.extract(r),urlAfterRedirects:this.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:pi,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(pn(s=>s.id!==0),ne(s=>Ae(F({},s),{extractedUrl:this.urlHandlingStrategy.extract(s.rawUrl)})),ot(s=>{let a=!1,c=!1;return B(s).pipe(ot(u=>{if(this.navigationId>s.id)return this.cancelNavigationTransition(s,"",ze.SupersededByNewNavigation),qt;this.currentTransition=s,this.currentNavigation={id:u.id,initialUrl:u.rawUrl,extractedUrl:u.extractedUrl,trigger:u.source,extras:u.extras,previousNavigation:this.lastSuccessfulNavigation?Ae(F({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let d=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),p=u.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!d&&p!=="reload"){let g="";return this.events.next(new In(u.id,this.urlSerializer.serialize(u.rawUrl),g,Gc.IgnoredSameUrlNavigation)),u.resolve(null),qt}if(this.urlHandlingStrategy.shouldProcessUrl(u.rawUrl))return B(u).pipe(ot(g=>{let I=this.transitions?.getValue();return this.events.next(new yi(g.id,this.urlSerializer.serialize(g.extractedUrl),g.source,g.restoredState)),I!==this.transitions?.getValue()?qt:Promise.resolve(g)}),Ow(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),ve(g=>{s.targetSnapshot=g.targetSnapshot,s.urlAfterRedirects=g.urlAfterRedirects,this.currentNavigation=Ae(F({},this.currentNavigation),{finalUrl:g.urlAfterRedirects});let I=new Zs(g.id,this.urlSerializer.serialize(g.extractedUrl),this.urlSerializer.serialize(g.urlAfterRedirects),g.targetSnapshot);this.events.next(I)}));if(d&&this.urlHandlingStrategy.shouldProcessUrl(u.currentRawUrl)){let{id:g,extractedUrl:I,source:R,restoredState:D,extras:O}=u,N=new yi(g,this.urlSerializer.serialize(I),R,D);this.events.next(N);let $=gm(this.rootComponentType).snapshot;return this.currentTransition=s=Ae(F({},u),{targetSnapshot:$,urlAfterRedirects:I,extras:Ae(F({},O),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=I,B(s)}else{let g="";return this.events.next(new In(u.id,this.urlSerializer.serialize(u.extractedUrl),g,Gc.IgnoredByUrlHandlingStrategy)),u.resolve(null),qt}}),ve(u=>{let d=new Wc(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(d)}),ne(u=>(this.currentTransition=s=Ae(F({},u),{guards:YI(u.targetSnapshot,u.currentSnapshot,this.rootContexts)}),s)),aw(this.environmentInjector,u=>this.events.next(u)),ve(u=>{if(s.guardsResult=u.guardsResult,sr(u.guardsResult))throw Im(this.urlSerializer,u.guardsResult);let d=new Hc(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot,!!u.guardsResult);this.events.next(d)}),pn(u=>u.guardsResult?!0:(this.cancelNavigationTransition(u,"",ze.GuardRejected),!1)),Uc(u=>{if(u.guards.canActivateChecks.length)return B(u).pipe(ve(d=>{let p=new Kc(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(p)}),ot(d=>{let p=!1;return B(d).pipe(xw(this.paramsInheritanceStrategy,this.environmentInjector),ve({next:()=>p=!0,complete:()=>{p||this.cancelNavigationTransition(d,"",ze.NoDataFromResolver)}}))}),ve(d=>{let p=new Qc(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(p)}))}),Uc(u=>{let d=p=>{let g=[];p.routeConfig?.loadComponent&&!p.routeConfig._loadedComponent&&g.push(this.configLoader.loadComponent(p.routeConfig).pipe(ve(I=>{p.component=I}),ne(()=>{})));for(let I of p.children)g.push(...d(I));return g};return uc(d(u.targetSnapshot.root)).pipe(dc(null),Jn(1))}),Uc(()=>this.afterPreactivation()),ot(()=>{let{currentSnapshot:u,targetSnapshot:d}=s,p=this.createViewTransition?.(this.environmentInjector,u.root,d.root);return p?Ue(p).pipe(ne(()=>s)):B(s)}),ne(u=>{let d=qI(t.routeReuseStrategy,u.targetSnapshot,u.currentRouterState);return this.currentTransition=s=Ae(F({},u),{targetRouterState:d}),this.currentNavigation.targetRouterState=d,s}),ve(()=>{this.events.next(new vi)}),JI(this.rootContexts,t.routeReuseStrategy,u=>this.events.next(u),this.inputBindingEnabled),Jn(1),ve({next:u=>{a=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Tt(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects))),this.titleStrategy?.updateTitle(u.targetRouterState.snapshot),u.resolve(!0)},complete:()=>{a=!0}}),sp(this.transitionAbortSubject.pipe(ve(u=>{throw u}))),Os(()=>{!a&&!c&&this.cancelNavigationTransition(s,"",ze.SupersededByNewNavigation),this.currentTransition?.id===s.id&&(this.currentNavigation=null,this.currentTransition=null)}),Qn(u=>{if(c=!0,Em(u))this.events.next(new Ht(s.id,this.urlSerializer.serialize(s.extractedUrl),u.message,u.cancellationCode)),WI(u)?this.events.next(new Ii(u.url)):s.resolve(!1);else{this.events.next(new _i(s.id,this.urlSerializer.serialize(s.extractedUrl),u,s.targetSnapshot??void 0));try{s.resolve(t.errorHandler(u))}catch(d){this.options.resolveNavigationPromiseOnError?s.resolve(!1):s.reject(d)}}return qt}))}))}cancelNavigationTransition(t,r,i){let s=new Ht(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(s),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){return this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))).toString()!==this.currentTransition?.extractedUrl.toString()&&!this.currentTransition?.extras.skipLocationChange}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function Gw(n){return n!==pi}var Ww=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=re({token:n,factory:()=>G(Hw),providedIn:"root"})}}return n})(),du=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},Hw=(()=>{class n extends du{static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=yc(n)))(i||n)}})()}static{this.\u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Pm=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=re({token:n,factory:()=>G(Kw),providedIn:"root"})}}return n})(),Kw=(()=>{class n extends Pm{constructor(){super(...arguments),this.location=G(js),this.urlSerializer=G(fu),this.options=G(vu,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=G(wu),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new Wt,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=gm(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{r.type==="popstate"&&t(r.url,r.state)})}handleRouterEvent(t,r){if(t instanceof yi)this.stateMemento=this.createStateMemento();else if(t instanceof In)this.rawUrlTree=r.initialUrl;else if(t instanceof Zs){if(this.urlUpdateStrategy==="eager"&&!r.extras.skipLocationChange){let i=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl);this.setBrowserUrl(i,r)}}else t instanceof vi?(this.currentUrlTree=r.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl),this.routerState=r.targetRouterState,this.urlUpdateStrategy==="deferred"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,r))):t instanceof Ht&&(t.code===ze.GuardRejected||t.code===ze.NoDataFromResolver)?this.restoreHistory(r):t instanceof _i?this.restoreHistory(r,!0):t instanceof Tt&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,r){let i=this.urlSerializer.serialize(t);if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){let s=this.browserPageId,a=F(F({},r.extras.state),this.generateNgRouterState(r.id,s));this.location.replaceState(i,"",a)}else{let s=F(F({},r.extras.state),this.generateNgRouterState(r.id,this.browserPageId+1));this.location.go(i,"",s)}}restoreHistory(t,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,s=this.currentPageId-i;s!==0?this.location.historyGo(s):this.currentUrlTree===t.finalUrl&&s===0&&(this.resetState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=yc(n)))(i||n)}})()}static{this.\u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),di=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(di||{});function Qw(n,e){n.events.pipe(pn(t=>t instanceof Tt||t instanceof Ht||t instanceof _i||t instanceof In),ne(t=>t instanceof Tt||t instanceof In?di.COMPLETE:(t instanceof Ht?t.code===ze.Redirect||t.code===ze.SupersededByNewNavigation:!1)?di.REDIRECTING:di.FAILED),pn(t=>t!==di.REDIRECTING),Jn(1)).subscribe(()=>{e()})}function Jw(n){throw n}var Yw={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Xw={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},ao=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.isNgZoneEnabled=!1,this.console=G(Us),this.stateManager=G(Pm),this.options=G(vu,{optional:!0})||{},this.pendingTasks=G(Sp),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=G(zw),this.urlSerializer=G(fu),this.location=G(js),this.urlHandlingStrategy=G(wu),this._events=new jt,this.errorHandler=this.options.errorHandler||Jw,this.navigated=!1,this.routeReuseStrategy=G(Ww),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=G(Iu,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!G(gu,{optional:!0}),this.eventsSubscription=new Yf,this.isNgZoneEnabled=G(Se)instanceof Se&&Se.isInAngularZone(),this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,s=this.navigationTransitions.currentNavigation;if(i!==null&&s!==null){if(this.stateManager.handleRouterEvent(r,s),r instanceof Ht&&r.code!==ze.Redirect&&r.code!==ze.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof Tt)this.navigated=!0;else if(r instanceof Ii){let a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),c={info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:this.urlUpdateStrategy==="eager"||Gw(i.source)};this.scheduleNavigation(a,pi,null,c,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}eE(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),pi,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(t,"popstate",r)},0)})}navigateToSyncWithBrowser(t,r,i){let s={replaceUrl:!0},a=i?.navigationId?i:null;if(i){let u=F({},i);delete u.navigationId,delete u.\u0275routerPageId,Object.keys(u).length!==0&&(s.state=u)}let c=this.parseUrl(t);this.scheduleNavigation(c,r,a,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(yu),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){let{relativeTo:i,queryParams:s,fragment:a,queryParamsHandling:c,preserveFragment:u}=r,d=u?this.currentUrlTree.fragment:a,p=null;switch(c){case"merge":p=F(F({},this.currentUrlTree.queryParams),s);break;case"preserve":p=this.currentUrlTree.queryParams;break;default:p=s||null}p!==null&&(p=this.removeEmptyProps(p));let g;try{let I=i?i.snapshot:this.routerState.snapshot.root;g=dm(I)}catch{(typeof t[0]!="string"||!t[0].startsWith("/"))&&(t=[]),g=this.currentUrlTree.root}return fm(g,t,p,d??null)}navigateByUrl(t,r={skipLocationChange:!1}){let i=sr(t)?t:this.parseUrl(t),s=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(s,pi,null,r)}navigate(t,r={skipLocationChange:!1}){return Zw(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.urlSerializer.parse("/")}}isActive(t,r){let i;if(r===!0?i=F({},Yw):r===!1?i=F({},Xw):i=r,sr(t))return Jp(this.currentUrlTree,t,i);let s=this.parseUrl(t);return Jp(this.currentUrlTree,s,i)}removeEmptyProps(t){return Object.entries(t).reduce((r,[i,s])=>(s!=null&&(r[i]=s),r),{})}scheduleNavigation(t,r,i,s,a){if(this.disposed)return Promise.resolve(!1);let c,u,d;a?(c=a.resolve,u=a.reject,d=a.promise):d=new Promise((g,I)=>{c=g,u=I});let p=this.pendingTasks.add();return Qw(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(p))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:s,resolve:c,reject:u,promise:d,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),d.catch(g=>Promise.reject(g))}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function Zw(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new pe(4008,!1)}function eE(n){return!(n instanceof vi)&&!(n instanceof Ii)}var tm=(()=>{class n{constructor(t,r,i,s,a,c){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=s,this.el=a,this.locationStrategy=c,this.href=null,this.commands=null,this.onChanges=new jt,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1;let u=a.nativeElement.tagName?.toLowerCase();this.isAnchorElement=u==="a"||u==="area",this.isAnchorElement?this.subscription=t.events.subscribe(d=>{d instanceof Tt&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(t){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(t){t!=null?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(t,r,i,s,a){let c=this.urlTree;if(c===null||this.isAnchorElement&&(t!==0||r||i||s||a||typeof this.target=="string"&&this.target!="_self"))return!0;let u={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(c,u),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let t=this.urlTree;this.href=t!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(t)):null;let r=this.href===null?null:vp(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",r)}applyAttributeValue(t,r){let i=this.renderer,s=this.el.nativeElement;r!==null?i.setAttribute(s,t,r):i.removeAttribute(s,t)}get urlTree(){return this.commands===null?null:this.router.createUrlTree(this.commands,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static{this.\u0275fac=function(r){return new(r||n)(et(ao),et(wn),up("tabindex"),et(Ec),et(vc),et(bc))}}static{this.\u0275dir=Ms({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(r,i){r&1&&Cp("click",function(a){return i.onClick(a.button,a.ctrlKey,a.shiftKey,a.altKey,a.metaKey)}),r&2&&bp("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[xs.HasDecoratorInputTransform,"preserveFragment","preserveFragment",Bs],skipLocationChange:[xs.HasDecoratorInputTransform,"skipLocationChange","skipLocationChange",Bs],replaceUrl:[xs.HasDecoratorInputTransform,"replaceUrl","replaceUrl",Bs],routerLink:"routerLink"},standalone:!0,features:[Ep,Ls]})}}return n})(),oC=(()=>{class n{get isActive(){return this._isActive}constructor(t,r,i,s,a){this.router=t,this.element=r,this.renderer=i,this.cdr=s,this.link=a,this.classes=[],this._isActive=!1,this.routerLinkActiveOptions={exact:!1},this.isActiveChange=new Yn,this.routerEventsSubscription=t.events.subscribe(c=>{c instanceof Tt&&this.update()})}ngAfterContentInit(){B(this.links.changes,B(null)).pipe(lc()).subscribe(t=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();let t=[...this.links.toArray(),this.link].filter(r=>!!r).map(r=>r.onChanges);this.linkInputChangesSubscription=Ue(t).pipe(lc()).subscribe(r=>{this._isActive!==this.isLinkActive(this.router)(r)&&this.update()})}set routerLinkActive(t){let r=Array.isArray(t)?t:t.split(" ");this.classes=r.filter(i=>!!i)}ngOnChanges(t){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.router.navigated||queueMicrotask(()=>{let t=this.hasActiveLinks();this.classes.forEach(r=>{t?this.renderer.addClass(this.element.nativeElement,r):this.renderer.removeClass(this.element.nativeElement,r)}),t&&this.ariaCurrentWhenActive!==void 0?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this._isActive!==t&&(this._isActive=t,this.cdr.markForCheck(),this.isActiveChange.emit(t))})}isLinkActive(t){let r=tE(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return i=>{let s=i.urlTree;return s?t.isActive(s,r):!1}}hasActiveLinks(){let t=this.isLinkActive(this.router);return this.link&&t(this.link)||this.links.some(t)}static{this.\u0275fac=function(r){return new(r||n)(et(ao),et(vc),et(Ec),et($s),et(tm,8))}}static{this.\u0275dir=Ms({type:n,selectors:[["","routerLinkActive",""]],contentQueries:function(r,i,s){if(r&1&&Pp(s,tm,5),r&2){let a;Dp(a=Np())&&(i.links=a)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],standalone:!0,features:[Ls]})}}return n})();function tE(n){return!!n.paths}var nE=new Ie("");function aC(n,...e){return Et([{provide:Iu,multi:!0,useValue:n},[],{provide:wn,useFactory:rE,deps:[ao]},{provide:Mp,multi:!0,useFactory:iE},e.map(t=>t.\u0275providers)])}function rE(n){return n.routerState.root}function iE(){let n=G(Gt);return e=>{let t=n.get(Tc);if(e!==t.components[0])return;let r=n.get(ao),i=n.get(sE);n.get(oE)===1&&r.initialNavigation(),n.get(aE,null,gc.Optional)?.setUpPreloading(),n.get(nE,null,gc.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var sE=new Ie("",{factory:()=>new jt}),oE=new Ie("",{providedIn:"root",factory:()=>1});var aE=new Ie("");var Nm=function(n){let e=[],t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},cE=function(n){let e=[],t=0,r=0;for(;t<n.length;){let i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let s=n[t++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){let s=n[t++],a=n[t++],c=n[t++],u=((i&7)<<18|(s&63)<<12|(a&63)<<6|c&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{let s=n[t++],a=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|a&63)}}return e.join("")},km={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){let s=n[i],a=i+1<n.length,c=a?n[i+1]:0,u=i+2<n.length,d=u?n[i+2]:0,p=s>>2,g=(s&3)<<4|c>>4,I=(c&15)<<2|d>>6,R=d&63;u||(R=64,a||(I=64)),r.push(t[p],t[g],t[I],t[R])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(Nm(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):cE(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){let s=t[n.charAt(i++)],c=i<n.length?t[n.charAt(i)]:0;++i;let d=i<n.length?t[n.charAt(i)]:64;++i;let g=i<n.length?t[n.charAt(i)]:64;if(++i,s==null||c==null||d==null||g==null)throw new Tu;let I=s<<2|c>>4;if(r.push(I),d!==64){let R=c<<4&240|d>>2;if(r.push(R),g!==64){let D=d<<6&192|g;r.push(D)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},Tu=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},uE=function(n){let e=Nm(n);return km.encodeByteArray(e,!0)},Ri=function(n){return uE(n).replace(/\./g,"")},Su=function(n){try{return km.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function lE(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var hE=()=>lE().__FIREBASE_DEFAULTS__,dE=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},fE=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&Su(n[1]);return e&&JSON.parse(e)},uo=()=>{try{return hE()||dE()||fE()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},bu=n=>{var e,t;return(t=(e=uo())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},Om=n=>{let e=bu(n);if(!e)return;let t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},Ru=()=>{var n;return(n=uo())===null||n===void 0?void 0:n.config},Cu=n=>{var e;return(e=uo())===null||e===void 0?void 0:e[`_${n}`]};var co=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}};function xm(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,s=n.sub||n.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let a=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},n);return[Ri(JSON.stringify(t)),Ri(JSON.stringify(a)),""].join(".")}function we(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Mm(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(we())}function pE(){var n;let e=(n=uo())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Vm(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Lm(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function Fm(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Um(){let n=we();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function $m(){return!pE()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Pu(){try{return typeof indexedDB=="object"}catch{return!1}}function Bm(){return new Promise((n,e)=>{try{let t=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(t){e(t)}})}var mE="FirebaseError",Ge=class n extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=mE,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,At.prototype.create)}},At=class{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){let r=t[0]||{},i=`${this.service}/${e}`,s=this.errors[e],a=s?gE(s,r):"Error",c=`${this.serviceName}: ${a} (${i}).`;return new Ge(i,c,r)}};function gE(n,e){return n.replace(yE,(t,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var yE=/\{\$([^}]+)}/g;function jm(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function En(n,e){if(n===e)return!0;let t=Object.keys(n),r=Object.keys(e);for(let i of t){if(!r.includes(i))return!1;let s=n[i],a=e[i];if(Dm(s)&&Dm(a)){if(!En(s,a))return!1}else if(s!==a)return!1}for(let i of r)if(!t.includes(i))return!1;return!0}function Dm(n){return n!==null&&typeof n=="object"}function Ci(n){let e=[];for(let[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function cr(n){let e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){let[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function ur(n){let e=n.indexOf("?");if(!e)return"";let t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function qm(n,e){let t=new Au(n,e);return t.subscribe.bind(t)}var Au=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");_E(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=Eu),i.error===void 0&&(i.error=Eu),i.complete===void 0&&(i.complete=Eu);let s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function _E(n,e){if(typeof n!="object"||n===null)return!1;for(let t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Eu(){}var lC=4*60*60*1e3;function de(n){return n&&n._delegate?n._delegate:n}var Ye=class{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var Tn="[DEFAULT]";var Du=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let r=new co;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(IE(e))try{this.getOrInitializeService({instanceIdentifier:Tn})}catch{}for(let[t,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(t);try{let s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Tn){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return y(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=Tn){return this.instances.has(e)}getOptions(e=Tn){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(let[s,a]of this.instancesDeferred.entries()){let c=this.normalizeInstanceIdentifier(s);r===c&&a.resolve(i)}return i}onInit(e,t){var r;let i=this.normalizeInstanceIdentifier(t),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);let a=this.instances.get(i);return a&&e(a,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){let r=this.onInitCallbacks.get(t);if(r)for(let i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:vE(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Tn){return this.component?this.component.multipleInstances?e:Tn:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function vE(n){return n===Tn?void 0:n}function IE(n){return n.instantiationMode==="EAGER"}var lo=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new Du(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}};var wE=[],W=function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n}(W||{}),EE={debug:W.DEBUG,verbose:W.VERBOSE,info:W.INFO,warn:W.WARN,error:W.ERROR,silent:W.SILENT},TE=W.INFO,AE={[W.DEBUG]:"log",[W.VERBOSE]:"log",[W.INFO]:"info",[W.WARN]:"warn",[W.ERROR]:"error"},SE=(n,e,...t)=>{if(e<n.logLevel)return;let r=new Date().toISOString(),i=AE[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},Qt=class{constructor(e){this.name=e,this._logLevel=TE,this._logHandler=SE,this._userLogHandler=null,wE.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in W))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?EE[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,W.DEBUG,...e),this._logHandler(this,W.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,W.VERBOSE,...e),this._logHandler(this,W.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,W.INFO,...e),this._logHandler(this,W.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,W.WARN,...e),this._logHandler(this,W.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,W.ERROR,...e),this._logHandler(this,W.ERROR,...e)}};var bE=(n,e)=>e.some(t=>n instanceof t),zm,Gm;function RE(){return zm||(zm=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function CE(){return Gm||(Gm=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var Wm=new WeakMap,ku=new WeakMap,Hm=new WeakMap,Nu=new WeakMap,xu=new WeakMap;function PE(n){let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("success",s),n.removeEventListener("error",a)},s=()=>{t(ut(n.result)),i()},a=()=>{r(n.error),i()};n.addEventListener("success",s),n.addEventListener("error",a)});return e.then(t=>{t instanceof IDBCursor&&Wm.set(t,n)}).catch(()=>{}),xu.set(e,n),e}function DE(n){if(ku.has(n))return;let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("complete",s),n.removeEventListener("error",a),n.removeEventListener("abort",a)},s=()=>{t(),i()},a=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",s),n.addEventListener("error",a),n.addEventListener("abort",a)});ku.set(n,e)}var Ou={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return ku.get(n);if(e==="objectStoreNames")return n.objectStoreNames||Hm.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return ut(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function Km(n){Ou=n(Ou)}function NE(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){let r=n.call(ho(this),e,...t);return Hm.set(r,e.sort?e.sort():[e]),ut(r)}:CE().includes(n)?function(...e){return n.apply(ho(this),e),ut(Wm.get(this))}:function(...e){return ut(n.apply(ho(this),e))}}function kE(n){return typeof n=="function"?NE(n):(n instanceof IDBTransaction&&DE(n),bE(n,RE())?new Proxy(n,Ou):n)}function ut(n){if(n instanceof IDBRequest)return PE(n);if(Nu.has(n))return Nu.get(n);let e=kE(n);return e!==n&&(Nu.set(n,e),xu.set(e,n)),e}var ho=n=>xu.get(n);function Jm(n,e,{blocked:t,upgrade:r,blocking:i,terminated:s}={}){let a=indexedDB.open(n,e),c=ut(a);return r&&a.addEventListener("upgradeneeded",u=>{r(ut(a.result),u.oldVersion,u.newVersion,ut(a.transaction),u)}),t&&a.addEventListener("blocked",u=>t(u.oldVersion,u.newVersion,u)),c.then(u=>{s&&u.addEventListener("close",()=>s()),i&&u.addEventListener("versionchange",d=>i(d.oldVersion,d.newVersion,d))}).catch(()=>{}),c}var OE=["get","getKey","getAll","getAllKeys","count"],xE=["put","add","delete","clear"],Mu=new Map;function Qm(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Mu.get(e))return Mu.get(e);let t=e.replace(/FromIndex$/,""),r=e!==t,i=xE.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||OE.includes(t)))return;let s=function(a,...c){return y(this,null,function*(){let u=this.transaction(a,i?"readwrite":"readonly"),d=u.store;return r&&(d=d.index(c.shift())),(yield Promise.all([d[t](...c),i&&u.done]))[0]})};return Mu.set(e,s),s}Km(n=>Ae(F({},n),{get:(e,t,r)=>Qm(e,t)||n.get(e,t,r),has:(e,t)=>!!Qm(e,t)||n.has(e,t)}));var Lu=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(ME(t)){let r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}};function ME(n){let e=n.getComponent();return e?.type==="VERSION"}var Fu="@firebase/app",Ym="0.10.13";var St=new Qt("@firebase/app"),VE="@firebase/app-compat",LE="@firebase/analytics-compat",FE="@firebase/analytics",UE="@firebase/app-check-compat",$E="@firebase/app-check",BE="@firebase/auth",jE="@firebase/auth-compat",qE="@firebase/database",zE="@firebase/data-connect",GE="@firebase/database-compat",WE="@firebase/functions",HE="@firebase/functions-compat",KE="@firebase/installations",QE="@firebase/installations-compat",JE="@firebase/messaging",YE="@firebase/messaging-compat",XE="@firebase/performance",ZE="@firebase/performance-compat",eT="@firebase/remote-config",tT="@firebase/remote-config-compat",nT="@firebase/storage",rT="@firebase/storage-compat",iT="@firebase/firestore",sT="@firebase/vertexai-preview",oT="@firebase/firestore-compat",aT="firebase",cT="10.14.1";var Uu="[DEFAULT]",uT={[Fu]:"fire-core",[VE]:"fire-core-compat",[FE]:"fire-analytics",[LE]:"fire-analytics-compat",[$E]:"fire-app-check",[UE]:"fire-app-check-compat",[BE]:"fire-auth",[jE]:"fire-auth-compat",[qE]:"fire-rtdb",[zE]:"fire-data-connect",[GE]:"fire-rtdb-compat",[WE]:"fire-fn",[HE]:"fire-fn-compat",[KE]:"fire-iid",[QE]:"fire-iid-compat",[JE]:"fire-fcm",[YE]:"fire-fcm-compat",[XE]:"fire-perf",[ZE]:"fire-perf-compat",[eT]:"fire-rc",[tT]:"fire-rc-compat",[nT]:"fire-gcs",[rT]:"fire-gcs-compat",[iT]:"fire-fst",[oT]:"fire-fst-compat",[sT]:"fire-vertex","fire-js":"fire-js",[aT]:"fire-js-all"};var Pi=new Map,lT=new Map,$u=new Map;function Xm(n,e){try{n.container.addComponent(e)}catch(t){St.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Yt(n){let e=n.name;if($u.has(e))return St.debug(`There were multiple attempts to register component ${e}.`),!1;$u.set(e,n);for(let t of Pi.values())Xm(t,n);for(let t of lT.values())Xm(t,n);return!0}function Ni(n,e){let t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function nt(n){return n.settings!==void 0}var hT={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Jt=new At("app","Firebase",hT);var Bu=class{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Ye("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Jt.create("app-deleted",{appName:this._name})}};var Xt=cT;function zu(n,e={}){let t=n;typeof e!="object"&&(e={name:e});let r=Object.assign({name:Uu,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw Jt.create("bad-app-name",{appName:String(i)});if(t||(t=Ru()),!t)throw Jt.create("no-options");let s=Pi.get(i);if(s){if(En(t,s.options)&&En(r,s.config))return s;throw Jt.create("duplicate-app",{appName:i})}let a=new lo(i);for(let u of $u.values())a.addComponent(u);let c=new Bu(t,r,a);return Pi.set(i,c),c}function lr(n=Uu){let e=Pi.get(n);if(!e&&n===Uu&&Ru())return zu();if(!e)throw Jt.create("no-app",{appName:n});return e}function fo(){return Array.from(Pi.values())}function _e(n,e,t){var r;let i=(r=uT[n])!==null&&r!==void 0?r:n;t&&(i+=`-${t}`);let s=i.match(/\s|\//),a=e.match(/\s|\//);if(s||a){let c=[`Unable to register library "${i}" with version "${e}":`];s&&c.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&a&&c.push("and"),a&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),St.warn(c.join(" "));return}Yt(new Ye(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var dT="firebase-heartbeat-database",fT=1,Di="firebase-heartbeat-store",Vu=null;function ng(){return Vu||(Vu=Jm(dT,fT,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Di)}catch(t){console.warn(t)}}}}).catch(n=>{throw Jt.create("idb-open",{originalErrorMessage:n.message})})),Vu}function pT(n){return y(this,null,function*(){try{let t=(yield ng()).transaction(Di),r=yield t.objectStore(Di).get(rg(n));return yield t.done,r}catch(e){if(e instanceof Ge)St.warn(e.message);else{let t=Jt.create("idb-get",{originalErrorMessage:e?.message});St.warn(t.message)}}})}function Zm(n,e){return y(this,null,function*(){try{let r=(yield ng()).transaction(Di,"readwrite");yield r.objectStore(Di).put(e,rg(n)),yield r.done}catch(t){if(t instanceof Ge)St.warn(t.message);else{let r=Jt.create("idb-set",{originalErrorMessage:t?.message});St.warn(r.message)}}})}function rg(n){return`${n.name}!${n.options.appId}`}var mT=1024,gT=30*24*60*60*1e3,ju=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new qu(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return y(this,null,function*(){var e,t;try{let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=eg();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(a=>a.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(a=>{let c=new Date(a.date).valueOf();return Date.now()-c<=gT}),this._storage.overwrite(this._heartbeatsCache))}catch(r){St.warn(r)}})}getHeartbeatsHeader(){return y(this,null,function*(){var e;try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let t=eg(),{heartbeatsToSend:r,unsentEntries:i}=yT(this._heartbeatsCache.heartbeats),s=Ri(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(t){return St.warn(t),""}})}};function eg(){return new Date().toISOString().substring(0,10)}function yT(n,e=mT){let t=[],r=n.slice();for(let i of n){let s=t.find(a=>a.agent===i.agent);if(s){if(s.dates.push(i.date),tg(t)>e){s.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),tg(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}var qu=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return y(this,null,function*(){return Pu()?Bm().then(()=>!0).catch(()=>!1):!1})}read(){return y(this,null,function*(){if(yield this._canUseIndexedDBPromise){let t=yield pT(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return y(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return Zm(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return y(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return Zm(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function tg(n){return Ri(JSON.stringify({version:2,heartbeats:n})).length}function _T(n){Yt(new Ye("platform-logger",e=>new Lu(e),"PRIVATE")),Yt(new Ye("heartbeat",e=>new ju(e),"PRIVATE")),_e(Fu,Ym,n),_e(Fu,Ym,"esm2017"),_e("fire-js","")}_T("");var vT="firebase",IT="10.14.1";_e(vT,IT,"app");var Sn=new Fs("ANGULARFIRE2_VERSION");function mo(n,e,t){if(e){if(e.length===1)return e[0];let s=e.filter(a=>a.app===t);if(s.length===1)return s[0]}return t.container.getProvider(n).getImmediate({optional:!0})}var ki=(n,e)=>{let t=e?[e]:fo(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(a=>{r.includes(a)||r.push(a)})}),r},dr=class{constructor(){return ki(wT)}},wT="app-check";function hr(){}var po=class{zone;delegate;constructor(e,t=Zf){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){let i=this.zone,s=function(a){i.runGuarded(()=>{e.apply(this,[a])})};return this.delegate.schedule(s,t,r)}},Gu=class{zone;task=null;constructor(e){this.zone=e}call(e,t){let r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",hr,{},hr,hr)),t.pipe(ve({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},fr=(()=>{class n{ngZone;outsideAngular;insideAngular;constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new po(Zone.current)),this.insideAngular=t.run(()=>new po(Zone.current,Xf)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||n)(se(Se))};static \u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function go(){let n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return n}function ET(n){return go().ngZone.runOutsideAngular(()=>n())}function An(n){return go().ngZone.run(()=>n())}function TT(n){return AT(go())(n)}function AT(n){return function(t){return t=t.lift(new Gu(n.ngZone)),t.pipe(cc(n.outsideAngular),ac(n.insideAngular))}}var ST=(n,e)=>function(){let r=arguments;return e&&setTimeout(()=>{e.state==="scheduled"&&e.invoke()},10),An(()=>n.apply(void 0,r))},le=(n,e)=>function(){let t,r=arguments;for(let s=0;s<arguments.length;s++)typeof r[s]=="function"&&(e&&(t||=An(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",hr,{},hr,hr))),r[s]=ST(r[s],t));let i=ET(()=>n.apply(this,r));if(!e)if(i instanceof fn){let s=go();return i.pipe(cc(s.outsideAngular),ac(s.insideAngular))}else return An(()=>i);return i instanceof fn?i.pipe(TT):i instanceof Promise?An(()=>new Promise((s,a)=>i.then(c=>An(()=>s(c)),c=>An(()=>a(c))))):typeof i=="function"&&t?function(){return setTimeout(()=>{t&&t.state==="scheduled"&&t.invoke()},10),i.apply(this,arguments)}:An(()=>i)};var bt=class{constructor(e){return e}},bn=class{constructor(){return fo()}};function bT(n){return n&&n.length===1?n[0]:new bt(lr())}var Wu=new Ie("angularfire2._apps"),RT={provide:bt,useFactory:bT,deps:[[new $e,Wu]]},CT={provide:bn,deps:[[new $e,Wu]]};function PT(n){return(e,t)=>{let r=t.get(gn);_e("angularfire",Sn.full,"core"),_e("angularfire",Sn.full,"app"),_e("angular",Op.full,r.toString());let i=e.runOutsideAngular(()=>n(t));return new bt(i)}}function JC(n,...e){return Et([RT,CT,{provide:Wu,useFactory:PT(n),multi:!0,deps:[Se,Gt,fr,...e]}])}var YC=le(zu,!0);function Ig(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var wg=Ig,Eg=new At("auth","Firebase",Ig());var Eo=new Qt("@firebase/auth");function DT(n,...e){Eo.logLevel<=W.WARN&&Eo.warn(`Auth (${Xt}): ${n}`,...e)}function _o(n,...e){Eo.logLevel<=W.ERROR&&Eo.error(`Auth (${Xt}): ${n}`,...e)}function ht(n,...e){throw ml(n,...e)}function Rn(n,...e){return ml(n,...e)}function Tg(n,e,t){let r=Object.assign(Object.assign({},wg()),{[e]:t});return new At("auth","Firebase",r).create(e,{appName:n.name})}function Pt(n){return Tg(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function ml(n,...e){if(typeof n!="string"){let t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return Eg.create(n,...e)}function L(n,e,...t){if(!n)throw ml(e,...t)}function Rt(n){let e="INTERNAL ASSERTION FAILED: "+n;throw _o(e),new Error(e)}function en(n,e){n||Rt(e)}function Ju(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function NT(){return ig()==="http:"||ig()==="https:"}function ig(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}function kT(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(NT()||Lm()||"connection"in navigator)?navigator.onLine:!0}function OT(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var Cn=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,en(t>e,"Short delay should be less than long delay!"),this.isMobile=Mm()||Fm()}get(){return kT()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function gl(n,e){en(n.emulator,"Emulator should always be set here");let{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var To=class{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Rt("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Rt("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Rt("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var xT={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var MT=new Cn(3e4,6e4);function Dt(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}function Nt(s,a,c,u){return y(this,arguments,function*(n,e,t,r,i={}){return Ag(n,i,()=>y(this,null,function*(){let d={},p={};r&&(e==="GET"?p=r:d={body:JSON.stringify(r)});let g=Ci(Object.assign({key:n.config.apiKey},p)).slice(1),I=yield n._getAdditionalHeaders();I["Content-Type"]="application/json",n.languageCode&&(I["X-Firebase-Locale"]=n.languageCode);let R=Object.assign({method:e,headers:I},d);return Vm()||(R.referrerPolicy="no-referrer"),To.fetch()(Sg(n,n.config.apiHost,t,g),R)}))})}function Ag(n,e,t){return y(this,null,function*(){n._canInitEmulator=!1;let r=Object.assign(Object.assign({},xT),e);try{let i=new Yu(n),s=yield Promise.race([t(),i.promise]);i.clearNetworkTimeout();let a=yield s.json();if("needConfirmation"in a)throw yo(n,"account-exists-with-different-credential",a);if(s.ok&&!("errorMessage"in a))return a;{let c=s.ok?a.errorMessage:a.error.message,[u,d]=c.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw yo(n,"credential-already-in-use",a);if(u==="EMAIL_EXISTS")throw yo(n,"email-already-in-use",a);if(u==="USER_DISABLED")throw yo(n,"user-disabled",a);let p=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw Tg(n,p,d);ht(n,p)}}catch(i){if(i instanceof Ge)throw i;ht(n,"network-request-failed",{message:String(i)})}})}function $i(s,a,c,u){return y(this,arguments,function*(n,e,t,r,i={}){let d=yield Nt(n,e,t,r,i);return"mfaPendingCredential"in d&&ht(n,"multi-factor-auth-required",{_serverResponse:d}),d})}function Sg(n,e,t,r){let i=`${e}${t}?${r}`;return n.config.emulator?gl(n.config,i):`${n.config.apiScheme}://${i}`}function VT(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}var Yu=class{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(Rn(this.auth,"network-request-failed")),MT.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}};function yo(n,e,t){let r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);let i=Rn(n,e,r);return i.customData._tokenResponse=t,i}function sg(n){return n!==void 0&&n.enterprise!==void 0}var Xu=class{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(let t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return VT(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}};function LT(n,e){return y(this,null,function*(){return Nt(n,"GET","/v2/recaptchaConfig",Dt(n,e))})}function FT(n,e){return y(this,null,function*(){return Nt(n,"POST","/v1/accounts:delete",e)})}function bg(n,e){return y(this,null,function*(){return Nt(n,"POST","/v1/accounts:lookup",e)})}function Oi(n){if(n)try{let e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function yl(n,e=!1){return y(this,null,function*(){let t=de(n),r=yield t.getIdToken(e),i=_l(r);L(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");let s=typeof i.firebase=="object"?i.firebase:void 0,a=s?.sign_in_provider;return{claims:i,token:r,authTime:Oi(Hu(i.auth_time)),issuedAtTime:Oi(Hu(i.iat)),expirationTime:Oi(Hu(i.exp)),signInProvider:a||null,signInSecondFactor:s?.sign_in_second_factor||null}})}function Hu(n){return Number(n)*1e3}function _l(n){let[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return _o("JWT malformed, contained fewer than 3 sections"),null;try{let i=Su(t);return i?JSON.parse(i):(_o("Failed to decode base64 JWT payload"),null)}catch(i){return _o("Caught error parsing JWT payload as JSON",i?.toString()),null}}function og(n){let e=_l(n);return L(e,"internal-error"),L(typeof e.exp<"u","internal-error"),L(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function Mi(n,e,t=!1){return y(this,null,function*(){if(t)return e;try{return yield e}catch(r){throw r instanceof Ge&&UT(r)&&n.auth.currentUser===n&&(yield n.auth.signOut()),r}})}function UT({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var Zu=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(()=>y(this,null,function*(){yield this.iteration()}),t)}iteration(){return y(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var Vi=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Oi(this.lastLoginAt),this.creationTime=Oi(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function Ao(n){return y(this,null,function*(){var e;let t=n.auth,r=yield n.getIdToken(),i=yield Mi(n,bg(t,{idToken:r}));L(i?.users.length,t,"internal-error");let s=i.users[0];n._notifyReloadListener(s);let a=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?Rg(s.providerUserInfo):[],c=$T(n.providerData,a),u=n.isAnonymous,d=!(n.email&&s.passwordHash)&&!c?.length,p=u?d:!1,g={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:c,metadata:new Vi(s.createdAt,s.lastLoginAt),isAnonymous:p};Object.assign(n,g)})}function vl(n){return y(this,null,function*(){let e=de(n);yield Ao(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function $T(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function Rg(n){return n.map(e=>{var{providerId:t}=e,r=oc(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function BT(n,e){return y(this,null,function*(){let t=yield Ag(n,{},()=>y(this,null,function*(){let r=Ci({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=n.config,a=Sg(n,i,"/v1/token",`key=${s}`),c=yield n._getAdditionalHeaders();return c["Content-Type"]="application/x-www-form-urlencoded",To.fetch()(a,{method:"POST",headers:c,body:r})}));return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}})}function jT(n,e){return y(this,null,function*(){return Nt(n,"POST","/v2/accounts:revokeToken",Dt(n,e))})}var xi=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){L(e.idToken,"internal-error"),L(typeof e.idToken<"u","internal-error"),L(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):og(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){L(e.length!==0,"internal-error");let t=og(e);this.updateTokensAndExpiration(e,null,t)}getToken(e,t=!1){return y(this,null,function*(){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(L(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,t){return y(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:s}=yield BT(e,t);this.updateTokensAndExpiration(r,i,Number(s))})}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){let{refreshToken:r,accessToken:i,expirationTime:s}=t,a=new n;return r&&(L(typeof r=="string","internal-error",{appName:e}),a.refreshToken=r),i&&(L(typeof i=="string","internal-error",{appName:e}),a.accessToken=i),s&&(L(typeof s=="number","internal-error",{appName:e}),a.expirationTime=s),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return Rt("not implemented")}};function Zt(n,e){L(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}var pr=class n{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,s=oc(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Zu(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Vi(s.createdAt||void 0,s.lastLoginAt||void 0)}getIdToken(e){return y(this,null,function*(){let t=yield Mi(this,this.stsTokenManager.getToken(this.auth,e));return L(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t})}getIdTokenResult(e){return yl(this,e)}reload(){return vl(this)}_assign(e){this!==e&&(L(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new n(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){L(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){return y(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&(yield Ao(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return y(this,null,function*(){if(nt(this.auth.app))return Promise.reject(Pt(this.auth));let e=yield this.getIdToken();return yield Mi(this,FT(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,s,a,c,u,d,p;let g=(r=t.displayName)!==null&&r!==void 0?r:void 0,I=(i=t.email)!==null&&i!==void 0?i:void 0,R=(s=t.phoneNumber)!==null&&s!==void 0?s:void 0,D=(a=t.photoURL)!==null&&a!==void 0?a:void 0,O=(c=t.tenantId)!==null&&c!==void 0?c:void 0,N=(u=t._redirectEventId)!==null&&u!==void 0?u:void 0,$=(d=t.createdAt)!==null&&d!==void 0?d:void 0,K=(p=t.lastLoginAt)!==null&&p!==void 0?p:void 0,{uid:Q,emailVerified:oe,isAnonymous:Ve,providerData:ee,stsTokenManager:E}=t;L(Q&&E,e,"internal-error");let m=xi.fromJSON(this.name,E);L(typeof Q=="string",e,"internal-error"),Zt(g,e.name),Zt(I,e.name),L(typeof oe=="boolean",e,"internal-error"),L(typeof Ve=="boolean",e,"internal-error"),Zt(R,e.name),Zt(D,e.name),Zt(O,e.name),Zt(N,e.name),Zt($,e.name),Zt(K,e.name);let v=new n({uid:Q,auth:e,email:I,emailVerified:oe,displayName:g,isAnonymous:Ve,photoURL:D,phoneNumber:R,tenantId:O,stsTokenManager:m,createdAt:$,lastLoginAt:K});return ee&&Array.isArray(ee)&&(v.providerData=ee.map(w=>Object.assign({},w))),N&&(v._redirectEventId=N),v}static _fromIdTokenResponse(e,t,r=!1){return y(this,null,function*(){let i=new xi;i.updateFromServerResponse(t);let s=new n({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield Ao(s),s})}static _fromGetAccountInfoResponse(e,t,r){return y(this,null,function*(){let i=t.users[0];L(i.localId!==void 0,"internal-error");let s=i.providerUserInfo!==void 0?Rg(i.providerUserInfo):[],a=!(i.email&&i.passwordHash)&&!s?.length,c=new xi;c.updateFromIdToken(r);let u=new n({uid:i.localId,auth:e,stsTokenManager:c,isAnonymous:a}),d={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new Vi(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!s?.length};return Object.assign(u,d),u})}};var ag=new Map;function Ct(n){en(n instanceof Function,"Expected a class definition");let e=ag.get(n);return e?(en(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,ag.set(n,e),e)}var qT=(()=>{class n{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return y(this,null,function*(){return!0})}_set(t,r){return y(this,null,function*(){this.storage[t]=r})}_get(t){return y(this,null,function*(){let r=this.storage[t];return r===void 0?null:r})}_remove(t){return y(this,null,function*(){delete this.storage[t]})}_addListener(t,r){}_removeListener(t,r){}}return n.type="NONE",n})(),el=qT;function vo(n,e,t){return`firebase:${n}:${e}:${t}`}var So=class n{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;let{config:i,name:s}=this.auth;this.fullUserKey=vo(this.userKey,i.apiKey,s),this.fullPersistenceKey=vo("persistence",i.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return y(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);return e?pr._fromJSON(this.auth,e):null})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return y(this,null,function*(){if(this.persistence===e)return;let t=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,r="authUser"){return y(this,null,function*(){if(!t.length)return new n(Ct(el),e,r);let i=(yield Promise.all(t.map(d=>y(this,null,function*(){if(yield d._isAvailable())return d})))).filter(d=>d),s=i[0]||Ct(el),a=vo(r,e.config.apiKey,e.name),c=null;for(let d of t)try{let p=yield d._get(a);if(p){let g=pr._fromJSON(e,p);d!==s&&(c=g),s=d;break}}catch{}let u=i.filter(d=>d._shouldAllowMigration);return!s._shouldAllowMigration||!u.length?new n(s,e,r):(s=u[0],c&&(yield s._set(a,c.toJSON())),yield Promise.all(t.map(d=>y(this,null,function*(){if(d!==s)try{yield d._remove(a)}catch{}}))),new n(s,e,r))})}};function cg(n){let e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Ng(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Cg(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Og(e))return"Blackberry";if(xg(e))return"Webos";if(Pg(e))return"Safari";if((e.includes("chrome/")||Dg(e))&&!e.includes("edge/"))return"Chrome";if(kg(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function Cg(n=we()){return/firefox\//i.test(n)}function Pg(n=we()){let e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Dg(n=we()){return/crios\//i.test(n)}function Ng(n=we()){return/iemobile/i.test(n)}function kg(n=we()){return/android/i.test(n)}function Og(n=we()){return/blackberry/i.test(n)}function xg(n=we()){return/webos/i.test(n)}function Il(n=we()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function zT(n=we()){var e;return Il(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function GT(){return Um()&&document.documentMode===10}function Mg(n=we()){return Il(n)||kg(n)||xg(n)||Og(n)||/windows phone/i.test(n)||Ng(n)}function Vg(n,e=[]){let t;switch(n){case"Browser":t=cg(we());break;case"Worker":t=`${cg(we())}-${n}`;break;default:t=n}let r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Xt}/${r}`}var tl=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let r=s=>new Promise((a,c)=>{try{let u=e(s);a(u)}catch(u){c(u)}});r.onAbort=t,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return y(this,null,function*(){if(this.auth.currentUser===e)return;let t=[];try{for(let r of this.queue)yield r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(let i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function WT(t){return y(this,arguments,function*(n,e={}){return Nt(n,"GET","/v2/passwordPolicy",Dt(n,e))})}var HT=6,nl=class{constructor(e){var t,r,i,s;let a=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=a.minPasswordLength)!==null&&t!==void 0?t:HT,a.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=a.maxPasswordLength),a.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=a.containsLowercaseCharacter),a.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=a.containsUppercaseCharacter),a.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=a.containsNumericCharacter),a.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=a.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,s,a,c;let u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(t=u.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(i=u.containsLowercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(s=u.containsUppercaseLetter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(a=u.containsNumericCharacter)!==null&&a!==void 0?a:!0),u.isValid&&(u.isValid=(c=u.containsNonAlphanumericCharacter)!==null&&c!==void 0?c:!0),u}validatePasswordLengthOptions(e,t){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}};var rl=class{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new bo(this),this.idTokenSubscription=new bo(this),this.beforeStateQueue=new tl(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Eg,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Ct(t)),this._initializationPromise=this.queue(()=>y(this,null,function*(){var r,i;if(!this._deleted&&(this.persistenceManager=yield So.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(t),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return y(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return y(this,null,function*(){try{let t=yield bg(this,{idToken:e}),r=yield pr._fromGetAccountInfoResponse(this,t,e);yield this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return y(this,null,function*(){var t;if(nt(this.app)){let a=this.app.settings.authIdToken;return a?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(c,c))}):this.directlySetCurrentUser(null)}let r=yield this.assertedPersistence.getCurrentUser(),i=r,s=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let a=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,c=i?._redirectEventId,u=yield this.tryRedirectSignIn(e);(!a||a===c)&&u?.user&&(i=u.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{yield this.beforeStateQueue.runMiddleware(i)}catch(a){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return L(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return y(this,null,function*(){let t=null;try{t=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return t})}reloadAndSetCurrentUserOrClear(e){return y(this,null,function*(){try{yield Ao(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=OT()}_delete(){return y(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return y(this,null,function*(){if(nt(this.app))return Promise.reject(Pt(this));let t=e?de(e):null;return t&&L(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))})}_updateCurrentUser(e,t=!1){return y(this,null,function*(){if(!this._deleted)return e&&L(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>y(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return y(this,null,function*(){return nt(this.app)?Promise.reject(Pt(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return nt(this.app)?Promise.reject(Pt(this)):this.queue(()=>y(this,null,function*(){yield this.assertedPersistence.setPersistence(Ct(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return y(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return y(this,null,function*(){let e=yield WT(this),t=new nl(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new At("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},t)}})}revokeAccessToken(e){return y(this,null,function*(){if(this.currentUser){let t=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),yield jT(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,t){return y(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return y(this,null,function*(){if(!this.redirectPersistenceManager){let t=e&&Ct(e)||this._popupRedirectResolver;L(t,this,"argument-error"),this.redirectPersistenceManager=yield So.create(this,[Ct(t._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return y(this,null,function*(){var t,r;return this._isInitialized&&(yield this.queue(()=>y(this,null,function*(){}))),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return y(this,null,function*(){if(e===this.currentUser)return this.queue(()=>y(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};let s=typeof t=="function"?t:t.next.bind(t),a=!1,c=this._isInitialized?Promise.resolve():this._initializationPromise;if(L(c,this,"internal-error"),c.then(()=>{a||s(this.currentUser)}),typeof t=="function"){let u=e.addObserver(t,r,i);return()=>{a=!0,u()}}else{let u=e.addObserver(t);return()=>{a=!0,u()}}}directlySetCurrentUser(e){return y(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return L(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Vg(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return y(this,null,function*(){var e;let t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(t["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t})}_getAppCheckToken(){return y(this,null,function*(){var e;let t=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return t?.error&&DT(`Error while retrieving App Check token: ${t.error}`),t?.token})}};function Dn(n){return de(n)}var bo=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=qm(t=>this.observer=t)}get next(){return L(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var Oo={loadJS(){return y(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function KT(n){Oo=n}function Lg(n){return Oo.loadJS(n)}function QT(){return Oo.recaptchaEnterpriseScript}function JT(){return Oo.gapiScript}function Fg(n){return`__${n}${Math.floor(Math.random()*1e6)}`}var YT="recaptcha-enterprise",XT="NO_RECAPTCHA",il=class{constructor(e){this.type=YT,this.auth=Dn(e)}verify(e="verify",t=!1){return y(this,null,function*(){function r(s){return y(this,null,function*(){if(!t){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise((a,c)=>y(this,null,function*(){LT(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)c(new Error("recaptcha Enterprise site key undefined"));else{let d=new Xu(u);return s.tenantId==null?s._agentRecaptchaConfig=d:s._tenantRecaptchaConfigs[s.tenantId]=d,a(d.siteKey)}}).catch(u=>{c(u)})}))})}function i(s,a,c){let u=window.grecaptcha;sg(u)?u.enterprise.ready(()=>{u.enterprise.execute(s,{action:e}).then(d=>{a(d)}).catch(()=>{a(XT)})}):c(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((s,a)=>{r(this.auth).then(c=>{if(!t&&sg(window.grecaptcha))i(c,s,a);else{if(typeof window>"u"){a(new Error("RecaptchaVerifier is only supported in browser"));return}let u=QT();u.length!==0&&(u+=c),Lg(u).then(()=>{i(c,s,a)}).catch(d=>{a(d)})}}).catch(c=>{a(c)})})})}};function ug(n,e,t,r=!1){return y(this,null,function*(){let i=new il(n),s;try{s=yield i.verify(t)}catch{s=yield i.verify(t,!0)}let a=Object.assign({},e);return r?Object.assign(a,{captchaResp:s}):Object.assign(a,{captchaResponse:s}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a})}function sl(n,e,t,r){return y(this,null,function*(){var i;if(!((i=n._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){let s=yield ug(n,e,t,t==="getOobCode");return r(n,s)}else return r(n,e).catch(s=>y(this,null,function*(){if(s.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);let a=yield ug(n,e,t,t==="getOobCode");return r(n,a)}else return Promise.reject(s)}))})}function wl(n,e){let t=Ni(n,"auth");if(t.isInitialized()){let i=t.getImmediate(),s=t.getOptions();if(En(s,e??{}))return i;ht(i,"already-initialized")}return t.initialize({options:e})}function ZT(n,e){let t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(Ct);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function El(n,e,t){let r=Dn(n);L(r._canInitEmulator,r,"emulator-config-failed"),L(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!t?.disableWarnings,s=Ug(e),{host:a,port:c}=eA(e),u=c===null?"":`:${c}`;r.config.emulator={url:`${s}//${a}${u}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:a,port:c,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||tA()}function Ug(n){let e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function eA(n){let e=Ug(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};let r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let s=i[1];return{host:s,port:lg(r.substr(s.length+1))}}else{let[s,a]=r.split(":");return{host:s,port:lg(a)}}}function lg(n){if(!n)return null;let e=Number(n);return isNaN(e)?null:e}function tA(){function n(){let e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}var Li=class{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Rt("not implemented")}_getIdTokenResponse(e){return Rt("not implemented")}_linkToIdToken(e,t){return Rt("not implemented")}_getReauthenticationResolver(e){return Rt("not implemented")}};function nA(n,e){return y(this,null,function*(){return Nt(n,"POST","/v1/accounts:signUp",e)})}function rA(n,e){return y(this,null,function*(){return $i(n,"POST","/v1/accounts:signInWithPassword",Dt(n,e))})}function iA(n,e){return y(this,null,function*(){return Nt(n,"POST","/v1/accounts:sendOobCode",Dt(n,e))})}function sA(n,e){return y(this,null,function*(){return iA(n,e)})}function oA(n,e){return y(this,null,function*(){return $i(n,"POST","/v1/accounts:signInWithEmailLink",Dt(n,e))})}function aA(n,e){return y(this,null,function*(){return $i(n,"POST","/v1/accounts:signInWithEmailLink",Dt(n,e))})}var Fi=class n extends Li{constructor(e,t,r,i=null){super("password",r),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new n(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new n(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){let t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}_getIdTokenResponse(e){return y(this,null,function*(){switch(this.signInMethod){case"password":let t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return sl(e,t,"signInWithPassword",rA);case"emailLink":return oA(e,{email:this._email,oobCode:this._password});default:ht(e,"internal-error")}})}_linkToIdToken(e,t){return y(this,null,function*(){switch(this.signInMethod){case"password":let r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return sl(e,r,"signUpPassword",nA);case"emailLink":return aA(e,{idToken:t,email:this._email,oobCode:this._password});default:ht(e,"internal-error")}})}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}};function Ku(n,e){return y(this,null,function*(){return $i(n,"POST","/v1/accounts:signInWithIdp",Dt(n,e))})}function cA(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function uA(n){let e=cr(ur(n)).link,t=e?cr(ur(e)).deep_link_id:null,r=cr(ur(n)).deep_link_id;return(r?cr(ur(r)).link:null)||r||t||e||n}var Ro=class n{constructor(e){var t,r,i,s,a,c;let u=cr(ur(e)),d=(t=u.apiKey)!==null&&t!==void 0?t:null,p=(r=u.oobCode)!==null&&r!==void 0?r:null,g=cA((i=u.mode)!==null&&i!==void 0?i:null);L(d&&p&&g,"argument-error"),this.apiKey=d,this.operation=g,this.code=p,this.continueUrl=(s=u.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(a=u.languageCode)!==null&&a!==void 0?a:null,this.tenantId=(c=u.tenantId)!==null&&c!==void 0?c:null}static parseLink(e){let t=uA(e);try{return new n(t)}catch{return null}}};var $g=(()=>{class n{constructor(){this.providerId=n.PROVIDER_ID}static credential(t,r){return Fi._fromEmailAndPassword(t,r)}static credentialWithLink(t,r){let i=Ro.parseLink(r);return L(i,"argument-error"),Fi._fromEmailAndCode(t,i.code,i.tenantId)}}n.PROVIDER_ID="password",n.EMAIL_PASSWORD_SIGN_IN_METHOD="password",n.EMAIL_LINK_SIGN_IN_METHOD="emailLink";return n})(),Co=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var ol=class extends Co{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};function lA(n,e){return y(this,null,function*(){return $i(n,"POST","/v1/accounts:signUp",Dt(n,e))})}var mr=class n{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,t,r,i=!1){return y(this,null,function*(){let s=yield pr._fromIdTokenResponse(e,r,i),a=hg(r);return new n({user:s,providerId:a,_tokenResponse:r,operationType:t})})}static _forOperation(e,t,r){return y(this,null,function*(){yield e._updateTokensIfNecessary(r,!0);let i=hg(r);return new n({user:e,providerId:i,_tokenResponse:r,operationType:t})})}};function hg(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}var al=class n extends Ge{constructor(e,t,r,i){var s;super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,n.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new n(e,t,r,i)}};function Bg(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?al._fromErrorAndOperation(n,s,e,r):s})}function hA(n,e,t=!1){return y(this,null,function*(){let r=yield Mi(n,e._linkToIdToken(n.auth,yield n.getIdToken()),t);return mr._forOperation(n,"link",r)})}function dA(n,e,t=!1){return y(this,null,function*(){let{auth:r}=n;if(nt(r.app))return Promise.reject(Pt(r));let i="reauthenticate";try{let s=yield Mi(n,Bg(r,i,e,n),t);L(s.idToken,r,"internal-error");let a=_l(s.idToken);L(a,r,"internal-error");let{sub:c}=a;return L(n.uid===c,r,"user-mismatch"),mr._forOperation(n,i,s)}catch(s){throw s?.code==="auth/user-not-found"&&ht(r,"user-mismatch"),s}})}function jg(n,e,t=!1){return y(this,null,function*(){if(nt(n.app))return Promise.reject(Pt(n));let r="signIn",i=yield Bg(n,r,e),s=yield mr._fromIdTokenResponse(n,r,i);return t||(yield n._updateCurrentUser(s.user)),s})}function Tl(n,e){return y(this,null,function*(){return jg(Dn(n),e)})}function fA(n,e,t){var r;L(((r=t.url)===null||r===void 0?void 0:r.length)>0,n,"invalid-continue-uri"),L(typeof t.dynamicLinkDomain>"u"||t.dynamicLinkDomain.length>0,n,"invalid-dynamic-link-domain"),e.continueUrl=t.url,e.dynamicLinkDomain=t.dynamicLinkDomain,e.canHandleCodeInApp=t.handleCodeInApp,t.iOS&&(L(t.iOS.bundleId.length>0,n,"missing-ios-bundle-id"),e.iOSBundleId=t.iOS.bundleId),t.android&&(L(t.android.packageName.length>0,n,"missing-android-pkg-name"),e.androidInstallApp=t.android.installApp,e.androidMinimumVersionCode=t.android.minimumVersion,e.androidPackageName=t.android.packageName)}function qg(n){return y(this,null,function*(){let e=Dn(n);e._getPasswordPolicyInternal()&&(yield e._updatePasswordPolicy())})}function Al(n,e,t){return y(this,null,function*(){if(nt(n.app))return Promise.reject(Pt(n));let r=Dn(n),a=yield sl(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",lA).catch(u=>{throw u.code==="auth/password-does-not-meet-requirements"&&qg(n),u}),c=yield mr._fromIdTokenResponse(r,"signIn",a);return yield r._updateCurrentUser(c.user),c})}function Sl(n,e,t){return nt(n.app)?Promise.reject(Pt(n)):Tl(de(n),$g.credential(e,t)).catch(r=>y(this,null,function*(){throw r.code==="auth/password-does-not-meet-requirements"&&qg(n),r}))}function bl(n,e){return y(this,null,function*(){let t=de(n),i={requestType:"VERIFY_EMAIL",idToken:yield n.getIdToken()};e&&fA(t.auth,i,e);let{email:s}=yield sA(t.auth,i);s!==n.email&&(yield n.reload())})}function xo(n,e,t,r){return de(n).onIdTokenChanged(e,t,r)}function Rl(n,e,t){return de(n).beforeAuthStateChanged(e,t)}function Mo(n,e,t,r){return de(n).onAuthStateChanged(e,t,r)}function Cl(n){return de(n).signOut()}var Po="__sak";var Do=class{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Po,"1"),this.storage.removeItem(Po),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){let t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var pA=1e3,mA=10,gA=(()=>{class n extends Do{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,r)=>this.onStorageEvent(t,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Mg(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),s=this.localCache[r];i!==s&&t(r,s,i)}}onStorageEvent(t,r=!1){if(!t.key){this.forAllChangedKeys((c,u,d)=>{this.notifyListeners(c,d)});return}let i=t.key;r?this.detachListener():this.stopPolling();let s=()=>{let c=this.storage.getItem(i);!r&&this.localCache[i]===c||this.notifyListeners(i,c)},a=this.storage.getItem(i);GT()&&a!==t.newValue&&t.newValue!==t.oldValue?setTimeout(s,mA):s()}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let s of Array.from(i))s(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:r,newValue:i}),!0)})},pA)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(t,r){return y(this,null,function*(){yield Bt(n.prototype,this,"_set").call(this,t,r),this.localCache[t]=JSON.stringify(r)})}_get(t){return y(this,null,function*(){let r=yield Bt(n.prototype,this,"_get").call(this,t);return this.localCache[t]=JSON.stringify(r),r})}_remove(t){return y(this,null,function*(){yield Bt(n.prototype,this,"_remove").call(this,t),delete this.localCache[t]})}}return n.type="LOCAL",n})(),zg=gA;var yA=(()=>{class n extends Do{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,r){}_removeListener(t,r){}}return n.type="SESSION",n})(),Pl=yA;function _A(n){return Promise.all(n.map(e=>y(this,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(t){return{fulfilled:!1,reason:t}}})))}var vA=(()=>{class n{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){let r=this.receivers.find(s=>s.isListeningto(t));if(r)return r;let i=new n(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}handleEvent(t){return y(this,null,function*(){let r=t,{eventId:i,eventType:s,data:a}=r.data,c=this.handlersMap[s];if(!c?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:s});let u=Array.from(c).map(p=>y(this,null,function*(){return p(r.origin,a)})),d=yield _A(u);r.ports[0].postMessage({status:"done",eventId:i,eventType:s,response:d})})}_subscribe(t,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(r)}_unsubscribe(t,r){this.handlersMap[t]&&r&&this.handlersMap[t].delete(r),(!r||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}n.receivers=[];return n})();function Gg(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}var cl=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,t,r=50){return y(this,null,function*(){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,a;return new Promise((c,u)=>{let d=Gg("",20);i.port1.start();let p=setTimeout(()=>{u(new Error("unsupported_event"))},r);a={messageChannel:i,onMessage(g){let I=g;if(I.data.eventId===d)switch(I.data.status){case"ack":clearTimeout(p),s=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),c(I.data.response);break;default:clearTimeout(p),clearTimeout(s),u(new Error("invalid_response"));break}}},this.handlers.add(a),i.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:d,data:t},[i.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})})}};function lt(){return window}function IA(n){lt().location.href=n}function Wg(){return typeof lt().WorkerGlobalScope<"u"&&typeof lt().importScripts=="function"}function wA(){return y(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function EA(){var n;return((n=navigator?.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function TA(){return Wg()?self:null}var Hg="firebaseLocalStorageDb",AA=1,No="firebaseLocalStorage",Kg="fbase_key",Pn=class{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}};function Vo(n,e){return n.transaction([No],e?"readwrite":"readonly").objectStore(No)}function SA(){let n=indexedDB.deleteDatabase(Hg);return new Pn(n).toPromise()}function ul(){let n=indexedDB.open(Hg,AA);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{let r=n.result;try{r.createObjectStore(No,{keyPath:Kg})}catch(i){t(i)}}),n.addEventListener("success",()=>y(this,null,function*(){let r=n.result;r.objectStoreNames.contains(No)?e(r):(r.close(),yield SA(),e(yield ul()))}))})}function dg(n,e,t){return y(this,null,function*(){let r=Vo(n,!0).put({[Kg]:e,value:t});return new Pn(r).toPromise()})}function bA(n,e){return y(this,null,function*(){let t=Vo(n,!1).get(e),r=yield new Pn(t).toPromise();return r===void 0?null:r.value})}function fg(n,e){let t=Vo(n,!0).delete(e);return new Pn(t).toPromise()}var RA=800,CA=3,PA=(()=>{class n{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return y(this,null,function*(){return this.db?this.db:(this.db=yield ul(),this.db)})}_withRetries(t){return y(this,null,function*(){let r=0;for(;;)try{let i=yield this._openDb();return yield t(i)}catch(i){if(r++>CA)throw i;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return y(this,null,function*(){return Wg()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return y(this,null,function*(){this.receiver=vA._getInstance(TA()),this.receiver._subscribe("keyChanged",(t,r)=>y(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(r.key)}})),this.receiver._subscribe("ping",(t,r)=>y(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return y(this,null,function*(){var t,r;if(this.activeServiceWorker=yield wA(),!this.activeServiceWorker)return;this.sender=new cl(this.activeServiceWorker);let i=yield this.sender._send("ping",{},800);i&&!((t=i[0])===null||t===void 0)&&t.fulfilled&&!((r=i[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(t){return y(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||EA()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return y(this,null,function*(){try{if(!indexedDB)return!1;let t=yield ul();return yield dg(t,Po,"1"),yield fg(t,Po),!0}catch{}return!1})}_withPendingWrite(t){return y(this,null,function*(){this.pendingWrites++;try{yield t()}finally{this.pendingWrites--}})}_set(t,r){return y(this,null,function*(){return this._withPendingWrite(()=>y(this,null,function*(){return yield this._withRetries(i=>dg(i,t,r)),this.localCache[t]=r,this.notifyServiceWorker(t)}))})}_get(t){return y(this,null,function*(){let r=yield this._withRetries(i=>bA(i,t));return this.localCache[t]=r,r})}_remove(t){return y(this,null,function*(){return this._withPendingWrite(()=>y(this,null,function*(){return yield this._withRetries(r=>fg(r,t)),delete this.localCache[t],this.notifyServiceWorker(t)}))})}_poll(){return y(this,null,function*(){let t=yield this._withRetries(s=>{let a=Vo(s,!1).getAll();return new Pn(a).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(t.length!==0)for(let{fbase_key:s,value:a}of t)i.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(a)&&(this.notifyListeners(s,a),r.push(s));for(let s of Object.keys(this.localCache))this.localCache[s]&&!i.has(s)&&(this.notifyListeners(s,null),r.push(s));return r})}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let s of Array.from(i))s(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>y(this,null,function*(){return this._poll()}),RA)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return n.type="LOCAL",n})(),Qg=PA;var sP=Fg("rcb"),oP=new Cn(3e4,6e4);function DA(n,e){return e?Ct(e):(L(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}var Ui=class extends Li{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ku(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Ku(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Ku(e,this._buildIdpRequest())}_buildIdpRequest(e){let t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}};function NA(n){return jg(n.auth,new Ui(n),n.bypassAuthState)}function kA(n){let{auth:e,user:t}=n;return L(t,e,"internal-error"),dA(t,new Ui(n),n.bypassAuthState)}function OA(n){return y(this,null,function*(){let{auth:e,user:t}=n;return L(t,e,"internal-error"),hA(t,new Ui(n),n.bypassAuthState)})}var ll=class{constructor(e,t,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((e,t)=>y(this,null,function*(){this.pendingPromise={resolve:e,reject:t};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}}))}onAuthEvent(e){return y(this,null,function*(){let{urlResponse:t,sessionId:r,postBody:i,tenantId:s,error:a,type:c}=e;if(a){this.reject(a);return}let u={auth:this.auth,requestUri:t,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(c)(u))}catch(d){this.reject(d)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return NA;case"linkViaPopup":case"linkViaRedirect":return OA;case"reauthViaPopup":case"reauthViaRedirect":return kA;default:ht(this.auth,"internal-error")}}resolve(e){en(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){en(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var aP=new Cn(2e3,1e4);var xA="pendingRedirect",Io=new Map,hl=class n extends ll{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}execute(){return y(this,null,function*(){let e=Io.get(this.auth._key());if(!e){try{let r=(yield MA(this.resolver,this.auth))?yield Bt(n.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}Io.set(this.auth._key(),e)}return this.bypassAuthState||Io.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return y(this,null,function*(){if(e.type==="signInViaRedirect")return Bt(n.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let t=yield this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,Bt(n.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return y(this,null,function*(){})}cleanUp(){}};function MA(n,e){return y(this,null,function*(){let t=FA(e),r=LA(n);if(!(yield r._isAvailable()))return!1;let i=(yield r._get(t))==="true";return yield r._remove(t),i})}function VA(n,e){Io.set(n._key(),e)}function LA(n){return Ct(n._redirectPersistence)}function FA(n){return vo(xA,n.config.apiKey,n.name)}function UA(n,e,t=!1){return y(this,null,function*(){if(nt(n.app))return Promise.reject(Pt(n));let r=Dn(n),i=DA(r,e),a=yield new hl(r,i,t).execute();return a&&!t&&(delete a.user._redirectEventId,yield r._persistUserIfCurrent(a.user),yield r._setRedirectUser(null,e)),a})}var $A=10*60*1e3,dl=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!BA(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!Jg(e)){let i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(Rn(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){let r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=$A&&this.cachedEventUids.clear(),this.cachedEventUids.has(pg(e))}saveEventToCache(e){this.cachedEventUids.add(pg(e)),this.lastProcessedEventTime=Date.now()}};function pg(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function Jg({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function BA(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Jg(n);default:return!1}}function jA(t){return y(this,arguments,function*(n,e={}){return Nt(n,"GET","/v1/projects",e)})}var qA=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,zA=/^https?/;function GA(n){return y(this,null,function*(){if(n.config.emulator)return;let{authorizedDomains:e}=yield jA(n);for(let t of e)try{if(WA(t))return}catch{}ht(n,"unauthorized-domain")})}function WA(n){let e=Ju(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){let a=new URL(n);return a.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&a.hostname===r}if(!zA.test(t))return!1;if(qA.test(n))return r===n;let i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var HA=new Cn(3e4,6e4);function mg(){let n=lt().___jsl;if(n?.H){for(let e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function KA(n){return new Promise((e,t)=>{var r,i,s;function a(){mg(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{mg(),t(Rn(n,"network-request-failed"))},timeout:HA.get()})}if(!((i=(r=lt().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=lt().gapi)===null||s===void 0)&&s.load)a();else{let c=Fg("iframefcb");return lt()[c]=()=>{gapi.load?a():t(Rn(n,"network-request-failed"))},Lg(`${JT()}?onload=${c}`).catch(u=>t(u))}}).catch(e=>{throw wo=null,e})}var wo=null;function QA(n){return wo=wo||KA(n),wo}var JA=new Cn(5e3,15e3),YA="__/auth/iframe",XA="emulator/auth/iframe",ZA={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},eS=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function tS(n){let e=n.config;L(e.authDomain,n,"auth-domain-config-required");let t=e.emulator?gl(e,XA):`https://${n.config.authDomain}/${YA}`,r={apiKey:e.apiKey,appName:n.name,v:Xt},i=eS.get(n.config.apiHost);i&&(r.eid=i);let s=n._getFrameworks();return s.length&&(r.fw=s.join(",")),`${t}?${Ci(r).slice(1)}`}function nS(n){return y(this,null,function*(){let e=yield QA(n),t=lt().gapi;return L(t,n,"internal-error"),e.open({where:document.body,url:tS(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:ZA,dontclear:!0},r=>new Promise((i,s)=>y(this,null,function*(){yield r.restyle({setHideOnLeave:!1});let a=Rn(n,"network-request-failed"),c=lt().setTimeout(()=>{s(a)},JA.get());function u(){lt().clearTimeout(c),i(r)}r.ping(u).then(u,()=>{s(a)})})))})}var rS={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},iS=500,sS=600,oS="_blank",aS="http://localhost",ko=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function cS(n,e,t,r=iS,i=sS){let s=Math.max((window.screen.availHeight-i)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString(),c="",u=Object.assign(Object.assign({},rS),{width:r.toString(),height:i.toString(),top:s,left:a}),d=we().toLowerCase();t&&(c=Dg(d)?oS:t),Cg(d)&&(e=e||aS,u.scrollbars="yes");let p=Object.entries(u).reduce((I,[R,D])=>`${I}${R}=${D},`,"");if(zT(d)&&c!=="_self")return uS(e||"",c),new ko(null);let g=window.open(e||"",c,p);L(g,n,"popup-blocked");try{g.focus()}catch{}return new ko(g)}function uS(n,e){let t=document.createElement("a");t.href=n,t.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}var lS="__/auth/handler",hS="emulator/auth/handler",dS=encodeURIComponent("fac");function gg(n,e,t,r,i,s){return y(this,null,function*(){L(n.config.authDomain,n,"auth-domain-config-required"),L(n.config.apiKey,n,"invalid-api-key");let a={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:Xt,eventId:i};if(e instanceof Co){e.setDefaultLanguage(n.languageCode),a.providerId=e.providerId||"",jm(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(let[p,g]of Object.entries(s||{}))a[p]=g}if(e instanceof ol){let p=e.getScopes().filter(g=>g!=="");p.length>0&&(a.scopes=p.join(","))}n.tenantId&&(a.tid=n.tenantId);let c=a;for(let p of Object.keys(c))c[p]===void 0&&delete c[p];let u=yield n._getAppCheckToken(),d=u?`#${dS}=${encodeURIComponent(u)}`:"";return`${fS(n)}?${Ci(c).slice(1)}${d}`})}function fS({config:n}){return n.emulator?gl(n,hS):`https://${n.authDomain}/${lS}`}var Qu="webStorageSupport",fl=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Pl,this._completeRedirectFn=UA,this._overrideRedirectResult=VA}_openPopup(e,t,r,i){return y(this,null,function*(){var s;en((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");let a=yield gg(e,t,r,Ju(),i);return cS(e,a,Gg())})}_openRedirect(e,t,r,i){return y(this,null,function*(){yield this._originValidation(e);let s=yield gg(e,t,r,Ju(),i);return IA(s),new Promise(()=>{})})}_initialize(e){let t=e._key();if(this.eventManagers[t]){let{manager:i,promise:s}=this.eventManagers[t];return i?Promise.resolve(i):(en(s,"If manager is not set, promise should be"),s)}let r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}initAndGetManager(e){return y(this,null,function*(){let t=yield nS(e),r=new dl(e);return t.register("authEvent",i=>(L(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r})}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Qu,{type:Qu},i=>{var s;let a=(s=i?.[0])===null||s===void 0?void 0:s[Qu];a!==void 0&&t(!!a),ht(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=GA(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Mg()||Pg()||Il()}},Yg=fl;var yg="@firebase/auth",_g="1.7.9";var pl=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return y(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){L(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function pS(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function mS(n){Yt(new Ye("auth",(e,{options:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:a,authDomain:c}=r.options;L(a&&!a.includes(":"),"invalid-api-key",{appName:r.name});let u={apiKey:a,authDomain:c,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Vg(n)},d=new rl(r,i,s,u);return ZT(d,t),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Yt(new Ye("auth-internal",e=>{let t=Dn(e.getProvider("auth").getImmediate());return(r=>new pl(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),_e(yg,_g,pS(n)),_e(yg,_g,"esm2017")}var gS=5*60,yS=Cu("authIdTokenMaxAge")||gS,vg=null,_S=n=>e=>y(void 0,null,function*(){let t=e&&(yield e.getIdTokenResult()),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>yS)return;let i=t?.token;vg!==i&&(vg=i,yield fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))});function Dl(n=lr()){let e=Ni(n,"auth");if(e.isInitialized())return e.getImmediate();let t=wl(n,{popupRedirectResolver:Yg,persistence:[Qg,zg,Pl]}),r=Cu("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let s=new URL(r,location.origin);if(location.origin===s.origin){let a=_S(s.toString());Rl(t,a,()=>a(t.currentUser)),xo(t,c=>a(c))}}let i=bu("auth");return i&&El(t,`http://${i}`),t}function vS(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}KT({loadJS(n){return new Promise((e,t)=>{let r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{let s=Rn("internal-error");s.customData=i,t(s)},r.type="text/javascript",r.charset="UTF-8",vS().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});mS("Browser");function Zg(n){return new fn(function(e){var t=Mo(n,e.next.bind(e),e.error.bind(e),e.complete.bind(e));return{unsubscribe:t}})}var ey="auth",Bi=class{constructor(e){return e}},ji=class{constructor(){return ki(ey)}};var Nl=new Ie("angularfire2.auth-instances");function ob(n,e){let t=mo(ey,n,e);return t&&new Bi(t)}function ab(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new Bi(r)}}var cb={provide:ji,deps:[[new $e,Nl]]},ub={provide:Bi,useFactory:ob,deps:[[new $e,Nl],bt]};function JP(n,...e){return _e("angularfire",Sn.full,"auth"),Et([ub,cb,{provide:Nl,useFactory:ab(n),multi:!0,deps:[Se,Gt,fr,bn,[new $e,dr],...e]}])}var YP=le(Zg,!0);var XP=le(Al,!0);var ZP=le(Dl,!0);var eD=le(bl,!0);var tD=le(Sl,!0);var nD=le(Cl,!0);var ty=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ny={};var tn,kl;(function(){var n;function e(E,m){function v(){}v.prototype=m.prototype,E.D=m.prototype,E.prototype=new v,E.prototype.constructor=E,E.C=function(w,T,S){for(var _=Array(arguments.length-2),vt=2;vt<arguments.length;vt++)_[vt-2]=arguments[vt];return m.prototype[T].apply(w,_)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(E,m,v){v||(v=0);var w=Array(16);if(typeof m=="string")for(var T=0;16>T;++T)w[T]=m.charCodeAt(v++)|m.charCodeAt(v++)<<8|m.charCodeAt(v++)<<16|m.charCodeAt(v++)<<24;else for(T=0;16>T;++T)w[T]=m[v++]|m[v++]<<8|m[v++]<<16|m[v++]<<24;m=E.g[0],v=E.g[1],T=E.g[2];var S=E.g[3],_=m+(S^v&(T^S))+w[0]+3614090360&4294967295;m=v+(_<<7&4294967295|_>>>25),_=S+(T^m&(v^T))+w[1]+3905402710&4294967295,S=m+(_<<12&4294967295|_>>>20),_=T+(v^S&(m^v))+w[2]+606105819&4294967295,T=S+(_<<17&4294967295|_>>>15),_=v+(m^T&(S^m))+w[3]+3250441966&4294967295,v=T+(_<<22&4294967295|_>>>10),_=m+(S^v&(T^S))+w[4]+4118548399&4294967295,m=v+(_<<7&4294967295|_>>>25),_=S+(T^m&(v^T))+w[5]+1200080426&4294967295,S=m+(_<<12&4294967295|_>>>20),_=T+(v^S&(m^v))+w[6]+2821735955&4294967295,T=S+(_<<17&4294967295|_>>>15),_=v+(m^T&(S^m))+w[7]+4249261313&4294967295,v=T+(_<<22&4294967295|_>>>10),_=m+(S^v&(T^S))+w[8]+1770035416&4294967295,m=v+(_<<7&4294967295|_>>>25),_=S+(T^m&(v^T))+w[9]+2336552879&4294967295,S=m+(_<<12&4294967295|_>>>20),_=T+(v^S&(m^v))+w[10]+4294925233&4294967295,T=S+(_<<17&4294967295|_>>>15),_=v+(m^T&(S^m))+w[11]+2304563134&4294967295,v=T+(_<<22&4294967295|_>>>10),_=m+(S^v&(T^S))+w[12]+1804603682&4294967295,m=v+(_<<7&4294967295|_>>>25),_=S+(T^m&(v^T))+w[13]+4254626195&4294967295,S=m+(_<<12&4294967295|_>>>20),_=T+(v^S&(m^v))+w[14]+2792965006&4294967295,T=S+(_<<17&4294967295|_>>>15),_=v+(m^T&(S^m))+w[15]+1236535329&4294967295,v=T+(_<<22&4294967295|_>>>10),_=m+(T^S&(v^T))+w[1]+4129170786&4294967295,m=v+(_<<5&4294967295|_>>>27),_=S+(v^T&(m^v))+w[6]+3225465664&4294967295,S=m+(_<<9&4294967295|_>>>23),_=T+(m^v&(S^m))+w[11]+643717713&4294967295,T=S+(_<<14&4294967295|_>>>18),_=v+(S^m&(T^S))+w[0]+3921069994&4294967295,v=T+(_<<20&4294967295|_>>>12),_=m+(T^S&(v^T))+w[5]+3593408605&4294967295,m=v+(_<<5&4294967295|_>>>27),_=S+(v^T&(m^v))+w[10]+38016083&4294967295,S=m+(_<<9&4294967295|_>>>23),_=T+(m^v&(S^m))+w[15]+3634488961&4294967295,T=S+(_<<14&4294967295|_>>>18),_=v+(S^m&(T^S))+w[4]+3889429448&4294967295,v=T+(_<<20&4294967295|_>>>12),_=m+(T^S&(v^T))+w[9]+568446438&4294967295,m=v+(_<<5&4294967295|_>>>27),_=S+(v^T&(m^v))+w[14]+3275163606&4294967295,S=m+(_<<9&4294967295|_>>>23),_=T+(m^v&(S^m))+w[3]+4107603335&4294967295,T=S+(_<<14&4294967295|_>>>18),_=v+(S^m&(T^S))+w[8]+1163531501&4294967295,v=T+(_<<20&4294967295|_>>>12),_=m+(T^S&(v^T))+w[13]+2850285829&4294967295,m=v+(_<<5&4294967295|_>>>27),_=S+(v^T&(m^v))+w[2]+4243563512&4294967295,S=m+(_<<9&4294967295|_>>>23),_=T+(m^v&(S^m))+w[7]+1735328473&4294967295,T=S+(_<<14&4294967295|_>>>18),_=v+(S^m&(T^S))+w[12]+2368359562&4294967295,v=T+(_<<20&4294967295|_>>>12),_=m+(v^T^S)+w[5]+4294588738&4294967295,m=v+(_<<4&4294967295|_>>>28),_=S+(m^v^T)+w[8]+2272392833&4294967295,S=m+(_<<11&4294967295|_>>>21),_=T+(S^m^v)+w[11]+1839030562&4294967295,T=S+(_<<16&4294967295|_>>>16),_=v+(T^S^m)+w[14]+4259657740&4294967295,v=T+(_<<23&4294967295|_>>>9),_=m+(v^T^S)+w[1]+2763975236&4294967295,m=v+(_<<4&4294967295|_>>>28),_=S+(m^v^T)+w[4]+1272893353&4294967295,S=m+(_<<11&4294967295|_>>>21),_=T+(S^m^v)+w[7]+4139469664&4294967295,T=S+(_<<16&4294967295|_>>>16),_=v+(T^S^m)+w[10]+3200236656&4294967295,v=T+(_<<23&4294967295|_>>>9),_=m+(v^T^S)+w[13]+681279174&4294967295,m=v+(_<<4&4294967295|_>>>28),_=S+(m^v^T)+w[0]+3936430074&4294967295,S=m+(_<<11&4294967295|_>>>21),_=T+(S^m^v)+w[3]+3572445317&4294967295,T=S+(_<<16&4294967295|_>>>16),_=v+(T^S^m)+w[6]+76029189&4294967295,v=T+(_<<23&4294967295|_>>>9),_=m+(v^T^S)+w[9]+3654602809&4294967295,m=v+(_<<4&4294967295|_>>>28),_=S+(m^v^T)+w[12]+3873151461&4294967295,S=m+(_<<11&4294967295|_>>>21),_=T+(S^m^v)+w[15]+530742520&4294967295,T=S+(_<<16&4294967295|_>>>16),_=v+(T^S^m)+w[2]+3299628645&4294967295,v=T+(_<<23&4294967295|_>>>9),_=m+(T^(v|~S))+w[0]+4096336452&4294967295,m=v+(_<<6&4294967295|_>>>26),_=S+(v^(m|~T))+w[7]+1126891415&4294967295,S=m+(_<<10&4294967295|_>>>22),_=T+(m^(S|~v))+w[14]+2878612391&4294967295,T=S+(_<<15&4294967295|_>>>17),_=v+(S^(T|~m))+w[5]+4237533241&4294967295,v=T+(_<<21&4294967295|_>>>11),_=m+(T^(v|~S))+w[12]+1700485571&4294967295,m=v+(_<<6&4294967295|_>>>26),_=S+(v^(m|~T))+w[3]+2399980690&4294967295,S=m+(_<<10&4294967295|_>>>22),_=T+(m^(S|~v))+w[10]+4293915773&4294967295,T=S+(_<<15&4294967295|_>>>17),_=v+(S^(T|~m))+w[1]+2240044497&4294967295,v=T+(_<<21&4294967295|_>>>11),_=m+(T^(v|~S))+w[8]+1873313359&4294967295,m=v+(_<<6&4294967295|_>>>26),_=S+(v^(m|~T))+w[15]+4264355552&4294967295,S=m+(_<<10&4294967295|_>>>22),_=T+(m^(S|~v))+w[6]+2734768916&4294967295,T=S+(_<<15&4294967295|_>>>17),_=v+(S^(T|~m))+w[13]+1309151649&4294967295,v=T+(_<<21&4294967295|_>>>11),_=m+(T^(v|~S))+w[4]+4149444226&4294967295,m=v+(_<<6&4294967295|_>>>26),_=S+(v^(m|~T))+w[11]+3174756917&4294967295,S=m+(_<<10&4294967295|_>>>22),_=T+(m^(S|~v))+w[2]+718787259&4294967295,T=S+(_<<15&4294967295|_>>>17),_=v+(S^(T|~m))+w[9]+3951481745&4294967295,E.g[0]=E.g[0]+m&4294967295,E.g[1]=E.g[1]+(T+(_<<21&4294967295|_>>>11))&4294967295,E.g[2]=E.g[2]+T&4294967295,E.g[3]=E.g[3]+S&4294967295}r.prototype.u=function(E,m){m===void 0&&(m=E.length);for(var v=m-this.blockSize,w=this.B,T=this.h,S=0;S<m;){if(T==0)for(;S<=v;)i(this,E,S),S+=this.blockSize;if(typeof E=="string"){for(;S<m;)if(w[T++]=E.charCodeAt(S++),T==this.blockSize){i(this,w),T=0;break}}else for(;S<m;)if(w[T++]=E[S++],T==this.blockSize){i(this,w),T=0;break}}this.h=T,this.o+=m},r.prototype.v=function(){var E=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);E[0]=128;for(var m=1;m<E.length-8;++m)E[m]=0;var v=8*this.o;for(m=E.length-8;m<E.length;++m)E[m]=v&255,v/=256;for(this.u(E),E=Array(16),m=v=0;4>m;++m)for(var w=0;32>w;w+=8)E[v++]=this.g[m]>>>w&255;return E};function s(E,m){var v=c;return Object.prototype.hasOwnProperty.call(v,E)?v[E]:v[E]=m(E)}function a(E,m){this.h=m;for(var v=[],w=!0,T=E.length-1;0<=T;T--){var S=E[T]|0;w&&S==m||(v[T]=S,w=!1)}this.g=v}var c={};function u(E){return-128<=E&&128>E?s(E,function(m){return new a([m|0],0>m?-1:0)}):new a([E|0],0>E?-1:0)}function d(E){if(isNaN(E)||!isFinite(E))return g;if(0>E)return N(d(-E));for(var m=[],v=1,w=0;E>=v;w++)m[w]=E/v|0,v*=4294967296;return new a(m,0)}function p(E,m){if(E.length==0)throw Error("number format error: empty string");if(m=m||10,2>m||36<m)throw Error("radix out of range: "+m);if(E.charAt(0)=="-")return N(p(E.substring(1),m));if(0<=E.indexOf("-"))throw Error('number format error: interior "-" character');for(var v=d(Math.pow(m,8)),w=g,T=0;T<E.length;T+=8){var S=Math.min(8,E.length-T),_=parseInt(E.substring(T,T+S),m);8>S?(S=d(Math.pow(m,S)),w=w.j(S).add(d(_))):(w=w.j(v),w=w.add(d(_)))}return w}var g=u(0),I=u(1),R=u(16777216);n=a.prototype,n.m=function(){if(O(this))return-N(this).m();for(var E=0,m=1,v=0;v<this.g.length;v++){var w=this.i(v);E+=(0<=w?w:4294967296+w)*m,m*=4294967296}return E},n.toString=function(E){if(E=E||10,2>E||36<E)throw Error("radix out of range: "+E);if(D(this))return"0";if(O(this))return"-"+N(this).toString(E);for(var m=d(Math.pow(E,6)),v=this,w="";;){var T=oe(v,m).g;v=$(v,T.j(m));var S=((0<v.g.length?v.g[0]:v.h)>>>0).toString(E);if(v=T,D(v))return S+w;for(;6>S.length;)S="0"+S;w=S+w}},n.i=function(E){return 0>E?0:E<this.g.length?this.g[E]:this.h};function D(E){if(E.h!=0)return!1;for(var m=0;m<E.g.length;m++)if(E.g[m]!=0)return!1;return!0}function O(E){return E.h==-1}n.l=function(E){return E=$(this,E),O(E)?-1:D(E)?0:1};function N(E){for(var m=E.g.length,v=[],w=0;w<m;w++)v[w]=~E.g[w];return new a(v,~E.h).add(I)}n.abs=function(){return O(this)?N(this):this},n.add=function(E){for(var m=Math.max(this.g.length,E.g.length),v=[],w=0,T=0;T<=m;T++){var S=w+(this.i(T)&65535)+(E.i(T)&65535),_=(S>>>16)+(this.i(T)>>>16)+(E.i(T)>>>16);w=_>>>16,S&=65535,_&=65535,v[T]=_<<16|S}return new a(v,v[v.length-1]&-2147483648?-1:0)};function $(E,m){return E.add(N(m))}n.j=function(E){if(D(this)||D(E))return g;if(O(this))return O(E)?N(this).j(N(E)):N(N(this).j(E));if(O(E))return N(this.j(N(E)));if(0>this.l(R)&&0>E.l(R))return d(this.m()*E.m());for(var m=this.g.length+E.g.length,v=[],w=0;w<2*m;w++)v[w]=0;for(w=0;w<this.g.length;w++)for(var T=0;T<E.g.length;T++){var S=this.i(w)>>>16,_=this.i(w)&65535,vt=E.i(T)>>>16,Fr=E.i(T)&65535;v[2*w+2*T]+=_*Fr,K(v,2*w+2*T),v[2*w+2*T+1]+=S*Fr,K(v,2*w+2*T+1),v[2*w+2*T+1]+=_*vt,K(v,2*w+2*T+1),v[2*w+2*T+2]+=S*vt,K(v,2*w+2*T+2)}for(w=0;w<m;w++)v[w]=v[2*w+1]<<16|v[2*w];for(w=m;w<2*m;w++)v[w]=0;return new a(v,0)};function K(E,m){for(;(E[m]&65535)!=E[m];)E[m+1]+=E[m]>>>16,E[m]&=65535,m++}function Q(E,m){this.g=E,this.h=m}function oe(E,m){if(D(m))throw Error("division by zero");if(D(E))return new Q(g,g);if(O(E))return m=oe(N(E),m),new Q(N(m.g),N(m.h));if(O(m))return m=oe(E,N(m)),new Q(N(m.g),m.h);if(30<E.g.length){if(O(E)||O(m))throw Error("slowDivide_ only works with positive integers.");for(var v=I,w=m;0>=w.l(E);)v=Ve(v),w=Ve(w);var T=ee(v,1),S=ee(w,1);for(w=ee(w,2),v=ee(v,2);!D(w);){var _=S.add(w);0>=_.l(E)&&(T=T.add(v),S=_),w=ee(w,1),v=ee(v,1)}return m=$(E,T.j(m)),new Q(T,m)}for(T=g;0<=E.l(m);){for(v=Math.max(1,Math.floor(E.m()/m.m())),w=Math.ceil(Math.log(v)/Math.LN2),w=48>=w?1:Math.pow(2,w-48),S=d(v),_=S.j(m);O(_)||0<_.l(E);)v-=w,S=d(v),_=S.j(m);D(S)&&(S=I),T=T.add(S),E=$(E,_)}return new Q(T,E)}n.A=function(E){return oe(this,E).h},n.and=function(E){for(var m=Math.max(this.g.length,E.g.length),v=[],w=0;w<m;w++)v[w]=this.i(w)&E.i(w);return new a(v,this.h&E.h)},n.or=function(E){for(var m=Math.max(this.g.length,E.g.length),v=[],w=0;w<m;w++)v[w]=this.i(w)|E.i(w);return new a(v,this.h|E.h)},n.xor=function(E){for(var m=Math.max(this.g.length,E.g.length),v=[],w=0;w<m;w++)v[w]=this.i(w)^E.i(w);return new a(v,this.h^E.h)};function Ve(E){for(var m=E.g.length+1,v=[],w=0;w<m;w++)v[w]=E.i(w)<<1|E.i(w-1)>>>31;return new a(v,E.h)}function ee(E,m){var v=m>>5;m%=32;for(var w=E.g.length-v,T=[],S=0;S<w;S++)T[S]=0<m?E.i(S+v)>>>m|E.i(S+v+1)<<32-m:E.i(S+v);return new a(T,E.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,kl=ny.Md5=r,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=d,a.fromString=p,tn=ny.Integer=a}).apply(typeof ty<"u"?ty:typeof self<"u"?self:typeof window<"u"?window:{});var Lo=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},kt={};var Ol,lb,gr,xl,qi,Fo,Ml,Vl,Ll;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(o,l,h){return o==Array.prototype||o==Object.prototype||(o[l]=h.value),o};function t(o){o=[typeof globalThis=="object"&&globalThis,o,typeof window=="object"&&window,typeof self=="object"&&self,typeof Lo=="object"&&Lo];for(var l=0;l<o.length;++l){var h=o[l];if(h&&h.Math==Math)return h}throw Error("Cannot find global object")}var r=t(this);function i(o,l){if(l)e:{var h=r;o=o.split(".");for(var f=0;f<o.length-1;f++){var A=o[f];if(!(A in h))break e;h=h[A]}o=o[o.length-1],f=h[o],l=l(f),l!=f&&l!=null&&e(h,o,{configurable:!0,writable:!0,value:l})}}function s(o,l){o instanceof String&&(o+="");var h=0,f=!1,A={next:function(){if(!f&&h<o.length){var b=h++;return{value:l(b,o[b]),done:!1}}return f=!0,{done:!0,value:void 0}}};return A[Symbol.iterator]=function(){return A},A}i("Array.prototype.values",function(o){return o||function(){return s(this,function(l,h){return h})}});var a=a||{},c=this||self;function u(o){var l=typeof o;return l=l!="object"?l:o?Array.isArray(o)?"array":l:"null",l=="array"||l=="object"&&typeof o.length=="number"}function d(o){var l=typeof o;return l=="object"&&o!=null||l=="function"}function p(o,l,h){return o.call.apply(o.bind,arguments)}function g(o,l,h){if(!o)throw Error();if(2<arguments.length){var f=Array.prototype.slice.call(arguments,2);return function(){var A=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(A,f),o.apply(l,A)}}return function(){return o.apply(l,arguments)}}function I(o,l,h){return I=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?p:g,I.apply(null,arguments)}function R(o,l){var h=Array.prototype.slice.call(arguments,1);return function(){var f=h.slice();return f.push.apply(f,arguments),o.apply(this,f)}}function D(o,l){function h(){}h.prototype=l.prototype,o.aa=l.prototype,o.prototype=new h,o.prototype.constructor=o,o.Qb=function(f,A,b){for(var k=Array(arguments.length-2),ie=2;ie<arguments.length;ie++)k[ie-2]=arguments[ie];return l.prototype[A].apply(f,k)}}function O(o){let l=o.length;if(0<l){let h=Array(l);for(let f=0;f<l;f++)h[f]=o[f];return h}return[]}function N(o,l){for(let h=1;h<arguments.length;h++){let f=arguments[h];if(u(f)){let A=o.length||0,b=f.length||0;o.length=A+b;for(let k=0;k<b;k++)o[A+k]=f[k]}else o.push(f)}}class ${constructor(l,h){this.i=l,this.j=h,this.h=0,this.g=null}get(){let l;return 0<this.h?(this.h--,l=this.g,this.g=l.next,l.next=null):l=this.i(),l}}function K(o){return/^[\s\xa0]*$/.test(o)}function Q(){var o=c.navigator;return o&&(o=o.userAgent)?o:""}function oe(o){return oe[" "](o),o}oe[" "]=function(){};var Ve=Q().indexOf("Gecko")!=-1&&!(Q().toLowerCase().indexOf("webkit")!=-1&&Q().indexOf("Edge")==-1)&&!(Q().indexOf("Trident")!=-1||Q().indexOf("MSIE")!=-1)&&Q().indexOf("Edge")==-1;function ee(o,l,h){for(let f in o)l.call(h,o[f],f,o)}function E(o,l){for(let h in o)l.call(void 0,o[h],h,o)}function m(o){let l={};for(let h in o)l[h]=o[h];return l}let v="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function w(o,l){let h,f;for(let A=1;A<arguments.length;A++){f=arguments[A];for(h in f)o[h]=f[h];for(let b=0;b<v.length;b++)h=v[b],Object.prototype.hasOwnProperty.call(f,h)&&(o[h]=f[h])}}function T(o){var l=1;o=o.split(":");let h=[];for(;0<l&&o.length;)h.push(o.shift()),l--;return o.length&&h.push(o.join(":")),h}function S(o){c.setTimeout(()=>{throw o},0)}function _(){var o=ka;let l=null;return o.g&&(l=o.g,o.g=o.g.next,o.g||(o.h=null),l.next=null),l}class vt{constructor(){this.h=this.g=null}add(l,h){let f=Fr.get();f.set(l,h),this.h?this.h.next=f:this.g=f,this.h=f}}var Fr=new $(()=>new lv,o=>o.reset());class lv{constructor(){this.next=this.g=this.h=null}set(l,h){this.h=l,this.g=h,this.next=null}reset(){this.next=this.g=this.h=null}}let Ur,$r=!1,ka=new vt,Qd=()=>{let o=c.Promise.resolve(void 0);Ur=()=>{o.then(hv)}};var hv=()=>{for(var o;o=_();){try{o.h.call(o.g)}catch(h){S(h)}var l=Fr;l.j(o),100>l.h&&(l.h++,o.next=l.g,l.g=o)}$r=!1};function Lt(){this.s=this.s,this.C=this.C}Lt.prototype.s=!1,Lt.prototype.ma=function(){this.s||(this.s=!0,this.N())},Lt.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Ce(o,l){this.type=o,this.g=this.target=l,this.defaultPrevented=!1}Ce.prototype.h=function(){this.defaultPrevented=!0};var dv=function(){if(!c.addEventListener||!Object.defineProperty)return!1;var o=!1,l=Object.defineProperty({},"passive",{get:function(){o=!0}});try{let h=()=>{};c.addEventListener("test",h,l),c.removeEventListener("test",h,l)}catch{}return o}();function Br(o,l){if(Ce.call(this,o?o.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,o){var h=this.type=o.type,f=o.changedTouches&&o.changedTouches.length?o.changedTouches[0]:null;if(this.target=o.target||o.srcElement,this.g=l,l=o.relatedTarget){if(Ve){e:{try{oe(l.nodeName);var A=!0;break e}catch{}A=!1}A||(l=null)}}else h=="mouseover"?l=o.fromElement:h=="mouseout"&&(l=o.toElement);this.relatedTarget=l,f?(this.clientX=f.clientX!==void 0?f.clientX:f.pageX,this.clientY=f.clientY!==void 0?f.clientY:f.pageY,this.screenX=f.screenX||0,this.screenY=f.screenY||0):(this.clientX=o.clientX!==void 0?o.clientX:o.pageX,this.clientY=o.clientY!==void 0?o.clientY:o.pageY,this.screenX=o.screenX||0,this.screenY=o.screenY||0),this.button=o.button,this.key=o.key||"",this.ctrlKey=o.ctrlKey,this.altKey=o.altKey,this.shiftKey=o.shiftKey,this.metaKey=o.metaKey,this.pointerId=o.pointerId||0,this.pointerType=typeof o.pointerType=="string"?o.pointerType:fv[o.pointerType]||"",this.state=o.state,this.i=o,o.defaultPrevented&&Br.aa.h.call(this)}}D(Br,Ce);var fv={2:"touch",3:"pen",4:"mouse"};Br.prototype.h=function(){Br.aa.h.call(this);var o=this.i;o.preventDefault?o.preventDefault():o.returnValue=!1};var jr="closure_listenable_"+(1e6*Math.random()|0),pv=0;function mv(o,l,h,f,A){this.listener=o,this.proxy=null,this.src=l,this.type=h,this.capture=!!f,this.ha=A,this.key=++pv,this.da=this.fa=!1}function gs(o){o.da=!0,o.listener=null,o.proxy=null,o.src=null,o.ha=null}function ys(o){this.src=o,this.g={},this.h=0}ys.prototype.add=function(o,l,h,f,A){var b=o.toString();o=this.g[b],o||(o=this.g[b]=[],this.h++);var k=xa(o,l,f,A);return-1<k?(l=o[k],h||(l.fa=!1)):(l=new mv(l,this.src,b,!!f,A),l.fa=h,o.push(l)),l};function Oa(o,l){var h=l.type;if(h in o.g){var f=o.g[h],A=Array.prototype.indexOf.call(f,l,void 0),b;(b=0<=A)&&Array.prototype.splice.call(f,A,1),b&&(gs(l),o.g[h].length==0&&(delete o.g[h],o.h--))}}function xa(o,l,h,f){for(var A=0;A<o.length;++A){var b=o[A];if(!b.da&&b.listener==l&&b.capture==!!h&&b.ha==f)return A}return-1}var Ma="closure_lm_"+(1e6*Math.random()|0),Va={};function Jd(o,l,h,f,A){if(f&&f.once)return Xd(o,l,h,f,A);if(Array.isArray(l)){for(var b=0;b<l.length;b++)Jd(o,l[b],h,f,A);return null}return h=$a(h),o&&o[jr]?o.K(l,h,d(f)?!!f.capture:!!f,A):Yd(o,l,h,!1,f,A)}function Yd(o,l,h,f,A,b){if(!l)throw Error("Invalid event type");var k=d(A)?!!A.capture:!!A,ie=Fa(o);if(ie||(o[Ma]=ie=new ys(o)),h=ie.add(l,h,f,k,b),h.proxy)return h;if(f=gv(),h.proxy=f,f.src=o,f.listener=h,o.addEventListener)dv||(A=k),A===void 0&&(A=!1),o.addEventListener(l.toString(),f,A);else if(o.attachEvent)o.attachEvent(ef(l.toString()),f);else if(o.addListener&&o.removeListener)o.addListener(f);else throw Error("addEventListener and attachEvent are unavailable.");return h}function gv(){function o(h){return l.call(o.src,o.listener,h)}let l=yv;return o}function Xd(o,l,h,f,A){if(Array.isArray(l)){for(var b=0;b<l.length;b++)Xd(o,l[b],h,f,A);return null}return h=$a(h),o&&o[jr]?o.L(l,h,d(f)?!!f.capture:!!f,A):Yd(o,l,h,!0,f,A)}function Zd(o,l,h,f,A){if(Array.isArray(l))for(var b=0;b<l.length;b++)Zd(o,l[b],h,f,A);else f=d(f)?!!f.capture:!!f,h=$a(h),o&&o[jr]?(o=o.i,l=String(l).toString(),l in o.g&&(b=o.g[l],h=xa(b,h,f,A),-1<h&&(gs(b[h]),Array.prototype.splice.call(b,h,1),b.length==0&&(delete o.g[l],o.h--)))):o&&(o=Fa(o))&&(l=o.g[l.toString()],o=-1,l&&(o=xa(l,h,f,A)),(h=-1<o?l[o]:null)&&La(h))}function La(o){if(typeof o!="number"&&o&&!o.da){var l=o.src;if(l&&l[jr])Oa(l.i,o);else{var h=o.type,f=o.proxy;l.removeEventListener?l.removeEventListener(h,f,o.capture):l.detachEvent?l.detachEvent(ef(h),f):l.addListener&&l.removeListener&&l.removeListener(f),(h=Fa(l))?(Oa(h,o),h.h==0&&(h.src=null,l[Ma]=null)):gs(o)}}}function ef(o){return o in Va?Va[o]:Va[o]="on"+o}function yv(o,l){if(o.da)o=!0;else{l=new Br(l,this);var h=o.listener,f=o.ha||o.src;o.fa&&La(o),o=h.call(f,l)}return o}function Fa(o){return o=o[Ma],o instanceof ys?o:null}var Ua="__closure_events_fn_"+(1e9*Math.random()>>>0);function $a(o){return typeof o=="function"?o:(o[Ua]||(o[Ua]=function(l){return o.handleEvent(l)}),o[Ua])}function Pe(){Lt.call(this),this.i=new ys(this),this.M=this,this.F=null}D(Pe,Lt),Pe.prototype[jr]=!0,Pe.prototype.removeEventListener=function(o,l,h,f){Zd(this,o,l,h,f)};function Le(o,l){var h,f=o.F;if(f)for(h=[];f;f=f.F)h.push(f);if(o=o.M,f=l.type||l,typeof l=="string")l=new Ce(l,o);else if(l instanceof Ce)l.target=l.target||o;else{var A=l;l=new Ce(f,o),w(l,A)}if(A=!0,h)for(var b=h.length-1;0<=b;b--){var k=l.g=h[b];A=_s(k,f,!0,l)&&A}if(k=l.g=o,A=_s(k,f,!0,l)&&A,A=_s(k,f,!1,l)&&A,h)for(b=0;b<h.length;b++)k=l.g=h[b],A=_s(k,f,!1,l)&&A}Pe.prototype.N=function(){if(Pe.aa.N.call(this),this.i){var o=this.i,l;for(l in o.g){for(var h=o.g[l],f=0;f<h.length;f++)gs(h[f]);delete o.g[l],o.h--}}this.F=null},Pe.prototype.K=function(o,l,h,f){return this.i.add(String(o),l,!1,h,f)},Pe.prototype.L=function(o,l,h,f){return this.i.add(String(o),l,!0,h,f)};function _s(o,l,h,f){if(l=o.i.g[String(l)],!l)return!0;l=l.concat();for(var A=!0,b=0;b<l.length;++b){var k=l[b];if(k&&!k.da&&k.capture==h){var ie=k.listener,Te=k.ha||k.src;k.fa&&Oa(o.i,k),A=ie.call(Te,f)!==!1&&A}}return A&&!f.defaultPrevented}function tf(o,l,h){if(typeof o=="function")h&&(o=I(o,h));else if(o&&typeof o.handleEvent=="function")o=I(o.handleEvent,o);else throw Error("Invalid listener argument");return 2147483647<Number(l)?-1:c.setTimeout(o,l||0)}function nf(o){o.g=tf(()=>{o.g=null,o.i&&(o.i=!1,nf(o))},o.l);let l=o.h;o.h=null,o.m.apply(null,l)}class _v extends Lt{constructor(l,h){super(),this.m=l,this.l=h,this.h=null,this.i=!1,this.g=null}j(l){this.h=arguments,this.g?this.i=!0:nf(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function qr(o){Lt.call(this),this.h=o,this.g={}}D(qr,Lt);var rf=[];function sf(o){ee(o.g,function(l,h){this.g.hasOwnProperty(h)&&La(l)},o),o.g={}}qr.prototype.N=function(){qr.aa.N.call(this),sf(this)},qr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ba=c.JSON.stringify,vv=c.JSON.parse,Iv=class{stringify(o){return c.JSON.stringify(o,void 0)}parse(o){return c.JSON.parse(o,void 0)}};function ja(){}ja.prototype.h=null;function of(o){return o.h||(o.h=o.i())}function af(){}var zr={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function qa(){Ce.call(this,"d")}D(qa,Ce);function za(){Ce.call(this,"c")}D(za,Ce);var un={},cf=null;function vs(){return cf=cf||new Pe}un.La="serverreachability";function uf(o){Ce.call(this,un.La,o)}D(uf,Ce);function Gr(o){let l=vs();Le(l,new uf(l))}un.STAT_EVENT="statevent";function lf(o,l){Ce.call(this,un.STAT_EVENT,o),this.stat=l}D(lf,Ce);function Fe(o){let l=vs();Le(l,new lf(l,o))}un.Ma="timingevent";function hf(o,l){Ce.call(this,un.Ma,o),this.size=l}D(hf,Ce);function Wr(o,l){if(typeof o!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){o()},l)}function Hr(){this.g=!0}Hr.prototype.xa=function(){this.g=!1};function wv(o,l,h,f,A,b){o.info(function(){if(o.g)if(b)for(var k="",ie=b.split("&"),Te=0;Te<ie.length;Te++){var Y=ie[Te].split("=");if(1<Y.length){var De=Y[0];Y=Y[1];var Ne=De.split("_");k=2<=Ne.length&&Ne[1]=="type"?k+(De+"="+Y+"&"):k+(De+"=redacted&")}}else k=null;else k=b;return"XMLHTTP REQ ("+f+") [attempt "+A+"]: "+l+`
`+h+`
`+k})}function Ev(o,l,h,f,A,b,k){o.info(function(){return"XMLHTTP RESP ("+f+") [ attempt "+A+"]: "+l+`
`+h+`
`+b+" "+k})}function Gn(o,l,h,f){o.info(function(){return"XMLHTTP TEXT ("+l+"): "+Av(o,h)+(f?" "+f:"")})}function Tv(o,l){o.info(function(){return"TIMEOUT: "+l})}Hr.prototype.info=function(){};function Av(o,l){if(!o.g)return l;if(!l)return null;try{var h=JSON.parse(l);if(h){for(o=0;o<h.length;o++)if(Array.isArray(h[o])){var f=h[o];if(!(2>f.length)){var A=f[1];if(Array.isArray(A)&&!(1>A.length)){var b=A[0];if(b!="noop"&&b!="stop"&&b!="close")for(var k=1;k<A.length;k++)A[k]=""}}}}return Ba(h)}catch{return l}}var Is={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},df={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Ga;function ws(){}D(ws,ja),ws.prototype.g=function(){return new XMLHttpRequest},ws.prototype.i=function(){return{}},Ga=new ws;function Ft(o,l,h,f){this.j=o,this.i=l,this.l=h,this.R=f||1,this.U=new qr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new ff}function ff(){this.i=null,this.g="",this.h=!1}var pf={},Wa={};function Ha(o,l,h){o.L=1,o.v=Ss(It(l)),o.m=h,o.P=!0,mf(o,null)}function mf(o,l){o.F=Date.now(),Es(o),o.A=It(o.v);var h=o.A,f=o.R;Array.isArray(f)||(f=[String(f)]),Pf(h.i,"t",f),o.C=0,h=o.j.J,o.h=new ff,o.g=Hf(o.j,h?l:null,!o.m),0<o.O&&(o.M=new _v(I(o.Y,o,o.g),o.O)),l=o.U,h=o.g,f=o.ca;var A="readystatechange";Array.isArray(A)||(A&&(rf[0]=A.toString()),A=rf);for(var b=0;b<A.length;b++){var k=Jd(h,A[b],f||l.handleEvent,!1,l.h||l);if(!k)break;l.g[k.key]=k}l=o.H?m(o.H):{},o.m?(o.u||(o.u="POST"),l["Content-Type"]="application/x-www-form-urlencoded",o.g.ea(o.A,o.u,o.m,l)):(o.u="GET",o.g.ea(o.A,o.u,null,l)),Gr(),wv(o.i,o.u,o.A,o.l,o.R,o.m)}Ft.prototype.ca=function(o){o=o.target;let l=this.M;l&&wt(o)==3?l.j():this.Y(o)},Ft.prototype.Y=function(o){try{if(o==this.g)e:{let Ne=wt(this.g);var l=this.g.Ba();let Kn=this.g.Z();if(!(3>Ne)&&(Ne!=3||this.g&&(this.h.h||this.g.oa()||Vf(this.g)))){this.J||Ne!=4||l==7||(l==8||0>=Kn?Gr(3):Gr(2)),Ka(this);var h=this.g.Z();this.X=h;t:if(gf(this)){var f=Vf(this.g);o="";var A=f.length,b=wt(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ln(this),Kr(this);var k="";break t}this.h.i=new c.TextDecoder}for(l=0;l<A;l++)this.h.h=!0,o+=this.h.i.decode(f[l],{stream:!(b&&l==A-1)});f.length=0,this.h.g+=o,this.C=0,k=this.h.g}else k=this.g.oa();if(this.o=h==200,Ev(this.i,this.u,this.A,this.l,this.R,Ne,h),this.o){if(this.T&&!this.K){t:{if(this.g){var ie,Te=this.g;if((ie=Te.g?Te.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!K(ie)){var Y=ie;break t}}Y=null}if(h=Y)Gn(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Qa(this,h);else{this.o=!1,this.s=3,Fe(12),ln(this),Kr(this);break e}}if(this.P){h=!0;let Ze;for(;!this.J&&this.C<k.length;)if(Ze=Sv(this,k),Ze==Wa){Ne==4&&(this.s=4,Fe(14),h=!1),Gn(this.i,this.l,null,"[Incomplete Response]");break}else if(Ze==pf){this.s=4,Fe(15),Gn(this.i,this.l,k,"[Invalid Chunk]"),h=!1;break}else Gn(this.i,this.l,Ze,null),Qa(this,Ze);if(gf(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ne!=4||k.length!=0||this.h.h||(this.s=1,Fe(16),h=!1),this.o=this.o&&h,!h)Gn(this.i,this.l,k,"[Invalid Chunked Response]"),ln(this),Kr(this);else if(0<k.length&&!this.W){this.W=!0;var De=this.j;De.g==this&&De.ba&&!De.M&&(De.j.info("Great, no buffering proxy detected. Bytes received: "+k.length),tc(De),De.M=!0,Fe(11))}}else Gn(this.i,this.l,k,null),Qa(this,k);Ne==4&&ln(this),this.o&&!this.J&&(Ne==4?qf(this.j,this):(this.o=!1,Es(this)))}else jv(this.g),h==400&&0<k.indexOf("Unknown SID")?(this.s=3,Fe(12)):(this.s=0,Fe(13)),ln(this),Kr(this)}}}catch{}finally{}};function gf(o){return o.g?o.u=="GET"&&o.L!=2&&o.j.Ca:!1}function Sv(o,l){var h=o.C,f=l.indexOf(`
`,h);return f==-1?Wa:(h=Number(l.substring(h,f)),isNaN(h)?pf:(f+=1,f+h>l.length?Wa:(l=l.slice(f,f+h),o.C=f+h,l)))}Ft.prototype.cancel=function(){this.J=!0,ln(this)};function Es(o){o.S=Date.now()+o.I,yf(o,o.I)}function yf(o,l){if(o.B!=null)throw Error("WatchDog timer not null");o.B=Wr(I(o.ba,o),l)}function Ka(o){o.B&&(c.clearTimeout(o.B),o.B=null)}Ft.prototype.ba=function(){this.B=null;let o=Date.now();0<=o-this.S?(Tv(this.i,this.A),this.L!=2&&(Gr(),Fe(17)),ln(this),this.s=2,Kr(this)):yf(this,this.S-o)};function Kr(o){o.j.G==0||o.J||qf(o.j,o)}function ln(o){Ka(o);var l=o.M;l&&typeof l.ma=="function"&&l.ma(),o.M=null,sf(o.U),o.g&&(l=o.g,o.g=null,l.abort(),l.ma())}function Qa(o,l){try{var h=o.j;if(h.G!=0&&(h.g==o||Ja(h.h,o))){if(!o.K&&Ja(h.h,o)&&h.G==3){try{var f=h.Da.g.parse(l)}catch{f=null}if(Array.isArray(f)&&f.length==3){var A=f;if(A[0]==0){e:if(!h.u){if(h.g)if(h.g.F+3e3<o.F)Ds(h),Cs(h);else break e;ec(h),Fe(18)}}else h.za=A[1],0<h.za-h.T&&37500>A[2]&&h.F&&h.v==0&&!h.C&&(h.C=Wr(I(h.Za,h),6e3));if(1>=If(h.h)&&h.ca){try{h.ca()}catch{}h.ca=void 0}}else dn(h,11)}else if((o.K||h.g==o)&&Ds(h),!K(l))for(A=h.Da.g.parse(l),l=0;l<A.length;l++){let Y=A[l];if(h.T=Y[0],Y=Y[1],h.G==2)if(Y[0]=="c"){h.K=Y[1],h.ia=Y[2];let De=Y[3];De!=null&&(h.la=De,h.j.info("VER="+h.la));let Ne=Y[4];Ne!=null&&(h.Aa=Ne,h.j.info("SVER="+h.Aa));let Kn=Y[5];Kn!=null&&typeof Kn=="number"&&0<Kn&&(f=1.5*Kn,h.L=f,h.j.info("backChannelRequestTimeoutMs_="+f)),f=h;let Ze=o.g;if(Ze){let ks=Ze.g?Ze.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ks){var b=f.h;b.g||ks.indexOf("spdy")==-1&&ks.indexOf("quic")==-1&&ks.indexOf("h2")==-1||(b.j=b.l,b.g=new Set,b.h&&(Ya(b,b.h),b.h=null))}if(f.D){let nc=Ze.g?Ze.g.getResponseHeader("X-HTTP-Session-Id"):null;nc&&(f.ya=nc,ae(f.I,f.D,nc))}}h.G=3,h.l&&h.l.ua(),h.ba&&(h.R=Date.now()-o.F,h.j.info("Handshake RTT: "+h.R+"ms")),f=h;var k=o;if(f.qa=Wf(f,f.J?f.ia:null,f.W),k.K){wf(f.h,k);var ie=k,Te=f.L;Te&&(ie.I=Te),ie.B&&(Ka(ie),Es(ie)),f.g=k}else Bf(f);0<h.i.length&&Ps(h)}else Y[0]!="stop"&&Y[0]!="close"||dn(h,7);else h.G==3&&(Y[0]=="stop"||Y[0]=="close"?Y[0]=="stop"?dn(h,7):Za(h):Y[0]!="noop"&&h.l&&h.l.ta(Y),h.v=0)}}Gr(4)}catch{}}var bv=class{constructor(o,l){this.g=o,this.map=l}};function _f(o){this.l=o||10,c.PerformanceNavigationTiming?(o=c.performance.getEntriesByType("navigation"),o=0<o.length&&(o[0].nextHopProtocol=="hq"||o[0].nextHopProtocol=="h2")):o=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=o?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function vf(o){return o.h?!0:o.g?o.g.size>=o.j:!1}function If(o){return o.h?1:o.g?o.g.size:0}function Ja(o,l){return o.h?o.h==l:o.g?o.g.has(l):!1}function Ya(o,l){o.g?o.g.add(l):o.h=l}function wf(o,l){o.h&&o.h==l?o.h=null:o.g&&o.g.has(l)&&o.g.delete(l)}_f.prototype.cancel=function(){if(this.i=Ef(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let o of this.g.values())o.cancel();this.g.clear()}};function Ef(o){if(o.h!=null)return o.i.concat(o.h.D);if(o.g!=null&&o.g.size!==0){let l=o.i;for(let h of o.g.values())l=l.concat(h.D);return l}return O(o.i)}function Rv(o){if(o.V&&typeof o.V=="function")return o.V();if(typeof Map<"u"&&o instanceof Map||typeof Set<"u"&&o instanceof Set)return Array.from(o.values());if(typeof o=="string")return o.split("");if(u(o)){for(var l=[],h=o.length,f=0;f<h;f++)l.push(o[f]);return l}l=[],h=0;for(f in o)l[h++]=o[f];return l}function Cv(o){if(o.na&&typeof o.na=="function")return o.na();if(!o.V||typeof o.V!="function"){if(typeof Map<"u"&&o instanceof Map)return Array.from(o.keys());if(!(typeof Set<"u"&&o instanceof Set)){if(u(o)||typeof o=="string"){var l=[];o=o.length;for(var h=0;h<o;h++)l.push(h);return l}l=[],h=0;for(let f in o)l[h++]=f;return l}}}function Tf(o,l){if(o.forEach&&typeof o.forEach=="function")o.forEach(l,void 0);else if(u(o)||typeof o=="string")Array.prototype.forEach.call(o,l,void 0);else for(var h=Cv(o),f=Rv(o),A=f.length,b=0;b<A;b++)l.call(void 0,f[b],h&&h[b],o)}var Af=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Pv(o,l){if(o){o=o.split("&");for(var h=0;h<o.length;h++){var f=o[h].indexOf("="),A=null;if(0<=f){var b=o[h].substring(0,f);A=o[h].substring(f+1)}else b=o[h];l(b,A?decodeURIComponent(A.replace(/\+/g," ")):"")}}}function hn(o){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,o instanceof hn){this.h=o.h,Ts(this,o.j),this.o=o.o,this.g=o.g,As(this,o.s),this.l=o.l;var l=o.i,h=new Yr;h.i=l.i,l.g&&(h.g=new Map(l.g),h.h=l.h),Sf(this,h),this.m=o.m}else o&&(l=String(o).match(Af))?(this.h=!1,Ts(this,l[1]||"",!0),this.o=Qr(l[2]||""),this.g=Qr(l[3]||"",!0),As(this,l[4]),this.l=Qr(l[5]||"",!0),Sf(this,l[6]||"",!0),this.m=Qr(l[7]||"")):(this.h=!1,this.i=new Yr(null,this.h))}hn.prototype.toString=function(){var o=[],l=this.j;l&&o.push(Jr(l,bf,!0),":");var h=this.g;return(h||l=="file")&&(o.push("//"),(l=this.o)&&o.push(Jr(l,bf,!0),"@"),o.push(encodeURIComponent(String(h)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h=this.s,h!=null&&o.push(":",String(h))),(h=this.l)&&(this.g&&h.charAt(0)!="/"&&o.push("/"),o.push(Jr(h,h.charAt(0)=="/"?kv:Nv,!0))),(h=this.i.toString())&&o.push("?",h),(h=this.m)&&o.push("#",Jr(h,xv)),o.join("")};function It(o){return new hn(o)}function Ts(o,l,h){o.j=h?Qr(l,!0):l,o.j&&(o.j=o.j.replace(/:$/,""))}function As(o,l){if(l){if(l=Number(l),isNaN(l)||0>l)throw Error("Bad port number "+l);o.s=l}else o.s=null}function Sf(o,l,h){l instanceof Yr?(o.i=l,Mv(o.i,o.h)):(h||(l=Jr(l,Ov)),o.i=new Yr(l,o.h))}function ae(o,l,h){o.i.set(l,h)}function Ss(o){return ae(o,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),o}function Qr(o,l){return o?l?decodeURI(o.replace(/%25/g,"%2525")):decodeURIComponent(o):""}function Jr(o,l,h){return typeof o=="string"?(o=encodeURI(o).replace(l,Dv),h&&(o=o.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),o):null}function Dv(o){return o=o.charCodeAt(0),"%"+(o>>4&15).toString(16)+(o&15).toString(16)}var bf=/[#\/\?@]/g,Nv=/[#\?:]/g,kv=/[#\?]/g,Ov=/[#\?@]/g,xv=/#/g;function Yr(o,l){this.h=this.g=null,this.i=o||null,this.j=!!l}function Ut(o){o.g||(o.g=new Map,o.h=0,o.i&&Pv(o.i,function(l,h){o.add(decodeURIComponent(l.replace(/\+/g," ")),h)}))}n=Yr.prototype,n.add=function(o,l){Ut(this),this.i=null,o=Wn(this,o);var h=this.g.get(o);return h||this.g.set(o,h=[]),h.push(l),this.h+=1,this};function Rf(o,l){Ut(o),l=Wn(o,l),o.g.has(l)&&(o.i=null,o.h-=o.g.get(l).length,o.g.delete(l))}function Cf(o,l){return Ut(o),l=Wn(o,l),o.g.has(l)}n.forEach=function(o,l){Ut(this),this.g.forEach(function(h,f){h.forEach(function(A){o.call(l,A,f,this)},this)},this)},n.na=function(){Ut(this);let o=Array.from(this.g.values()),l=Array.from(this.g.keys()),h=[];for(let f=0;f<l.length;f++){let A=o[f];for(let b=0;b<A.length;b++)h.push(l[f])}return h},n.V=function(o){Ut(this);let l=[];if(typeof o=="string")Cf(this,o)&&(l=l.concat(this.g.get(Wn(this,o))));else{o=Array.from(this.g.values());for(let h=0;h<o.length;h++)l=l.concat(o[h])}return l},n.set=function(o,l){return Ut(this),this.i=null,o=Wn(this,o),Cf(this,o)&&(this.h-=this.g.get(o).length),this.g.set(o,[l]),this.h+=1,this},n.get=function(o,l){return o?(o=this.V(o),0<o.length?String(o[0]):l):l};function Pf(o,l,h){Rf(o,l),0<h.length&&(o.i=null,o.g.set(Wn(o,l),O(h)),o.h+=h.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let o=[],l=Array.from(this.g.keys());for(var h=0;h<l.length;h++){var f=l[h];let b=encodeURIComponent(String(f)),k=this.V(f);for(f=0;f<k.length;f++){var A=b;k[f]!==""&&(A+="="+encodeURIComponent(String(k[f]))),o.push(A)}}return this.i=o.join("&")};function Wn(o,l){return l=String(l),o.j&&(l=l.toLowerCase()),l}function Mv(o,l){l&&!o.j&&(Ut(o),o.i=null,o.g.forEach(function(h,f){var A=f.toLowerCase();f!=A&&(Rf(this,f),Pf(this,A,h))},o)),o.j=l}function Vv(o,l){let h=new Hr;if(c.Image){let f=new Image;f.onload=R($t,h,"TestLoadImage: loaded",!0,l,f),f.onerror=R($t,h,"TestLoadImage: error",!1,l,f),f.onabort=R($t,h,"TestLoadImage: abort",!1,l,f),f.ontimeout=R($t,h,"TestLoadImage: timeout",!1,l,f),c.setTimeout(function(){f.ontimeout&&f.ontimeout()},1e4),f.src=o}else l(!1)}function Lv(o,l){let h=new Hr,f=new AbortController,A=setTimeout(()=>{f.abort(),$t(h,"TestPingServer: timeout",!1,l)},1e4);fetch(o,{signal:f.signal}).then(b=>{clearTimeout(A),b.ok?$t(h,"TestPingServer: ok",!0,l):$t(h,"TestPingServer: server error",!1,l)}).catch(()=>{clearTimeout(A),$t(h,"TestPingServer: error",!1,l)})}function $t(o,l,h,f,A){try{A&&(A.onload=null,A.onerror=null,A.onabort=null,A.ontimeout=null),f(h)}catch{}}function Fv(){this.g=new Iv}function Uv(o,l,h){let f=h||"";try{Tf(o,function(A,b){let k=A;d(A)&&(k=Ba(A)),l.push(f+b+"="+encodeURIComponent(k))})}catch(A){throw l.push(f+"type="+encodeURIComponent("_badmap")),A}}function Xr(o){this.l=o.Ub||null,this.j=o.eb||!1}D(Xr,ja),Xr.prototype.g=function(){return new bs(this.l,this.j)},Xr.prototype.i=function(o){return function(){return o}}({});function bs(o,l){Pe.call(this),this.D=o,this.o=l,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}D(bs,Pe),n=bs.prototype,n.open=function(o,l){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=o,this.A=l,this.readyState=1,ei(this)},n.send=function(o){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let l={headers:this.u,method:this.B,credentials:this.m,cache:void 0};o&&(l.body=o),(this.D||c).fetch(new Request(this.A,l)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Zr(this)),this.readyState=0},n.Sa=function(o){if(this.g&&(this.l=o,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=o.headers,this.readyState=2,ei(this)),this.g&&(this.readyState=3,ei(this),this.g)))if(this.responseType==="arraybuffer")o.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in o){if(this.j=o.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Df(this)}else o.text().then(this.Ra.bind(this),this.ga.bind(this))};function Df(o){o.j.read().then(o.Pa.bind(o)).catch(o.ga.bind(o))}n.Pa=function(o){if(this.g){if(this.o&&o.value)this.response.push(o.value);else if(!this.o){var l=o.value?o.value:new Uint8Array(0);(l=this.v.decode(l,{stream:!o.done}))&&(this.response=this.responseText+=l)}o.done?Zr(this):ei(this),this.readyState==3&&Df(this)}},n.Ra=function(o){this.g&&(this.response=this.responseText=o,Zr(this))},n.Qa=function(o){this.g&&(this.response=o,Zr(this))},n.ga=function(){this.g&&Zr(this)};function Zr(o){o.readyState=4,o.l=null,o.j=null,o.v=null,ei(o)}n.setRequestHeader=function(o,l){this.u.append(o,l)},n.getResponseHeader=function(o){return this.h&&this.h.get(o.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let o=[],l=this.h.entries();for(var h=l.next();!h.done;)h=h.value,o.push(h[0]+": "+h[1]),h=l.next();return o.join(`\r
`)};function ei(o){o.onreadystatechange&&o.onreadystatechange.call(o)}Object.defineProperty(bs.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(o){this.m=o?"include":"same-origin"}});function Nf(o){let l="";return ee(o,function(h,f){l+=f,l+=":",l+=h,l+=`\r
`}),l}function Xa(o,l,h){e:{for(f in h){var f=!1;break e}f=!0}f||(h=Nf(h),typeof o=="string"?h!=null&&encodeURIComponent(String(h)):ae(o,l,h))}function he(o){Pe.call(this),this.headers=new Map,this.o=o||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}D(he,Pe);var $v=/^https?$/i,Bv=["POST","PUT"];n=he.prototype,n.Ha=function(o){this.J=o},n.ea=function(o,l,h,f){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+o);l=l?l.toUpperCase():"GET",this.D=o,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Ga.g(),this.v=this.o?of(this.o):of(Ga),this.g.onreadystatechange=I(this.Ea,this);try{this.B=!0,this.g.open(l,String(o),!0),this.B=!1}catch(b){kf(this,b);return}if(o=h||"",h=new Map(this.headers),f)if(Object.getPrototypeOf(f)===Object.prototype)for(var A in f)h.set(A,f[A]);else if(typeof f.keys=="function"&&typeof f.get=="function")for(let b of f.keys())h.set(b,f.get(b));else throw Error("Unknown input type for opt_headers: "+String(f));f=Array.from(h.keys()).find(b=>b.toLowerCase()=="content-type"),A=c.FormData&&o instanceof c.FormData,!(0<=Array.prototype.indexOf.call(Bv,l,void 0))||f||A||h.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[b,k]of h)this.g.setRequestHeader(b,k);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Mf(this),this.u=!0,this.g.send(o),this.u=!1}catch(b){kf(this,b)}};function kf(o,l){o.h=!1,o.g&&(o.j=!0,o.g.abort(),o.j=!1),o.l=l,o.m=5,Of(o),Rs(o)}function Of(o){o.A||(o.A=!0,Le(o,"complete"),Le(o,"error"))}n.abort=function(o){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=o||7,Le(this,"complete"),Le(this,"abort"),Rs(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Rs(this,!0)),he.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?xf(this):this.bb())},n.bb=function(){xf(this)};function xf(o){if(o.h&&typeof a<"u"&&(!o.v[1]||wt(o)!=4||o.Z()!=2)){if(o.u&&wt(o)==4)tf(o.Ea,0,o);else if(Le(o,"readystatechange"),wt(o)==4){o.h=!1;try{let k=o.Z();e:switch(k){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var l=!0;break e;default:l=!1}var h;if(!(h=l)){var f;if(f=k===0){var A=String(o.D).match(Af)[1]||null;!A&&c.self&&c.self.location&&(A=c.self.location.protocol.slice(0,-1)),f=!$v.test(A?A.toLowerCase():"")}h=f}if(h)Le(o,"complete"),Le(o,"success");else{o.m=6;try{var b=2<wt(o)?o.g.statusText:""}catch{b=""}o.l=b+" ["+o.Z()+"]",Of(o)}}finally{Rs(o)}}}}function Rs(o,l){if(o.g){Mf(o);let h=o.g,f=o.v[0]?()=>{}:null;o.g=null,o.v=null,l||Le(o,"ready");try{h.onreadystatechange=f}catch{}}}function Mf(o){o.I&&(c.clearTimeout(o.I),o.I=null)}n.isActive=function(){return!!this.g};function wt(o){return o.g?o.g.readyState:0}n.Z=function(){try{return 2<wt(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(o){if(this.g){var l=this.g.responseText;return o&&l.indexOf(o)==0&&(l=l.substring(o.length)),vv(l)}};function Vf(o){try{if(!o.g)return null;if("response"in o.g)return o.g.response;switch(o.H){case"":case"text":return o.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in o.g)return o.g.mozResponseArrayBuffer}return null}catch{return null}}function jv(o){let l={};o=(o.g&&2<=wt(o)&&o.g.getAllResponseHeaders()||"").split(`\r
`);for(let f=0;f<o.length;f++){if(K(o[f]))continue;var h=T(o[f]);let A=h[0];if(h=h[1],typeof h!="string")continue;h=h.trim();let b=l[A]||[];l[A]=b,b.push(h)}E(l,function(f){return f.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ti(o,l,h){return h&&h.internalChannelParams&&h.internalChannelParams[o]||l}function Lf(o){this.Aa=0,this.i=[],this.j=new Hr,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ti("failFast",!1,o),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ti("baseRetryDelayMs",5e3,o),this.cb=ti("retryDelaySeedMs",1e4,o),this.Wa=ti("forwardChannelMaxRetries",2,o),this.wa=ti("forwardChannelRequestTimeoutMs",2e4,o),this.pa=o&&o.xmlHttpFactory||void 0,this.Xa=o&&o.Tb||void 0,this.Ca=o&&o.useFetchStreams||!1,this.L=void 0,this.J=o&&o.supportsCrossDomainXhr||!1,this.K="",this.h=new _f(o&&o.concurrentRequestLimit),this.Da=new Fv,this.P=o&&o.fastHandshake||!1,this.O=o&&o.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=o&&o.Rb||!1,o&&o.xa&&this.j.xa(),o&&o.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&o&&o.detectBufferingProxy||!1,this.ja=void 0,o&&o.longPollingTimeout&&0<o.longPollingTimeout&&(this.ja=o.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=Lf.prototype,n.la=8,n.G=1,n.connect=function(o,l,h,f){Fe(0),this.W=o,this.H=l||{},h&&f!==void 0&&(this.H.OSID=h,this.H.OAID=f),this.F=this.X,this.I=Wf(this,null,this.W),Ps(this)};function Za(o){if(Ff(o),o.G==3){var l=o.U++,h=It(o.I);if(ae(h,"SID",o.K),ae(h,"RID",l),ae(h,"TYPE","terminate"),ni(o,h),l=new Ft(o,o.j,l),l.L=2,l.v=Ss(It(h)),h=!1,c.navigator&&c.navigator.sendBeacon)try{h=c.navigator.sendBeacon(l.v.toString(),"")}catch{}!h&&c.Image&&(new Image().src=l.v,h=!0),h||(l.g=Hf(l.j,null),l.g.ea(l.v)),l.F=Date.now(),Es(l)}Gf(o)}function Cs(o){o.g&&(tc(o),o.g.cancel(),o.g=null)}function Ff(o){Cs(o),o.u&&(c.clearTimeout(o.u),o.u=null),Ds(o),o.h.cancel(),o.s&&(typeof o.s=="number"&&c.clearTimeout(o.s),o.s=null)}function Ps(o){if(!vf(o.h)&&!o.s){o.s=!0;var l=o.Ga;Ur||Qd(),$r||(Ur(),$r=!0),ka.add(l,o),o.B=0}}function qv(o,l){return If(o.h)>=o.h.j-(o.s?1:0)?!1:o.s?(o.i=l.D.concat(o.i),!0):o.G==1||o.G==2||o.B>=(o.Va?0:o.Wa)?!1:(o.s=Wr(I(o.Ga,o,l),zf(o,o.B)),o.B++,!0)}n.Ga=function(o){if(this.s)if(this.s=null,this.G==1){if(!o){this.U=Math.floor(1e5*Math.random()),o=this.U++;let A=new Ft(this,this.j,o),b=this.o;if(this.S&&(b?(b=m(b),w(b,this.S)):b=this.S),this.m!==null||this.O||(A.H=b,b=null),this.P)e:{for(var l=0,h=0;h<this.i.length;h++){t:{var f=this.i[h];if("__data__"in f.map&&(f=f.map.__data__,typeof f=="string")){f=f.length;break t}f=void 0}if(f===void 0)break;if(l+=f,4096<l){l=h;break e}if(l===4096||h===this.i.length-1){l=h+1;break e}}l=1e3}else l=1e3;l=$f(this,A,l),h=It(this.I),ae(h,"RID",o),ae(h,"CVER",22),this.D&&ae(h,"X-HTTP-Session-Id",this.D),ni(this,h),b&&(this.O?l="headers="+encodeURIComponent(String(Nf(b)))+"&"+l:this.m&&Xa(h,this.m,b)),Ya(this.h,A),this.Ua&&ae(h,"TYPE","init"),this.P?(ae(h,"$req",l),ae(h,"SID","null"),A.T=!0,Ha(A,h,null)):Ha(A,h,l),this.G=2}}else this.G==3&&(o?Uf(this,o):this.i.length==0||vf(this.h)||Uf(this))};function Uf(o,l){var h;l?h=l.l:h=o.U++;let f=It(o.I);ae(f,"SID",o.K),ae(f,"RID",h),ae(f,"AID",o.T),ni(o,f),o.m&&o.o&&Xa(f,o.m,o.o),h=new Ft(o,o.j,h,o.B+1),o.m===null&&(h.H=o.o),l&&(o.i=l.D.concat(o.i)),l=$f(o,h,1e3),h.I=Math.round(.5*o.wa)+Math.round(.5*o.wa*Math.random()),Ya(o.h,h),Ha(h,f,l)}function ni(o,l){o.H&&ee(o.H,function(h,f){ae(l,f,h)}),o.l&&Tf({},function(h,f){ae(l,f,h)})}function $f(o,l,h){h=Math.min(o.i.length,h);var f=o.l?I(o.l.Na,o.l,o):null;e:{var A=o.i;let b=-1;for(;;){let k=["count="+h];b==-1?0<h?(b=A[0].g,k.push("ofs="+b)):b=0:k.push("ofs="+b);let ie=!0;for(let Te=0;Te<h;Te++){let Y=A[Te].g,De=A[Te].map;if(Y-=b,0>Y)b=Math.max(0,A[Te].g-100),ie=!1;else try{Uv(De,k,"req"+Y+"_")}catch{f&&f(De)}}if(ie){f=k.join("&");break e}}}return o=o.i.splice(0,h),l.D=o,f}function Bf(o){if(!o.g&&!o.u){o.Y=1;var l=o.Fa;Ur||Qd(),$r||(Ur(),$r=!0),ka.add(l,o),o.v=0}}function ec(o){return o.g||o.u||3<=o.v?!1:(o.Y++,o.u=Wr(I(o.Fa,o),zf(o,o.v)),o.v++,!0)}n.Fa=function(){if(this.u=null,jf(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var o=2*this.R;this.j.info("BP detection timer enabled: "+o),this.A=Wr(I(this.ab,this),o)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Fe(10),Cs(this),jf(this))};function tc(o){o.A!=null&&(c.clearTimeout(o.A),o.A=null)}function jf(o){o.g=new Ft(o,o.j,"rpc",o.Y),o.m===null&&(o.g.H=o.o),o.g.O=0;var l=It(o.qa);ae(l,"RID","rpc"),ae(l,"SID",o.K),ae(l,"AID",o.T),ae(l,"CI",o.F?"0":"1"),!o.F&&o.ja&&ae(l,"TO",o.ja),ae(l,"TYPE","xmlhttp"),ni(o,l),o.m&&o.o&&Xa(l,o.m,o.o),o.L&&(o.g.I=o.L);var h=o.g;o=o.ia,h.L=1,h.v=Ss(It(l)),h.m=null,h.P=!0,mf(h,o)}n.Za=function(){this.C!=null&&(this.C=null,Cs(this),ec(this),Fe(19))};function Ds(o){o.C!=null&&(c.clearTimeout(o.C),o.C=null)}function qf(o,l){var h=null;if(o.g==l){Ds(o),tc(o),o.g=null;var f=2}else if(Ja(o.h,l))h=l.D,wf(o.h,l),f=1;else return;if(o.G!=0){if(l.o)if(f==1){h=l.m?l.m.length:0,l=Date.now()-l.F;var A=o.B;f=vs(),Le(f,new hf(f,h)),Ps(o)}else Bf(o);else if(A=l.s,A==3||A==0&&0<l.X||!(f==1&&qv(o,l)||f==2&&ec(o)))switch(h&&0<h.length&&(l=o.h,l.i=l.i.concat(h)),A){case 1:dn(o,5);break;case 4:dn(o,10);break;case 3:dn(o,6);break;default:dn(o,2)}}}function zf(o,l){let h=o.Ta+Math.floor(Math.random()*o.cb);return o.isActive()||(h*=2),h*l}function dn(o,l){if(o.j.info("Error code "+l),l==2){var h=I(o.fb,o),f=o.Xa;let A=!f;f=new hn(f||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||Ts(f,"https"),Ss(f),A?Vv(f.toString(),h):Lv(f.toString(),h)}else Fe(2);o.G=0,o.l&&o.l.sa(l),Gf(o),Ff(o)}n.fb=function(o){o?(this.j.info("Successfully pinged google.com"),Fe(2)):(this.j.info("Failed to ping google.com"),Fe(1))};function Gf(o){if(o.G=0,o.ka=[],o.l){let l=Ef(o.h);(l.length!=0||o.i.length!=0)&&(N(o.ka,l),N(o.ka,o.i),o.h.i.length=0,O(o.i),o.i.length=0),o.l.ra()}}function Wf(o,l,h){var f=h instanceof hn?It(h):new hn(h);if(f.g!="")l&&(f.g=l+"."+f.g),As(f,f.s);else{var A=c.location;f=A.protocol,l=l?l+"."+A.hostname:A.hostname,A=+A.port;var b=new hn(null);f&&Ts(b,f),l&&(b.g=l),A&&As(b,A),h&&(b.l=h),f=b}return h=o.D,l=o.ya,h&&l&&ae(f,h,l),ae(f,"VER",o.la),ni(o,f),f}function Hf(o,l,h){if(l&&!o.J)throw Error("Can't create secondary domain capable XhrIo object.");return l=o.Ca&&!o.pa?new he(new Xr({eb:h})):new he(o.pa),l.Ha(o.J),l}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Kf(){}n=Kf.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function Ns(){}Ns.prototype.g=function(o,l){return new je(o,l)};function je(o,l){Pe.call(this),this.g=new Lf(l),this.l=o,this.h=l&&l.messageUrlParams||null,o=l&&l.messageHeaders||null,l&&l.clientProtocolHeaderRequired&&(o?o["X-Client-Protocol"]="webchannel":o={"X-Client-Protocol":"webchannel"}),this.g.o=o,o=l&&l.initMessageHeaders||null,l&&l.messageContentType&&(o?o["X-WebChannel-Content-Type"]=l.messageContentType:o={"X-WebChannel-Content-Type":l.messageContentType}),l&&l.va&&(o?o["X-WebChannel-Client-Profile"]=l.va:o={"X-WebChannel-Client-Profile":l.va}),this.g.S=o,(o=l&&l.Sb)&&!K(o)&&(this.g.m=o),this.v=l&&l.supportsCrossDomainXhr||!1,this.u=l&&l.sendRawJson||!1,(l=l&&l.httpSessionIdParam)&&!K(l)&&(this.g.D=l,o=this.h,o!==null&&l in o&&(o=this.h,l in o&&delete o[l])),this.j=new Hn(this)}D(je,Pe),je.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},je.prototype.close=function(){Za(this.g)},je.prototype.o=function(o){var l=this.g;if(typeof o=="string"){var h={};h.__data__=o,o=h}else this.u&&(h={},h.__data__=Ba(o),o=h);l.i.push(new bv(l.Ya++,o)),l.G==3&&Ps(l)},je.prototype.N=function(){this.g.l=null,delete this.j,Za(this.g),delete this.g,je.aa.N.call(this)};function Qf(o){qa.call(this),o.__headers__&&(this.headers=o.__headers__,this.statusCode=o.__status__,delete o.__headers__,delete o.__status__);var l=o.__sm__;if(l){e:{for(let h in l){o=h;break e}o=void 0}(this.i=o)&&(o=this.i,l=l!==null&&o in l?l[o]:void 0),this.data=l}else this.data=o}D(Qf,qa);function Jf(){za.call(this),this.status=1}D(Jf,za);function Hn(o){this.g=o}D(Hn,Kf),Hn.prototype.ua=function(){Le(this.g,"a")},Hn.prototype.ta=function(o){Le(this.g,new Qf(o))},Hn.prototype.sa=function(o){Le(this.g,new Jf)},Hn.prototype.ra=function(){Le(this.g,"b")},Ns.prototype.createWebChannel=Ns.prototype.g,je.prototype.send=je.prototype.o,je.prototype.open=je.prototype.m,je.prototype.close=je.prototype.close,Ll=kt.createWebChannelTransport=function(){return new Ns},Vl=kt.getStatEventTarget=function(){return vs()},Ml=kt.Event=un,Fo=kt.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Is.NO_ERROR=0,Is.TIMEOUT=8,Is.HTTP_ERROR=6,qi=kt.ErrorCode=Is,df.COMPLETE="complete",xl=kt.EventType=df,af.EventType=zr,zr.OPEN="a",zr.CLOSE="b",zr.ERROR="c",zr.MESSAGE="d",Pe.prototype.listen=Pe.prototype.K,gr=kt.WebChannel=af,lb=kt.FetchXmlHttpFactory=Xr,he.prototype.listenOnce=he.prototype.L,he.prototype.getLastError=he.prototype.Ka,he.prototype.getLastErrorCode=he.prototype.Ba,he.prototype.getStatus=he.prototype.Z,he.prototype.getResponseJson=he.prototype.Oa,he.prototype.getResponseText=he.prototype.oa,he.prototype.send=he.prototype.ea,he.prototype.setWithCredentials=he.prototype.Ha,Ol=kt.XhrIo=he}).apply(typeof Lo<"u"?Lo:typeof self<"u"?self:typeof window<"u"?window:{});var ry="@firebase/firestore";var Ee=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Ee.UNAUTHENTICATED=new Ee(null),Ee.GOOGLE_CREDENTIALS=new Ee("google-credentials-uid"),Ee.FIRST_PARTY=new Ee("first-party-uid"),Ee.MOCK_USER=new Ee("mock-user");var Mr="10.14.0";var xn=new Qt("@firebase/firestore");function zi(){return xn.logLevel}function M(n,...e){if(xn.logLevel<=W.DEBUG){let t=e.map(wd);xn.debug(`Firestore (${Mr}): ${n}`,...t)}}function xt(n,...e){if(xn.logLevel<=W.ERROR){let t=e.map(wd);xn.error(`Firestore (${Mr}): ${n}`,...t)}}function Tr(n,...e){if(xn.logLevel<=W.WARN){let t=e.map(wd);xn.warn(`Firestore (${Mr}): ${n}`,...t)}}function wd(n){if(typeof n=="string")return n;try{return function(t){return JSON.stringify(t)}(n)}catch{return n}}function U(n="Unexpected state"){let e=`FIRESTORE (${Mr}) INTERNAL ASSERTION FAILED: `+n;throw xt(e),new Error(e)}function te(n,e){n||U()}function j(n,e){return n}var C={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},x=class extends Ge{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var rt=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var qo=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},jl=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Ee.UNAUTHENTICATED))}shutdown(){}},ql=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},zl=class{constructor(e){this.t=e,this.currentUser=Ee.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){te(this.o===void 0);let r=this.i,i=u=>this.i!==r?(r=this.i,t(u)):Promise.resolve(),s=new rt;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new rt,e.enqueueRetryable(()=>i(this.currentUser))};let a=()=>{let u=s;e.enqueueRetryable(()=>y(this,null,function*(){yield u.promise,yield i(this.currentUser)}))},c=u=>{M("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(u=>c(u)),setTimeout(()=>{if(!this.auth){let u=this.t.getImmediate({optional:!0});u?c(u):(M("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new rt)}},0),a()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(M("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(te(typeof r.accessToken=="string"),new qo(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return te(e===null||typeof e=="string"),new Ee(e)}},Gl=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=Ee.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},Wl=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new Gl(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(Ee.FIRST_PARTY))}shutdown(){}invalidateToken(){}},Hl=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},Kl=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){te(this.o===void 0);let r=s=>{s.error!=null&&M("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);let a=s.token!==this.R;return this.R=s.token,M("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};let i=s=>{M("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){let s=this.A.getImmediate({optional:!0});s?i(s):M("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(te(typeof t.token=="string"),this.R=t.token,new Hl(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function hb(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}var zo=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,r="";for(;r.length<20;){let i=hb(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+=e.charAt(i[s]%e.length))}return r}};function X(n,e){return n<e?-1:n>e?1:0}function Ar(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}var Re=class n{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new x(C.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new x(C.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new x(C.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new x(C.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new n(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?X(this.nanoseconds,e.nanoseconds):X(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var q=class n{constructor(e){this.timestamp=e}static fromTimestamp(e){return new n(e)}static min(){return new n(new Re(0,0))}static max(){return new n(new Re(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var Go=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&U(),r===void 0?r=e.length-t:r>e.length-t&&U(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let s=e.get(i),a=t.get(i);if(s<a)return-1;if(s>a)return 1}return e.length<t.length?-1:e.length>t.length?1:0}},ue=class n extends Go{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new x(C.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},db=/^[_a-zA-Z][_a-zA-Z0-9]*$/,He=class n extends Go{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return db.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new n(["__name__"])}static fromServerFormat(e){let t=[],r="",i=0,s=()=>{if(r.length===0)throw new x(C.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},a=!1;for(;i<e.length;){let c=e[i];if(c==="\\"){if(i+1===e.length)throw new x(C.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new x(C.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else c==="`"?(a=!a,i++):c!=="."||a?(r+=c,i++):(s(),i++)}if(s(),a)throw new x(C.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var V=class n{constructor(e){this.path=e}static fromPath(e){return new n(ue.fromString(e))}static fromName(e){return new n(ue.fromString(e).popFirst(5))}static empty(){return new n(ue.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ue.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return ue.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new ue(e.slice()))}};var Ql=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};Ql.UNKNOWN_ID=-1;function fb(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=q.fromTimestamp(r===1e9?new Re(t+1,0):new Re(t,r));return new Mn(i,V.empty(),e)}function pb(n){return new Mn(n.readTime,n.key,-1)}var Mn=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(q.min(),V.empty(),-1)}static max(){return new n(q.max(),V.empty(),-1)}};function mb(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=V.comparator(n.documentKey,e.documentKey),t!==0?t:X(n.largestBatchId,e.largestBatchId))}var gb="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Jl=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function hs(n){return y(this,null,function*(){if(n.code!==C.FAILED_PRECONDITION||n.message!==gb)throw n;M("LocalStore","Unexpectedly lost primary lease")})}var P=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&U(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,s=0,a=!1;e.forEach(c=>{++i,c.next(()=>{++s,a&&s===i&&t()},u=>r(u))}),a=!0,s===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,s)=>{r.push(t.call(this,i,s))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let s=e.length,a=new Array(s),c=0;for(let u=0;u<s;u++){let d=u;t(e[d]).next(p=>{a[d]=p,++c,c===s&&r(a)},p=>i(p))}})}static doWhile(e,t){return new n((r,i)=>{let s=()=>{e()===!0?t().next(()=>{s()},i):r()};s()})}};function yb(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function ds(n){return n.name==="IndexedDbTransactionError"}var Fy=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ie(i),this.se=i=>r.writeSequenceNumber(i))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.se&&this.se(t),t}}return n.oe=-1,n})();function wa(n){return n==null}function Ji(n){return n===0&&1/n==-1/0}function _b(n){return typeof n=="number"&&Number.isInteger(n)&&!Ji(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}var vb=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],gD=[...vb,"documentOverlays"],Ib=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],wb=Ib,Eb=[...wb,"indexConfiguration","indexState","indexEntries"];var yD=[...Eb,"globals"];function iy(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function jn(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function Uy(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var fe=class n{constructor(e,t){this.comparator=e,this.root=t||ft.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,ft.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ft.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ir(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ir(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ir(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ir(this.root,e,this.comparator,!0)}},Ir=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},ft=class n{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=s??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new n(e??this.key,t??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):s===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw U();let e=this.left.check();if(e!==this.right.check())throw U();return e+(this.isRed()?0:1)}};ft.EMPTY=null,ft.RED=!0,ft.BLACK=!1;ft.EMPTY=new class{constructor(){this.size=0}get key(){throw U()}get value(){throw U()}get color(){throw U()}get left(){throw U()}get right(){throw U()}copy(e,t,r,i,s){return this}insert(e,t,r){return new ft(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var Oe=class n{constructor(e){this.comparator=e,this.data=new fe(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Wo(this.data.getIterator())}getIteratorFrom(e){return new Wo(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},Wo=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var Xe=class n{constructor(e){this.fields=e,e.sort(He.comparator)}static empty(){return new n([])}unionWith(e){let t=new Oe(He.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Ar(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var Ho=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var Me=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new Ho("Invalid base64 string: "+s):s}}(e);return new n(t)}static fromUint8Array(e){let t=function(i){let s="";for(let a=0;a<i.length;++a)s+=String.fromCharCode(i[a]);return s}(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return X(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};Me.EMPTY_BYTE_STRING=new Me("");var Tb=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Mt(n){if(te(!!n),typeof n=="string"){let e=0,t=Tb.exec(n);if(te(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:ce(n.seconds),nanos:ce(n.nanos)}}function ce(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function rn(n){return typeof n=="string"?Me.fromBase64String(n):Me.fromUint8Array(n)}function Ed(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function Td(n){let e=n.mapValue.fields.__previous_value__;return Ed(e)?Td(e):e}function Yi(n){let e=Mt(n.mapValue.fields.__local_write_time__.timestampValue);return new Re(e.seconds,e.nanos)}var Yl=class{constructor(e,t,r,i,s,a,c,u,d){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=a,this.autoDetectLongPolling=c,this.longPollingOptions=u,this.useFetchStreams=d}},Ko=class n{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new n("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var Uo={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Vn(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Ed(n)?4:By(n)?9007199254740991:$y(n)?10:11:U()}function gt(n,e){if(n===e)return!0;let t=Vn(n);if(t!==Vn(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Yi(n).isEqual(Yi(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;let a=Mt(i.timestampValue),c=Mt(s.timestampValue);return a.seconds===c.seconds&&a.nanos===c.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,s){return rn(i.bytesValue).isEqual(rn(s.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,s){return ce(i.geoPointValue.latitude)===ce(s.geoPointValue.latitude)&&ce(i.geoPointValue.longitude)===ce(s.geoPointValue.longitude)}(n,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return ce(i.integerValue)===ce(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){let a=ce(i.doubleValue),c=ce(s.doubleValue);return a===c?Ji(a)===Ji(c):isNaN(a)&&isNaN(c)}return!1}(n,e);case 9:return Ar(n.arrayValue.values||[],e.arrayValue.values||[],gt);case 10:case 11:return function(i,s){let a=i.mapValue.fields||{},c=s.mapValue.fields||{};if(iy(a)!==iy(c))return!1;for(let u in a)if(a.hasOwnProperty(u)&&(c[u]===void 0||!gt(a[u],c[u])))return!1;return!0}(n,e);default:return U()}}function Xi(n,e){return(n.values||[]).find(t=>gt(t,e))!==void 0}function Sr(n,e){if(n===e)return 0;let t=Vn(n),r=Vn(e);if(t!==r)return X(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return X(n.booleanValue,e.booleanValue);case 2:return function(s,a){let c=ce(s.integerValue||s.doubleValue),u=ce(a.integerValue||a.doubleValue);return c<u?-1:c>u?1:c===u?0:isNaN(c)?isNaN(u)?0:-1:1}(n,e);case 3:return sy(n.timestampValue,e.timestampValue);case 4:return sy(Yi(n),Yi(e));case 5:return X(n.stringValue,e.stringValue);case 6:return function(s,a){let c=rn(s),u=rn(a);return c.compareTo(u)}(n.bytesValue,e.bytesValue);case 7:return function(s,a){let c=s.split("/"),u=a.split("/");for(let d=0;d<c.length&&d<u.length;d++){let p=X(c[d],u[d]);if(p!==0)return p}return X(c.length,u.length)}(n.referenceValue,e.referenceValue);case 8:return function(s,a){let c=X(ce(s.latitude),ce(a.latitude));return c!==0?c:X(ce(s.longitude),ce(a.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return oy(n.arrayValue,e.arrayValue);case 10:return function(s,a){var c,u,d,p;let g=s.fields||{},I=a.fields||{},R=(c=g.value)===null||c===void 0?void 0:c.arrayValue,D=(u=I.value)===null||u===void 0?void 0:u.arrayValue,O=X(((d=R?.values)===null||d===void 0?void 0:d.length)||0,((p=D?.values)===null||p===void 0?void 0:p.length)||0);return O!==0?O:oy(R,D)}(n.mapValue,e.mapValue);case 11:return function(s,a){if(s===Uo.mapValue&&a===Uo.mapValue)return 0;if(s===Uo.mapValue)return 1;if(a===Uo.mapValue)return-1;let c=s.fields||{},u=Object.keys(c),d=a.fields||{},p=Object.keys(d);u.sort(),p.sort();for(let g=0;g<u.length&&g<p.length;++g){let I=X(u[g],p[g]);if(I!==0)return I;let R=Sr(c[u[g]],d[p[g]]);if(R!==0)return R}return X(u.length,p.length)}(n.mapValue,e.mapValue);default:throw U()}}function sy(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return X(n,e);let t=Mt(n),r=Mt(e),i=X(t.seconds,r.seconds);return i!==0?i:X(t.nanos,r.nanos)}function oy(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let s=Sr(t[i],r[i]);if(s)return s}return X(t.length,r.length)}function br(n){return Xl(n)}function Xl(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){let r=Mt(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return rn(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return V.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(let s of t.values||[])i?i=!1:r+=",",r+=Xl(s);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){let r=Object.keys(t.fields||{}).sort(),i="{",s=!0;for(let a of r)s?s=!1:i+=",",i+=`${a}:${Xl(t.fields[a])}`;return i+"}"}(n.mapValue):U()}function ay(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Zl(n){return!!n&&"integerValue"in n}function Ad(n){return!!n&&"arrayValue"in n}function cy(n){return!!n&&"nullValue"in n}function uy(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Bo(n){return!!n&&"mapValue"in n}function $y(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="__vector__"}function Wi(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return jn(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Wi(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Wi(n.arrayValue.values[t]);return e}return Object.assign({},n)}function By(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var We=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Bo(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Wi(t)}setAll(e){let t=He.emptyPath(),r={},i=[];e.forEach((a,c)=>{if(!t.isImmediateParentOf(c)){let u=this.getFieldsMap(t);this.applyChanges(u,r,i),r={},i=[],t=c.popLast()}a?r[c.lastSegment()]=Wi(a):i.push(c.lastSegment())});let s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){let t=this.field(e.popLast());Bo(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return gt(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Bo(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){jn(t,(i,s)=>e[i]=s);for(let i of r)delete e[i]}clone(){return new n(Wi(this.value))}};function jy(n){let e=[];return jn(n.fields,(t,r)=>{let i=new He([t]);if(Bo(r)){let s=jy(r.mapValue).fields;if(s.length===0)e.push(i);else for(let a of s)e.push(i.child(a))}else e.push(i)}),new Xe(e)}var it=class n{constructor(e,t,r,i,s,a,c){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=s,this.data=a,this.documentState=c}static newInvalidDocument(e){return new n(e,0,q.min(),q.min(),q.min(),We.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,q.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,q.min(),q.min(),We.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,q.min(),q.min(),We.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(q.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=We.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=We.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=q.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var Rr=class{constructor(e,t){this.position=e,this.inclusive=t}};function ly(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let s=e[i],a=n.position[i];if(s.field.isKeyField()?r=V.comparator(V.fromName(a.referenceValue),t.key):r=Sr(a,t.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function hy(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!gt(n.position[t],e.position[t]))return!1;return!0}var Cr=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function Ab(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var Qo=class{},ye=class n extends Qo{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new th(e,t,r):t==="array-contains"?new ih(e,r):t==="in"?new sh(e,r):t==="not-in"?new oh(e,r):t==="array-contains-any"?new ah(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new nh(e,r):new rh(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(Sr(t,this.value)):t!==null&&Vn(this.value)===Vn(t)&&this.matchesComparison(Sr(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return U()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},st=class n extends Qo{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new n(e,t)}matches(e){return qy(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}};function qy(n){return n.op==="and"}function zy(n){return Sb(n)&&qy(n)}function Sb(n){for(let e of n.filters)if(e instanceof st)return!1;return!0}function eh(n){if(n instanceof ye)return n.field.canonicalString()+n.op.toString()+br(n.value);if(zy(n))return n.filters.map(e=>eh(e)).join(",");{let e=n.filters.map(t=>eh(t)).join(",");return`${n.op}(${e})`}}function Gy(n,e){return n instanceof ye?function(r,i){return i instanceof ye&&r.op===i.op&&r.field.isEqual(i.field)&&gt(r.value,i.value)}(n,e):n instanceof st?function(r,i){return i instanceof st&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,a,c)=>s&&Gy(a,i.filters[c]),!0):!1}(n,e):void U()}function Wy(n){return n instanceof ye?function(t){return`${t.field.canonicalString()} ${t.op} ${br(t.value)}`}(n):n instanceof st?function(t){return t.op.toString()+" {"+t.getFilters().map(Wy).join(" ,")+"}"}(n):"Filter"}var th=class extends ye{constructor(e,t,r){super(e,t,r),this.key=V.fromName(r.referenceValue)}matches(e){let t=V.comparator(e.key,this.key);return this.matchesComparison(t)}},nh=class extends ye{constructor(e,t){super(e,"in",t),this.keys=Hy("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},rh=class extends ye{constructor(e,t){super(e,"not-in",t),this.keys=Hy("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function Hy(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>V.fromName(r.referenceValue))}var ih=class extends ye{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return Ad(t)&&Xi(t.arrayValue,this.value)}},sh=class extends ye{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&Xi(this.value.arrayValue,t)}},oh=class extends ye{constructor(e,t){super(e,"not-in",t)}matches(e){if(Xi(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&!Xi(this.value.arrayValue,t)}},ah=class extends ye{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!Ad(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Xi(this.value.arrayValue,r))}};var ch=class{constructor(e,t=null,r=[],i=[],s=null,a=null,c=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=a,this.endAt=c,this.ue=null}};function dy(n,e=null,t=[],r=[],i=null,s=null,a=null){return new ch(n,e,t,r,i,s,a)}function Sd(n){let e=j(n);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>eh(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),wa(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>br(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>br(r)).join(",")),e.ue=t}return e.ue}function bd(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!Ab(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!Gy(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!hy(n.startAt,e.startAt)&&hy(n.endAt,e.endAt)}function uh(n){return V.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}var sn=class{constructor(e,t=null,r=[],i=[],s=null,a="F",c=null,u=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=a,this.startAt=c,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}};function bb(n,e,t,r,i,s,a,c){return new sn(n,e,t,r,i,s,a,c)}function Ea(n){return new sn(n)}function fy(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function Ky(n){return n.collectionGroup!==null}function Hi(n){let e=j(n);if(e.ce===null){e.ce=[];let t=new Set;for(let s of e.explicitOrderBy)e.ce.push(s),t.add(s.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let c=new Oe(He.comparator);return a.filters.forEach(u=>{u.getFlattenedFilters().forEach(d=>{d.isInequality()&&(c=c.add(d.field))})}),c})(e).forEach(s=>{t.has(s.canonicalString())||s.isKeyField()||e.ce.push(new Cr(s,r))}),t.has(He.keyField().canonicalString())||e.ce.push(new Cr(He.keyField(),r))}return e.ce}function pt(n){let e=j(n);return e.le||(e.le=Rb(e,Hi(n))),e.le}function Rb(n,e){if(n.limitType==="F")return dy(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let s=i.dir==="desc"?"asc":"desc";return new Cr(i.field,s)});let t=n.endAt?new Rr(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Rr(n.startAt.position,n.startAt.inclusive):null;return dy(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function lh(n,e){let t=n.filters.concat([e]);return new sn(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function hh(n,e,t){return new sn(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Ta(n,e){return bd(pt(n),pt(e))&&n.limitType===e.limitType}function Qy(n){return`${Sd(pt(n))}|lt:${n.limitType}`}function yr(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>Wy(i)).join(", ")}]`),wa(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>br(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>br(i)).join(",")),`Target(${r})`}(pt(n))}; limitType=${n.limitType})`}function Aa(n,e){return e.isFoundDocument()&&function(r,i){let s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):V.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(n,e)&&function(r,i){for(let s of Hi(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(n,e)&&function(r,i){for(let s of r.filters)if(!s.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(a,c,u){let d=ly(a,c,u);return a.inclusive?d<=0:d<0}(r.startAt,Hi(r),i)||r.endAt&&!function(a,c,u){let d=ly(a,c,u);return a.inclusive?d>=0:d>0}(r.endAt,Hi(r),i))}(n,e)}function Cb(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function Jy(n){return(e,t)=>{let r=!1;for(let i of Hi(n)){let s=Pb(i,e,t);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function Pb(n,e,t){let r=n.field.isKeyField()?V.comparator(e.key,t.key):function(s,a,c){let u=a.data.field(s),d=c.data.field(s);return u!==null&&d!==null?Sr(u,d):U()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return U()}}var on=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){jn(this.inner,(t,r)=>{for(let[i,s]of r)e(i,s)})}isEmpty(){return Uy(this.inner)}size(){return this.innerSize}};var Db=new fe(V.comparator);function Vt(){return Db}var Yy=new fe(V.comparator);function Gi(...n){let e=Yy;for(let t of n)e=e.insert(t.key,t);return e}function Xy(n){let e=Yy;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Nn(){return Ki()}function Zy(){return Ki()}function Ki(){return new on(n=>n.toString(),(n,e)=>n.isEqual(e))}var Nb=new fe(V.comparator),kb=new Oe(V.comparator);function H(...n){let e=kb;for(let t of n)e=e.add(t);return e}var Ob=new Oe(X);function xb(){return Ob}function Rd(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ji(e)?"-0":e}}function e_(n){return{integerValue:""+n}}function Mb(n,e){return _b(e)?e_(e):Rd(n,e)}var Pr=class{constructor(){this._=void 0}};function Vb(n,e,t){return n instanceof Ln?function(i,s){let a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&Ed(s)&&(s=Td(s)),s&&(a.fields.__previous_value__=s),{mapValue:a}}(t,e):n instanceof Fn?n_(n,e):n instanceof Un?r_(n,e):function(i,s){let a=t_(i,s),c=py(a)+py(i.Pe);return Zl(a)&&Zl(i.Pe)?e_(c):Rd(i.serializer,c)}(n,e)}function Lb(n,e,t){return n instanceof Fn?n_(n,e):n instanceof Un?r_(n,e):t}function t_(n,e){return n instanceof Dr?function(r){return Zl(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}var Ln=class extends Pr{},Fn=class extends Pr{constructor(e){super(),this.elements=e}};function n_(n,e){let t=i_(e);for(let r of n.elements)t.some(i=>gt(i,r))||t.push(r);return{arrayValue:{values:t}}}var Un=class extends Pr{constructor(e){super(),this.elements=e}};function r_(n,e){let t=i_(e);for(let r of n.elements)t=t.filter(i=>!gt(i,r));return{arrayValue:{values:t}}}var Dr=class extends Pr{constructor(e,t){super(),this.serializer=e,this.Pe=t}};function py(n){return ce(n.integerValue||n.doubleValue)}function i_(n){return Ad(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}var dh=class{constructor(e,t){this.field=e,this.transform=t}};function Fb(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof Fn&&i instanceof Fn||r instanceof Un&&i instanceof Un?Ar(r.elements,i.elements,gt):r instanceof Dr&&i instanceof Dr?gt(r.Pe,i.Pe):r instanceof Ln&&i instanceof Ln}(n.transform,e.transform)}var fh=class{constructor(e,t){this.version=e,this.transformResults=t}},Ot=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function jo(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var Nr=class{};function s_(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Zi(n.key,Ot.none()):new $n(n.key,n.data,Ot.none());{let t=n.data,r=We.empty(),i=new Oe(He.comparator);for(let s of e.fields)if(!i.has(s)){let a=t.field(s);a===null&&s.length>1&&(s=s.popLast(),a=t.field(s)),a===null?r.delete(s):r.set(s,a),i=i.add(s)}return new yt(n.key,r,new Xe(i.toArray()),Ot.none())}}function Ub(n,e,t){n instanceof $n?function(i,s,a){let c=i.value.clone(),u=gy(i.fieldTransforms,s,a.transformResults);c.setAll(u),s.convertToFoundDocument(a.version,c).setHasCommittedMutations()}(n,e,t):n instanceof yt?function(i,s,a){if(!jo(i.precondition,s))return void s.convertToUnknownDocument(a.version);let c=gy(i.fieldTransforms,s,a.transformResults),u=s.data;u.setAll(o_(i)),u.setAll(c),s.convertToFoundDocument(a.version,u).setHasCommittedMutations()}(n,e,t):function(i,s,a){s.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,t)}function Qi(n,e,t,r){return n instanceof $n?function(s,a,c,u){if(!jo(s.precondition,a))return c;let d=s.value.clone(),p=yy(s.fieldTransforms,u,a);return d.setAll(p),a.convertToFoundDocument(a.version,d).setHasLocalMutations(),null}(n,e,t,r):n instanceof yt?function(s,a,c,u){if(!jo(s.precondition,a))return c;let d=yy(s.fieldTransforms,u,a),p=a.data;return p.setAll(o_(s)),p.setAll(d),a.convertToFoundDocument(a.version,p).setHasLocalMutations(),c===null?null:c.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(g=>g.field))}(n,e,t,r):function(s,a,c){return jo(s.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):c}(n,e,t)}function $b(n,e){let t=null;for(let r of n.fieldTransforms){let i=e.data.field(r.field),s=t_(r.transform,i||null);s!=null&&(t===null&&(t=We.empty()),t.set(r.field,s))}return t||null}function my(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Ar(r,i,(s,a)=>Fb(s,a))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var $n=class extends Nr{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},yt=class extends Nr{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}};function o_(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function gy(n,e,t){let r=new Map;te(n.length===t.length);for(let i=0;i<t.length;i++){let s=n[i],a=s.transform,c=e.data.field(s.field);r.set(s.field,Lb(a,c,t[i]))}return r}function yy(n,e,t){let r=new Map;for(let i of n){let s=i.transform,a=t.data.field(i.field);r.set(i.field,Vb(s,a,e))}return r}var Zi=class extends Nr{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},ph=class extends Nr{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var mh=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let s=this.mutations[i];s.key.isEqual(e.key)&&Ub(s,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=Qi(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=Qi(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=Zy();return this.mutations.forEach(i=>{let s=e.get(i.key),a=s.overlayedDocument,c=this.applyToLocalView(a,s.mutatedFields);c=t.has(i.key)?null:c;let u=s_(a,c);u!==null&&r.set(i.key,u),a.isValidDocument()||a.convertToNoDocument(q.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),H())}isEqual(e){return this.batchId===e.batchId&&Ar(this.mutations,e.mutations,(t,r)=>my(t,r))&&Ar(this.baseMutations,e.baseMutations,(t,r)=>my(t,r))}},gh=class n{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){te(e.mutations.length===r.length);let i=function(){return Nb}(),s=e.mutations;for(let a=0;a<s.length;a++)i=i.insert(s[a].key,r[a].version);return new n(e,t,r,i)}};var yh=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var _h=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var me,J;function Bb(n){switch(n){default:return U();case C.CANCELLED:case C.UNKNOWN:case C.DEADLINE_EXCEEDED:case C.RESOURCE_EXHAUSTED:case C.INTERNAL:case C.UNAVAILABLE:case C.UNAUTHENTICATED:return!1;case C.INVALID_ARGUMENT:case C.NOT_FOUND:case C.ALREADY_EXISTS:case C.PERMISSION_DENIED:case C.FAILED_PRECONDITION:case C.ABORTED:case C.OUT_OF_RANGE:case C.UNIMPLEMENTED:case C.DATA_LOSS:return!0}}function a_(n){if(n===void 0)return xt("GRPC error has no .code"),C.UNKNOWN;switch(n){case me.OK:return C.OK;case me.CANCELLED:return C.CANCELLED;case me.UNKNOWN:return C.UNKNOWN;case me.DEADLINE_EXCEEDED:return C.DEADLINE_EXCEEDED;case me.RESOURCE_EXHAUSTED:return C.RESOURCE_EXHAUSTED;case me.INTERNAL:return C.INTERNAL;case me.UNAVAILABLE:return C.UNAVAILABLE;case me.UNAUTHENTICATED:return C.UNAUTHENTICATED;case me.INVALID_ARGUMENT:return C.INVALID_ARGUMENT;case me.NOT_FOUND:return C.NOT_FOUND;case me.ALREADY_EXISTS:return C.ALREADY_EXISTS;case me.PERMISSION_DENIED:return C.PERMISSION_DENIED;case me.FAILED_PRECONDITION:return C.FAILED_PRECONDITION;case me.ABORTED:return C.ABORTED;case me.OUT_OF_RANGE:return C.OUT_OF_RANGE;case me.UNIMPLEMENTED:return C.UNIMPLEMENTED;case me.DATA_LOSS:return C.DATA_LOSS;default:return U()}}(J=me||(me={}))[J.OK=0]="OK",J[J.CANCELLED=1]="CANCELLED",J[J.UNKNOWN=2]="UNKNOWN",J[J.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",J[J.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",J[J.NOT_FOUND=5]="NOT_FOUND",J[J.ALREADY_EXISTS=6]="ALREADY_EXISTS",J[J.PERMISSION_DENIED=7]="PERMISSION_DENIED",J[J.UNAUTHENTICATED=16]="UNAUTHENTICATED",J[J.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",J[J.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",J[J.ABORTED=10]="ABORTED",J[J.OUT_OF_RANGE=11]="OUT_OF_RANGE",J[J.UNIMPLEMENTED=12]="UNIMPLEMENTED",J[J.INTERNAL=13]="INTERNAL",J[J.UNAVAILABLE=14]="UNAVAILABLE",J[J.DATA_LOSS=15]="DATA_LOSS";var _y=null;function jb(){return new TextEncoder}var qb=new tn([4294967295,4294967295],0);function vy(n){let e=jb().encode(n),t=new kl;return t.update(e),new Uint8Array(t.digest())}function Iy(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new tn([t,r],0),new tn([i,s],0)]}var vh=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new kn(`Invalid padding: ${t}`);if(r<0)throw new kn(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new kn(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new kn(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=tn.fromNumber(this.Ie)}Ee(e,t,r){let i=e.add(t.multiply(tn.fromNumber(r)));return i.compare(qb)===1&&(i=new tn([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;let t=vy(e),[r,i]=Iy(t);for(let s=0;s<this.hashCount;s++){let a=this.Ee(r,i,s);if(!this.de(a))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),a=new n(s,i,t);return r.forEach(c=>a.insert(c)),a}insert(e){if(this.Ie===0)return;let t=vy(e),[r,i]=Iy(t);for(let s=0;s<this.hashCount;s++){let a=this.Ee(r,i,s);this.Ae(a)}}Ae(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},kn=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var Jo=class n{constructor(e,t,r,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,es.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(q.min(),i,new fe(X),Vt(),H())}},es=class n{constructor(e,t,r,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,H(),H(),H())}};var wr=class{constructor(e,t,r,i){this.Re=e,this.removedTargetIds=t,this.key=r,this.Ve=i}},Yo=class{constructor(e,t){this.targetId=e,this.me=t}},Xo=class{constructor(e,t,r=Me.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},Zo=class{constructor(){this.fe=0,this.ge=Ey(),this.pe=Me.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=H(),t=H(),r=H();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:U()}}),new es(this.pe,this.ye,e,t,r)}Ce(){this.we=!1,this.ge=Ey()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,te(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}},Ih=class{constructor(e){this.Le=e,this.Be=new Map,this.ke=Vt(),this.qe=wy(),this.Qe=new fe(X)}Ke(e){for(let t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(let t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{let r=this.Ge(t);switch(e.state){case 0:this.ze(t)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),r.De(e.resumeToken));break;default:U()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((r,i)=>{this.ze(i)&&t(i)})}He(e){let t=e.targetId,r=e.me.count,i=this.Je(t);if(i){let s=i.target;if(uh(s))if(r===0){let a=new V(s.path);this.Ue(t,a,it.newNoDocument(a,q.min()))}else te(r===1);else{let a=this.Ye(t);if(a!==r){let c=this.Ze(e),u=c?this.Xe(c,e,a):1;if(u!==0){this.je(t);let d=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,d)}_y?.et(function(p,g,I,R,D){var O,N,$,K,Q,oe;let Ve={localCacheCount:p,existenceFilterCount:g.count,databaseId:I.database,projectId:I.projectId},ee=g.unchangedNames;return ee&&(Ve.bloomFilter={applied:D===0,hashCount:(O=ee?.hashCount)!==null&&O!==void 0?O:0,bitmapLength:(K=($=(N=ee?.bits)===null||N===void 0?void 0:N.bitmap)===null||$===void 0?void 0:$.length)!==null&&K!==void 0?K:0,padding:(oe=(Q=ee?.bits)===null||Q===void 0?void 0:Q.padding)!==null&&oe!==void 0?oe:0,mightContain:E=>{var m;return(m=R?.mightContain(E))!==null&&m!==void 0&&m}}),Ve}(a,e.me,this.Le.tt(),c,u))}}}}Ze(e){let t=e.me.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=t,a,c;try{a=rn(r).toUint8Array()}catch(u){if(u instanceof Ho)return Tr("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{c=new vh(a,i,s)}catch(u){return Tr(u instanceof kn?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return c.Ie===0?null:c}Xe(e,t,r){return t.me.count===r-this.nt(e,t.targetId)?0:2}nt(e,t){let r=this.Le.getRemoteKeysForTarget(t),i=0;return r.forEach(s=>{let a=this.Le.tt(),c=`projects/${a.projectId}/databases/${a.database}/documents/${s.path.canonicalString()}`;e.mightContain(c)||(this.Ue(t,s,null),i++)}),i}rt(e){let t=new Map;this.Be.forEach((s,a)=>{let c=this.Je(a);if(c){if(s.current&&uh(c.target)){let u=new V(c.target.path);this.ke.get(u)!==null||this.it(a,u)||this.Ue(a,u,it.newNoDocument(u,e))}s.be&&(t.set(a,s.ve()),s.Ce())}});let r=H();this.qe.forEach((s,a)=>{let c=!0;a.forEachWhile(u=>{let d=this.Je(u);return!d||d.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)}),c&&(r=r.add(s))}),this.ke.forEach((s,a)=>a.setReadTime(e));let i=new Jo(e,t,this.Qe,this.ke,r);return this.ke=Vt(),this.qe=wy(),this.Qe=new fe(X),i}$e(e,t){if(!this.ze(e))return;let r=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,r),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,r){if(!this.ze(e))return;let i=this.Ge(e);this.it(e,t)?i.Fe(t,1):i.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),r&&(this.ke=this.ke.insert(t,r))}removeTarget(e){this.Be.delete(e)}Ye(e){let t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new Zo,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new Oe(X),this.qe=this.qe.insert(e,t)),t}ze(e){let t=this.Je(e)!==null;return t||M("WatchChangeAggregator","Detected inactive target",e),t}Je(e){let t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Zo),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}};function wy(){return new fe(V.comparator)}function Ey(){return new fe(V.comparator)}var zb={asc:"ASCENDING",desc:"DESCENDING"},Gb={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Wb={and:"AND",or:"OR"},wh=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function Eh(n,e){return n.useProto3Json||wa(e)?e:{value:e}}function ea(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function c_(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function Hb(n,e){return ea(n,e.toTimestamp())}function mt(n){return te(!!n),q.fromTimestamp(function(t){let r=Mt(t);return new Re(r.seconds,r.nanos)}(n))}function Cd(n,e){return Th(n,e).canonicalString()}function Th(n,e){let t=function(i){return new ue(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function u_(n){let e=ue.fromString(n);return te(p_(e)),e}function Ah(n,e){return Cd(n.databaseId,e.path)}function Fl(n,e){let t=u_(e);if(t.get(1)!==n.databaseId.projectId)throw new x(C.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new x(C.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new V(h_(t))}function l_(n,e){return Cd(n.databaseId,e)}function Kb(n){let e=u_(n);return e.length===4?ue.emptyPath():h_(e)}function Sh(n){return new ue(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function h_(n){return te(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function Ty(n,e,t){return{name:Ah(n,e),fields:t.value.mapValue.fields}}function Qb(n,e){let t;if("targetChange"in e){e.targetChange;let r=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:U()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(d,p){return d.useProto3Json?(te(p===void 0||typeof p=="string"),Me.fromBase64String(p||"")):(te(p===void 0||p instanceof Buffer||p instanceof Uint8Array),Me.fromUint8Array(p||new Uint8Array))}(n,e.targetChange.resumeToken),a=e.targetChange.cause,c=a&&function(d){let p=d.code===void 0?C.UNKNOWN:a_(d.code);return new x(p,d.message||"")}(a);t=new Xo(r,i,s,c||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=Fl(n,r.document.name),s=mt(r.document.updateTime),a=r.document.createTime?mt(r.document.createTime):q.min(),c=new We({mapValue:{fields:r.document.fields}}),u=it.newFoundDocument(i,s,a,c),d=r.targetIds||[],p=r.removedTargetIds||[];t=new wr(d,p,u.key,u)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=Fl(n,r.document),s=r.readTime?mt(r.readTime):q.min(),a=it.newNoDocument(i,s),c=r.removedTargetIds||[];t=new wr([],c,a.key,a)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=Fl(n,r.document),s=r.removedTargetIds||[];t=new wr([],s,i,null)}else{if(!("filter"in e))return U();{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:s}=r,a=new _h(i,s),c=r.targetId;t=new Yo(c,a)}}return t}function Jb(n,e){let t;if(e instanceof $n)t={update:Ty(n,e.key,e.value)};else if(e instanceof Zi)t={delete:Ah(n,e.key)};else if(e instanceof yt)t={update:Ty(n,e.key,e.data),updateMask:sR(e.fieldMask)};else{if(!(e instanceof ph))return U();t={verify:Ah(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(s,a){let c=a.transform;if(c instanceof Ln)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof Fn)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof Un)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof Dr)return{fieldPath:a.field.canonicalString(),increment:c.Pe};throw U()}(0,r))),e.precondition.isNone||(t.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:Hb(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:U()}(n,e.precondition)),t}function Yb(n,e){return n&&n.length>0?(te(e!==void 0),n.map(t=>function(i,s){let a=i.updateTime?mt(i.updateTime):mt(s);return a.isEqual(q.min())&&(a=mt(s)),new fh(a,i.transformResults||[])}(t,e))):[]}function Xb(n,e){return{documents:[l_(n,e.path)]}}function Zb(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=l_(n,i);let s=function(d){if(d.length!==0)return f_(st.create(d,"and"))}(e.filters);s&&(t.structuredQuery.where=s);let a=function(d){if(d.length!==0)return d.map(p=>function(I){return{field:_r(I.field),direction:nR(I.dir)}}(p))}(e.orderBy);a&&(t.structuredQuery.orderBy=a);let c=Eh(n,e.limit);return c!==null&&(t.structuredQuery.limit=c),e.startAt&&(t.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{_t:t,parent:i}}function eR(n){let e=Kb(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){te(r===1);let p=t.from[0];p.allDescendants?i=p.collectionId:e=e.child(p.collectionId)}let s=[];t.where&&(s=function(g){let I=d_(g);return I instanceof st&&zy(I)?I.getFilters():[I]}(t.where));let a=[];t.orderBy&&(a=function(g){return g.map(I=>function(D){return new Cr(vr(D.field),function(N){switch(N){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(D.direction))}(I))}(t.orderBy));let c=null;t.limit&&(c=function(g){let I;return I=typeof g=="object"?g.value:g,wa(I)?null:I}(t.limit));let u=null;t.startAt&&(u=function(g){let I=!!g.before,R=g.values||[];return new Rr(R,I)}(t.startAt));let d=null;return t.endAt&&(d=function(g){let I=!g.before,R=g.values||[];return new Rr(R,I)}(t.endAt)),bb(e,i,a,s,c,"F",u,d)}function tR(n,e){let t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return U()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function d_(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=vr(t.unaryFilter.field);return ye.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=vr(t.unaryFilter.field);return ye.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let s=vr(t.unaryFilter.field);return ye.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let a=vr(t.unaryFilter.field);return ye.create(a,"!=",{nullValue:"NULL_VALUE"});default:return U()}}(n):n.fieldFilter!==void 0?function(t){return ye.create(vr(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return U()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return st.create(t.compositeFilter.filters.map(r=>d_(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return U()}}(t.compositeFilter.op))}(n):U()}function nR(n){return zb[n]}function rR(n){return Gb[n]}function iR(n){return Wb[n]}function _r(n){return{fieldPath:n.canonicalString()}}function vr(n){return He.fromServerFormat(n.fieldPath)}function f_(n){return n instanceof ye?function(t){if(t.op==="=="){if(uy(t.value))return{unaryFilter:{field:_r(t.field),op:"IS_NAN"}};if(cy(t.value))return{unaryFilter:{field:_r(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(uy(t.value))return{unaryFilter:{field:_r(t.field),op:"IS_NOT_NAN"}};if(cy(t.value))return{unaryFilter:{field:_r(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:_r(t.field),op:rR(t.op),value:t.value}}}(n):n instanceof st?function(t){let r=t.getFilters().map(i=>f_(i));return r.length===1?r[0]:{compositeFilter:{op:iR(t.op),filters:r}}}(n):U()}function sR(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function p_(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var ts=class n{constructor(e,t,r,i,s=q.min(),a=q.min(),c=Me.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=c,this.expectedCount=u}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var bh=class{constructor(e){this.ct=e}};function oR(n){let e=eR({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?hh(e,e.limit,"L"):e}var ta=class{constructor(){}It(e,t){this.Tt(e,t),t.Et()}Tt(e,t){if("nullValue"in e)this.dt(t,5);else if("booleanValue"in e)this.dt(t,10),t.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(t,15),t.At(ce(e.integerValue));else if("doubleValue"in e){let r=ce(e.doubleValue);isNaN(r)?this.dt(t,13):(this.dt(t,15),Ji(r)?t.At(0):t.At(r))}else if("timestampValue"in e){let r=e.timestampValue;this.dt(t,20),typeof r=="string"&&(r=Mt(r)),t.Rt(`${r.seconds||""}`),t.At(r.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,t),this.ft(t);else if("bytesValue"in e)this.dt(t,30),t.gt(rn(e.bytesValue)),this.ft(t);else if("referenceValue"in e)this.yt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.dt(t,45),t.At(r.latitude||0),t.At(r.longitude||0)}else"mapValue"in e?By(e)?this.dt(t,Number.MAX_SAFE_INTEGER):$y(e)?this.wt(e.mapValue,t):(this.St(e.mapValue,t),this.ft(t)):"arrayValue"in e?(this.bt(e.arrayValue,t),this.ft(t)):U()}Vt(e,t){this.dt(t,25),this.Dt(e,t)}Dt(e,t){t.Rt(e)}St(e,t){let r=e.fields||{};this.dt(t,55);for(let i of Object.keys(r))this.Vt(i,t),this.Tt(r[i],t)}wt(e,t){var r,i;let s=e.fields||{};this.dt(t,53);let a="value",c=((i=(r=s[a].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.dt(t,15),t.At(ce(c)),this.Vt(a,t),this.Tt(s[a],t)}bt(e,t){let r=e.values||[];this.dt(t,50);for(let i of r)this.Tt(i,t)}yt(e,t){this.dt(t,37),V.fromName(e).path.forEach(r=>{this.dt(t,60),this.Dt(r,t)})}dt(e,t){e.At(t)}ft(e){e.At(2)}};ta.vt=new ta;var Rh=class{constructor(){this.un=new Ch}addToCollectionParentIndex(e,t){return this.un.add(t),P.resolve()}getCollectionParents(e,t){return P.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return P.resolve()}deleteFieldIndex(e,t){return P.resolve()}deleteAllFieldIndexes(e){return P.resolve()}createTargetIndexes(e,t){return P.resolve()}getDocumentsMatchingTarget(e,t){return P.resolve(null)}getIndexType(e,t){return P.resolve(0)}getFieldIndexes(e,t){return P.resolve([])}getNextCollectionGroupToUpdate(e){return P.resolve(null)}getMinOffset(e,t){return P.resolve(Mn.min())}getMinOffsetFromCollectionGroup(e,t){return P.resolve(Mn.min())}updateCollectionGroup(e,t,r){return P.resolve()}updateIndexEntries(e,t){return P.resolve()}},Ch=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Oe(ue.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Oe(ue.comparator)).toArray()}};var vD=new Uint8Array(0);var dt=class n{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};dt.DEFAULT_COLLECTION_PERCENTILE=10,dt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,dt.DEFAULT=new dt(41943040,dt.DEFAULT_COLLECTION_PERCENTILE,dt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),dt.DISABLED=new dt(-1,0,0);var ns=class n{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new n(0)}static kn(){return new n(-1)}};var Ph=class{constructor(){this.changes=new on(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,it.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?P.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var Dh=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var Nh=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&Qi(r.mutation,i,Xe.empty(),Re.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,H()).next(()=>r))}getLocalViewOfDocuments(e,t,r=H()){let i=Nn();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(s=>{let a=Gi();return s.forEach((c,u)=>{a=a.insert(c,u.overlayedDocument)}),a}))}getOverlayedDocuments(e,t){let r=Nn();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,H()))}populateOverlays(e,t,r){let i=[];return r.forEach(s=>{t.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((a,c)=>{t.set(a,c)})})}computeViews(e,t,r,i){let s=Vt(),a=Ki(),c=function(){return Ki()}();return t.forEach((u,d)=>{let p=r.get(d.key);i.has(d.key)&&(p===void 0||p.mutation instanceof yt)?s=s.insert(d.key,d):p!==void 0?(a.set(d.key,p.mutation.getFieldMask()),Qi(p.mutation,d,p.mutation.getFieldMask(),Re.now())):a.set(d.key,Xe.empty())}),this.recalculateAndSaveOverlays(e,s).next(u=>(u.forEach((d,p)=>a.set(d,p)),t.forEach((d,p)=>{var g;return c.set(d,new Dh(p,(g=a.get(d))!==null&&g!==void 0?g:null))}),c))}recalculateAndSaveOverlays(e,t){let r=Ki(),i=new fe((a,c)=>a-c),s=H();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(a=>{for(let c of a)c.keys().forEach(u=>{let d=t.get(u);if(d===null)return;let p=r.get(u)||Xe.empty();p=c.applyToLocalView(d,p),r.set(u,p);let g=(i.get(c.batchId)||H()).add(u);i=i.insert(c.batchId,g)})}).next(()=>{let a=[],c=i.getReverseIterator();for(;c.hasNext();){let u=c.getNext(),d=u.key,p=u.value,g=Zy();p.forEach(I=>{if(!s.has(I)){let R=s_(t.get(I),r.get(I));R!==null&&g.set(I,R),s=s.add(I)}}),a.push(this.documentOverlayCache.saveOverlays(e,d,g))}return P.waitFor(a)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(a){return V.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Ky(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(s=>{let a=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-s.size):P.resolve(Nn()),c=-1,u=s;return a.next(d=>P.forEach(d,(p,g)=>(c<g.largestBatchId&&(c=g.largestBatchId),s.get(p)?P.resolve():this.remoteDocumentCache.getEntry(e,p).next(I=>{u=u.insert(p,I)}))).next(()=>this.populateOverlays(e,d,s)).next(()=>this.computeViews(e,u,d,H())).next(p=>({batchId:c,changes:Xy(p)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new V(t)).next(r=>{let i=Gi();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let s=t.collectionGroup,a=Gi();return this.indexManager.getCollectionParents(e,s).next(c=>P.forEach(c,u=>{let d=function(g,I){return new sn(I,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt)}(t,u.child(s));return this.getDocumentsMatchingCollectionQuery(e,d,r,i).next(p=>{p.forEach((g,I)=>{a=a.insert(g,I)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,t,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(a=>(s=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,s,i))).next(a=>{s.forEach((u,d)=>{let p=d.getKey();a.get(p)===null&&(a=a.insert(p,it.newInvalidDocument(p)))});let c=Gi();return a.forEach((u,d)=>{let p=s.get(u);p!==void 0&&Qi(p.mutation,d,Xe.empty(),Re.now()),Aa(t,d)&&(c=c.insert(u,d))}),c})}};var kh=class{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return P.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:mt(i.createTime)}}(t)),P.resolve()}getNamedQuery(e,t){return P.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,function(i){return{name:i.name,query:oR(i.bundledQuery),readTime:mt(i.readTime)}}(t)),P.resolve()}};var Oh=class{constructor(){this.overlays=new fe(V.comparator),this.Ir=new Map}getOverlay(e,t){return P.resolve(this.overlays.get(t))}getOverlays(e,t){let r=Nn();return P.forEach(t,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,s)=>{this.ht(e,t,s)}),P.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.Ir.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(r)),P.resolve()}getOverlaysForCollection(e,t,r){let i=Nn(),s=t.length+1,a=new V(t.child("")),c=this.overlays.getIteratorFrom(a);for(;c.hasNext();){let u=c.getNext().value,d=u.getKey();if(!t.isPrefixOf(d.path))break;d.path.length===s&&u.largestBatchId>r&&i.set(u.getKey(),u)}return P.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new fe((d,p)=>d-p),a=this.overlays.getIterator();for(;a.hasNext();){let d=a.getNext().value;if(d.getKey().getCollectionGroup()===t&&d.largestBatchId>r){let p=s.get(d.largestBatchId);p===null&&(p=Nn(),s=s.insert(d.largestBatchId,p)),p.set(d.getKey(),d)}}let c=Nn(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((d,p)=>c.set(d,p)),!(c.size()>=i)););return P.resolve(c)}ht(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let a=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,a)}this.overlays=this.overlays.insert(r.key,new yh(t,r));let s=this.Ir.get(t);s===void 0&&(s=H(),this.Ir.set(t,s)),this.Ir.set(t,s.add(r.key))}};var xh=class{constructor(){this.sessionToken=Me.EMPTY_BYTE_STRING}getSessionToken(e){return P.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,P.resolve()}};var rs=class{constructor(){this.Tr=new Oe(ge.Er),this.dr=new Oe(ge.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){let r=new ge(e,t);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Vr(new ge(e,t))}mr(e,t){e.forEach(r=>this.removeReference(r,t))}gr(e){let t=new V(new ue([])),r=new ge(t,e),i=new ge(t,e+1),s=[];return this.dr.forEachInRange([r,i],a=>{this.Vr(a),s.push(a.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){let t=new V(new ue([])),r=new ge(t,e),i=new ge(t,e+1),s=H();return this.dr.forEachInRange([r,i],a=>{s=s.add(a.key)}),s}containsKey(e){let t=new ge(e,0),r=this.Tr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},ge=class{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return V.comparator(e.key,t.key)||X(e.wr,t.wr)}static Ar(e,t){return X(e.wr,t.wr)||V.comparator(e.key,t.key)}};var Mh=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new Oe(ge.Er)}checkEmpty(e){return P.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let a=new mh(s,t,r,i);this.mutationQueue.push(a);for(let c of i)this.br=this.br.add(new ge(c.key,s)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return P.resolve(a)}lookupMutationBatch(e,t){return P.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.vr(r),s=i<0?0:i;return P.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return P.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return P.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new ge(t,0),i=new ge(t,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([r,i],a=>{let c=this.Dr(a.wr);s.push(c)}),P.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Oe(X);return t.forEach(i=>{let s=new ge(i,0),a=new ge(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,a],c=>{r=r.add(c.wr)})}),P.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,s=r;V.isDocumentKey(s)||(s=s.child(""));let a=new ge(new V(s),0),c=new Oe(X);return this.br.forEachWhile(u=>{let d=u.key.path;return!!r.isPrefixOf(d)&&(d.length===i&&(c=c.add(u.wr)),!0)},a),P.resolve(this.Cr(c))}Cr(e){let t=[];return e.forEach(r=>{let i=this.Dr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){te(this.Fr(t.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return P.forEach(t.mutations,i=>{let s=new ge(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,t){let r=new ge(t,0),i=this.br.firstAfterOrEqual(r);return P.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,P.resolve()}Fr(e,t){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){let t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var Vh=class{constructor(e){this.Mr=e,this.docs=function(){return new fe(V.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),s=i?i.size:0,a=this.Mr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:a}),this.size+=a-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return P.resolve(r?r.document.mutableCopy():it.newInvalidDocument(t))}getEntries(e,t){let r=Vt();return t.forEach(i=>{let s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():it.newInvalidDocument(i))}),P.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let s=Vt(),a=t.path,c=new V(a.child("")),u=this.docs.getIteratorFrom(c);for(;u.hasNext();){let{key:d,value:{document:p}}=u.getNext();if(!a.isPrefixOf(d.path))break;d.path.length>a.length+1||mb(pb(p),r)<=0||(i.has(p.key)||Aa(t,p))&&(s=s.insert(p.key,p.mutableCopy()))}return P.resolve(s)}getAllFromCollectionGroup(e,t,r,i){U()}Or(e,t){return P.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new Lh(this)}getSize(e){return P.resolve(this.size)}},Lh=class extends Ph{constructor(e){super(),this.cr=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),P.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}};var Fh=class{constructor(e){this.persistence=e,this.Nr=new on(t=>Sd(t),bd),this.lastRemoteSnapshotVersion=q.min(),this.highestTargetId=0,this.Lr=0,this.Br=new rs,this.targetCount=0,this.kr=ns.Bn()}forEachTarget(e,t){return this.Nr.forEach((r,i)=>t(i)),P.resolve()}getLastRemoteSnapshotVersion(e){return P.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return P.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),P.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Lr&&(this.Lr=t),P.resolve()}Kn(e){this.Nr.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.kr=new ns(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,P.resolve()}updateTargetData(e,t){return this.Kn(t),P.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,P.resolve()}removeTargets(e,t,r){let i=0,s=[];return this.Nr.forEach((a,c)=>{c.sequenceNumber<=t&&r.get(c.targetId)===null&&(this.Nr.delete(a),s.push(this.removeMatchingKeysForTargetId(e,c.targetId)),i++)}),P.waitFor(s).next(()=>i)}getTargetCount(e){return P.resolve(this.targetCount)}getTargetData(e,t){let r=this.Nr.get(t)||null;return P.resolve(r)}addMatchingKeys(e,t,r){return this.Br.Rr(t,r),P.resolve()}removeMatchingKeys(e,t,r){this.Br.mr(t,r);let i=this.persistence.referenceDelegate,s=[];return i&&t.forEach(a=>{s.push(i.markPotentiallyOrphaned(e,a))}),P.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),P.resolve()}getMatchingKeysForTargetId(e,t){let r=this.Br.yr(t);return P.resolve(r)}containsKey(e,t){return P.resolve(this.Br.containsKey(t))}};var Uh=class{constructor(e,t){this.qr={},this.overlays={},this.Qr=new Fy(0),this.Kr=!1,this.Kr=!0,this.$r=new xh,this.referenceDelegate=e(this),this.Ur=new Fh(this),this.indexManager=new Rh,this.remoteDocumentCache=function(i){return new Vh(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new bh(t),this.Gr=new kh(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Oh,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.qr[e.toKey()];return r||(r=new Mh(t,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,r){M("MemoryPersistence","Starting transaction:",e);let i=new $h(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(s=>this.referenceDelegate.jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Hr(e,t){return P.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,t)))}},$h=class extends Jl{constructor(e){super(),this.currentSequenceNumber=e}},Bh=class n{constructor(e){this.persistence=e,this.Jr=new rs,this.Yr=null}static Zr(e){return new n(e)}get Xr(){if(this.Yr)return this.Yr;throw U()}addReference(e,t,r){return this.Jr.addReference(r,t),this.Xr.delete(r.toString()),P.resolve()}removeReference(e,t,r){return this.Jr.removeReference(r,t),this.Xr.add(r.toString()),P.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),P.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach(i=>this.Xr.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(s=>this.Xr.add(s.toString()))}).next(()=>r.removeTargetData(e,t))}zr(){this.Yr=new Set}jr(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return P.forEach(this.Xr,r=>{let i=V.fromPath(r);return this.ei(e,i).next(s=>{s||t.removeEntry(i,q.min())})}).next(()=>(this.Yr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ei(e,t).next(r=>{r?this.Xr.delete(t.toString()):this.Xr.add(t.toString())})}Wr(e){return 0}ei(e,t){return P.or([()=>P.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}};var jh=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.$i=r,this.Ui=i}static Wi(e,t){let r=H(),i=H();for(let s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new n(e,t.fromCache,r,i)}};var qh=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var zh=class{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return $m()?8:yb(we())>0?6:4}()}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,r,i){let s={result:null};return this.Yi(e,t).next(a=>{s.result=a}).next(()=>{if(!s.result)return this.Zi(e,t,i,r).next(a=>{s.result=a})}).next(()=>{if(s.result)return;let a=new qh;return this.Xi(e,t,a).next(c=>{if(s.result=c,this.zi)return this.es(e,t,a,c.size)})}).next(()=>s.result)}es(e,t,r,i){return r.documentReadCount<this.ji?(zi()<=W.DEBUG&&M("QueryEngine","SDK will not create cache indexes for query:",yr(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),P.resolve()):(zi()<=W.DEBUG&&M("QueryEngine","Query:",yr(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(zi()<=W.DEBUG&&M("QueryEngine","The SDK decides to create cache indexes for query:",yr(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,pt(t))):P.resolve())}Yi(e,t){if(fy(t))return P.resolve(null);let r=pt(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=hh(t,null,"F"),r=pt(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{let a=H(...s);return this.Ji.getDocuments(e,a).next(c=>this.indexManager.getMinOffset(e,r).next(u=>{let d=this.ts(t,c);return this.ns(t,d,a,u.readTime)?this.Yi(e,hh(t,null,"F")):this.rs(e,d,t,u)}))})))}Zi(e,t,r,i){return fy(t)||i.isEqual(q.min())?P.resolve(null):this.Ji.getDocuments(e,r).next(s=>{let a=this.ts(t,s);return this.ns(t,a,r,i)?P.resolve(null):(zi()<=W.DEBUG&&M("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),yr(t)),this.rs(e,a,t,fb(i,-1)).next(c=>c))})}ts(e,t){let r=new Oe(Jy(e));return t.forEach((i,s)=>{Aa(e,s)&&(r=r.add(s))}),r}ns(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let s=e.limitType==="F"?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Xi(e,t,r){return zi()<=W.DEBUG&&M("QueryEngine","Using full collection scan to execute query:",yr(t)),this.Ji.getDocumentsMatchingQuery(e,t,Mn.min(),r)}rs(e,t,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(s=>(t.forEach(a=>{s=s.insert(a.key,a)}),s))}};var Gh=class{constructor(e,t,r,i){this.persistence=e,this.ss=t,this.serializer=i,this.os=new fe(X),this._s=new on(s=>Sd(s),bd),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Nh(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.os))}};function aR(n,e,t,r){return new Gh(n,e,t,r)}function m_(n,e){return y(this,null,function*(){let t=j(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,t.ls(e),t.mutationQueue.getAllMutationBatches(r))).next(s=>{let a=[],c=[],u=H();for(let d of i){a.push(d.batchId);for(let p of d.mutations)u=u.add(p.key)}for(let d of s){c.push(d.batchId);for(let p of d.mutations)u=u.add(p.key)}return t.localDocuments.getDocuments(r,u).next(d=>({hs:d,removedBatchIds:a,addedBatchIds:c}))})})})}function cR(n,e){let t=j(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),s=t.cs.newChangeBuffer({trackRemovals:!0});return function(c,u,d,p){let g=d.batch,I=g.keys(),R=P.resolve();return I.forEach(D=>{R=R.next(()=>p.getEntry(u,D)).next(O=>{let N=d.docVersions.get(D);te(N!==null),O.version.compareTo(N)<0&&(g.applyToRemoteDocument(O,d),O.isValidDocument()&&(O.setReadTime(d.commitVersion),p.addEntry(O)))})}),R.next(()=>c.mutationQueue.removeMutationBatch(u,g))}(t,r,e,s).next(()=>s.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(c){let u=H();for(let d=0;d<c.mutationResults.length;++d)c.mutationResults[d].transformResults.length>0&&(u=u.add(c.batch.mutations[d].key));return u}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function g_(n){let e=j(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ur.getLastRemoteSnapshotVersion(t))}function uR(n,e){let t=j(n),r=e.snapshotVersion,i=t.os;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{let a=t.cs.newChangeBuffer({trackRemovals:!0});i=t.os;let c=[];e.targetChanges.forEach((p,g)=>{let I=i.get(g);if(!I)return;c.push(t.Ur.removeMatchingKeys(s,p.removedDocuments,g).next(()=>t.Ur.addMatchingKeys(s,p.addedDocuments,g)));let R=I.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(g)!==null?R=R.withResumeToken(Me.EMPTY_BYTE_STRING,q.min()).withLastLimboFreeSnapshotVersion(q.min()):p.resumeToken.approximateByteSize()>0&&(R=R.withResumeToken(p.resumeToken,r)),i=i.insert(g,R),function(O,N,$){return O.resumeToken.approximateByteSize()===0||N.snapshotVersion.toMicroseconds()-O.snapshotVersion.toMicroseconds()>=3e8?!0:$.addedDocuments.size+$.modifiedDocuments.size+$.removedDocuments.size>0}(I,R,p)&&c.push(t.Ur.updateTargetData(s,R))});let u=Vt(),d=H();if(e.documentUpdates.forEach(p=>{e.resolvedLimboDocuments.has(p)&&c.push(t.persistence.referenceDelegate.updateLimboDocument(s,p))}),c.push(lR(s,a,e.documentUpdates).next(p=>{u=p.Ps,d=p.Is})),!r.isEqual(q.min())){let p=t.Ur.getLastRemoteSnapshotVersion(s).next(g=>t.Ur.setTargetsMetadata(s,s.currentSequenceNumber,r));c.push(p)}return P.waitFor(c).next(()=>a.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,u,d)).next(()=>u)}).then(s=>(t.os=i,s))}function lR(n,e,t){let r=H(),i=H();return t.forEach(s=>r=r.add(s)),e.getEntries(n,r).next(s=>{let a=Vt();return t.forEach((c,u)=>{let d=s.get(c);u.isFoundDocument()!==d.isFoundDocument()&&(i=i.add(c)),u.isNoDocument()&&u.version.isEqual(q.min())?(e.removeEntry(c,u.readTime),a=a.insert(c,u)):!d.isValidDocument()||u.version.compareTo(d.version)>0||u.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(u),a=a.insert(c,u)):M("LocalStore","Ignoring outdated watch update for ",c,". Current version:",d.version," Watch version:",u.version)}),{Ps:a,Is:i}})}function hR(n,e){let t=j(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function dR(n,e){let t=j(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Ur.getTargetData(r,e).next(s=>s?(i=s,P.resolve(i)):t.Ur.allocateTargetId(r).next(a=>(i=new ts(e,a,"TargetPurposeListen",r.currentSequenceNumber),t.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.os=t.os.insert(r.targetId,r),t._s.set(e,r.targetId)),r})}function Wh(n,e,t){return y(this,null,function*(){let r=j(n),i=r.os.get(e),s=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",s,a=>r.persistence.referenceDelegate.removeTarget(a,i)))}catch(a){if(!ds(a))throw a;M("LocalStore",`Failed to update sequence numbers for target ${e}: ${a}`)}r.os=r.os.remove(e),r._s.delete(i.target)})}function Ay(n,e,t){let r=j(n),i=q.min(),s=H();return r.persistence.runTransaction("Execute query","readwrite",a=>function(u,d,p){let g=j(u),I=g._s.get(p);return I!==void 0?P.resolve(g.os.get(I)):g.Ur.getTargetData(d,p)}(r,a,pt(e)).next(c=>{if(c)return i=c.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(a,c.targetId).next(u=>{s=u})}).next(()=>r.ss.getDocumentsMatchingQuery(a,e,t?i:q.min(),t?s:H())).next(c=>(fR(r,Cb(e),c),{documents:c,Ts:s})))}function fR(n,e,t){let r=n.us.get(e)||q.min();t.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),n.us.set(e,r)}var na=class{constructor(){this.activeTargetIds=xb()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var Hh=class{constructor(){this.so=new na,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,r){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new na,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var Kh=class{_o(e){}shutdown(){}};var ra=class{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){M("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.ho)e(0)}lo(){M("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var $o=null;function Ul(){return $o===null?$o=function(){return 268435456+Math.round(2147483648*Math.random())}():$o++,"0x"+$o.toString(16)}var pR={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var Qh=class{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}};var ke="WebChannelConnection",Jh=class extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;let r=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+t.host,this.vo=`projects/${i}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Fo(){return!1}Mo(t,r,i,s,a){let c=Ul(),u=this.xo(t,r.toUriEncodedString());M("RestConnection",`Sending RPC '${t}' ${c}:`,u,i);let d={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(d,s,a),this.No(t,u,d,i).then(p=>(M("RestConnection",`Received RPC '${t}' ${c}: `,p),p),p=>{throw Tr("RestConnection",`RPC '${t}' ${c} failed with error: `,p,"url: ",u,"request:",i),p})}Lo(t,r,i,s,a,c){return this.Mo(t,r,i,s,a)}Oo(t,r,i){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Mr}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,a)=>t[a]=s),i&&i.headers.forEach((s,a)=>t[a]=s)}xo(t,r){let i=pR[t];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,r,i){let s=Ul();return new Promise((a,c)=>{let u=new Ol;u.setWithCredentials(!0),u.listenOnce(xl.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case qi.NO_ERROR:let p=u.getResponseJson();M(ke,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(p)),a(p);break;case qi.TIMEOUT:M(ke,`RPC '${e}' ${s} timed out`),c(new x(C.DEADLINE_EXCEEDED,"Request time out"));break;case qi.HTTP_ERROR:let g=u.getStatus();if(M(ke,`RPC '${e}' ${s} failed with status:`,g,"response text:",u.getResponseText()),g>0){let I=u.getResponseJson();Array.isArray(I)&&(I=I[0]);let R=I?.error;if(R&&R.status&&R.message){let D=function(N){let $=N.toLowerCase().replace(/_/g,"-");return Object.values(C).indexOf($)>=0?$:C.UNKNOWN}(R.status);c(new x(D,R.message))}else c(new x(C.UNKNOWN,"Server responded with status "+u.getStatus()))}else c(new x(C.UNAVAILABLE,"Connection failed."));break;default:U()}}finally{M(ke,`RPC '${e}' ${s} completed.`)}});let d=JSON.stringify(i);M(ke,`RPC '${e}' ${s} sending request:`,i),u.send(t,"POST",d,r,15)})}Bo(e,t,r){let i=Ul(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=Ll(),c=Vl(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(u.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Oo(u.initMessageHeaders,t,r),u.encodeInitMessageHeaders=!0;let p=s.join("");M(ke,`Creating RPC '${e}' stream ${i}: ${p}`,u);let g=a.createWebChannel(p,u),I=!1,R=!1,D=new Qh({Io:N=>{R?M(ke,`Not sending because RPC '${e}' stream ${i} is closed:`,N):(I||(M(ke,`Opening RPC '${e}' stream ${i} transport.`),g.open(),I=!0),M(ke,`RPC '${e}' stream ${i} sending:`,N),g.send(N))},To:()=>g.close()}),O=(N,$,K)=>{N.listen($,Q=>{try{K(Q)}catch(oe){setTimeout(()=>{throw oe},0)}})};return O(g,gr.EventType.OPEN,()=>{R||(M(ke,`RPC '${e}' stream ${i} transport opened.`),D.yo())}),O(g,gr.EventType.CLOSE,()=>{R||(R=!0,M(ke,`RPC '${e}' stream ${i} transport closed`),D.So())}),O(g,gr.EventType.ERROR,N=>{R||(R=!0,Tr(ke,`RPC '${e}' stream ${i} transport errored:`,N),D.So(new x(C.UNAVAILABLE,"The operation could not be completed")))}),O(g,gr.EventType.MESSAGE,N=>{var $;if(!R){let K=N.data[0];te(!!K);let Q=K,oe=Q.error||(($=Q[0])===null||$===void 0?void 0:$.error);if(oe){M(ke,`RPC '${e}' stream ${i} received error:`,oe);let Ve=oe.status,ee=function(v){let w=me[v];if(w!==void 0)return a_(w)}(Ve),E=oe.message;ee===void 0&&(ee=C.INTERNAL,E="Unknown error status: "+Ve+" with message "+oe.message),R=!0,D.So(new x(ee,E)),g.close()}else M(ke,`RPC '${e}' stream ${i} received:`,K),D.bo(K)}}),O(c,Ml.STAT_EVENT,N=>{N.stat===Fo.PROXY?M(ke,`RPC '${e}' stream ${i} detected buffering proxy`):N.stat===Fo.NOPROXY&&M(ke,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{D.wo()},0),D}};function $l(){return typeof document<"u"?document:null}function Sa(n){return new wh(n,!0)}var ia=class{constructor(e,t,r=1e3,i=1.5,s=6e4){this.ui=e,this.timerId=t,this.ko=r,this.qo=i,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();let t=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,t-r);i>0&&M("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}};var sa=class{constructor(e,t,r,i,s,a,c,u){this.ui=e,this.Ho=r,this.Jo=i,this.connection=s,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=c,this.listener=u,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new ia(e,t)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}stop(){return y(this,null,function*(){this.n_()&&(yield this.close(0))})}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}__(){return y(this,null,function*(){if(this.r_())return this.close(0)})}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}close(e,t){return y(this,null,function*(){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():t&&t.code===C.RESOURCE_EXHAUSTED?(xt(t.toString()),xt("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):t&&t.code===C.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.mo(t)})}l_(){}auth(){this.state=1;let e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===t&&this.P_(r,i)},r=>{e(()=>{let i=new x(C.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,t){let r=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(()=>y(this,null,function*(){this.state=0,this.start()}))}I_(e){return M("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget(()=>this.Yo===e?t():(M("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},Yh=class extends sa{constructor(e,t,r,i,s,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,a),this.serializer=s}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();let t=Qb(this.serializer,e),r=function(s){if(!("targetChange"in s))return q.min();let a=s.targetChange;return a.targetIds&&a.targetIds.length?q.min():a.readTime?mt(a.readTime):q.min()}(e);return this.listener.d_(t,r)}A_(e){let t={};t.database=Sh(this.serializer),t.addTarget=function(s,a){let c,u=a.target;if(c=uh(u)?{documents:Xb(s,u)}:{query:Zb(s,u)._t},c.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){c.resumeToken=c_(s,a.resumeToken);let d=Eh(s,a.expectedCount);d!==null&&(c.expectedCount=d)}else if(a.snapshotVersion.compareTo(q.min())>0){c.readTime=ea(s,a.snapshotVersion.toTimestamp());let d=Eh(s,a.expectedCount);d!==null&&(c.expectedCount=d)}return c}(this.serializer,e);let r=tR(this.serializer,e);r&&(t.labels=r),this.a_(t)}R_(e){let t={};t.database=Sh(this.serializer),t.removeTarget=e,this.a_(t)}},Xh=class extends sa{constructor(e,t,r,i,s,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,a),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return te(!!e.streamToken),this.lastStreamToken=e.streamToken,te(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){te(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();let t=Yb(e.writeResults,e.commitTime),r=mt(e.commitTime);return this.listener.g_(r,t)}p_(){let e={};e.database=Sh(this.serializer),this.a_(e)}m_(e){let t={streamToken:this.lastStreamToken,writes:e.map(r=>Jb(this.serializer,r))};this.a_(t)}};var Zh=class extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new x(C.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Mo(e,Th(t,r),i,s,a)).catch(s=>{throw s.name==="FirebaseError"?(s.code===C.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new x(C.UNKNOWN,s.toString())})}Lo(e,t,r,i,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,c])=>this.connection.Lo(e,Th(t,r),i,a,c,s)).catch(a=>{throw a.name==="FirebaseError"?(a.code===C.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new x(C.UNKNOWN,a.toString())})}terminate(){this.y_=!0,this.connection.terminate()}},ed=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(xt(t),this.D_=!1):M("OnlineStateTracker",t)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}};var td=class{constructor(e,t,r,i,s){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(a=>{r.enqueueAndForget(()=>y(this,null,function*(){qn(this)&&(M("RemoteStore","Restarting streams for network reachability change."),yield function(u){return y(this,null,function*(){let d=j(u);d.L_.add(4),yield fs(d),d.q_.set("Unknown"),d.L_.delete(4),yield ba(d)})}(this))}))}),this.q_=new ed(r,i)}};function ba(n){return y(this,null,function*(){if(qn(n))for(let e of n.B_)yield e(!0)})}function fs(n){return y(this,null,function*(){for(let e of n.B_)yield e(!1)})}function y_(n,e){let t=j(n);t.N_.has(e.targetId)||(t.N_.set(e.targetId,e),kd(t)?Nd(t):Vr(t).r_()&&Dd(t,e))}function Pd(n,e){let t=j(n),r=Vr(t);t.N_.delete(e),r.r_()&&__(t,e),t.N_.size===0&&(r.r_()?r.o_():qn(t)&&t.q_.set("Unknown"))}function Dd(n,e){if(n.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(q.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Vr(n).A_(e)}function __(n,e){n.Q_.xe(e),Vr(n).R_(e)}function Nd(n){n.Q_=new Ih({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>n.N_.get(e)||null,tt:()=>n.datastore.serializer.databaseId}),Vr(n).start(),n.q_.v_()}function kd(n){return qn(n)&&!Vr(n).n_()&&n.N_.size>0}function qn(n){return j(n).L_.size===0}function v_(n){n.Q_=void 0}function mR(n){return y(this,null,function*(){n.q_.set("Online")})}function gR(n){return y(this,null,function*(){n.N_.forEach((e,t)=>{Dd(n,e)})})}function yR(n,e){return y(this,null,function*(){v_(n),kd(n)?(n.q_.M_(e),Nd(n)):n.q_.set("Unknown")})}function _R(n,e,t){return y(this,null,function*(){if(n.q_.set("Online"),e instanceof Xo&&e.state===2&&e.cause)try{yield function(i,s){return y(this,null,function*(){let a=s.cause;for(let c of s.targetIds)i.N_.has(c)&&(yield i.remoteSyncer.rejectListen(c,a),i.N_.delete(c),i.Q_.removeTarget(c))})}(n,e)}catch(r){M("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield oa(n,r)}else if(e instanceof wr?n.Q_.Ke(e):e instanceof Yo?n.Q_.He(e):n.Q_.We(e),!t.isEqual(q.min()))try{let r=yield g_(n.localStore);t.compareTo(r)>=0&&(yield function(s,a){let c=s.Q_.rt(a);return c.targetChanges.forEach((u,d)=>{if(u.resumeToken.approximateByteSize()>0){let p=s.N_.get(d);p&&s.N_.set(d,p.withResumeToken(u.resumeToken,a))}}),c.targetMismatches.forEach((u,d)=>{let p=s.N_.get(u);if(!p)return;s.N_.set(u,p.withResumeToken(Me.EMPTY_BYTE_STRING,p.snapshotVersion)),__(s,u);let g=new ts(p.target,u,d,p.sequenceNumber);Dd(s,g)}),s.remoteSyncer.applyRemoteEvent(c)}(n,t))}catch(r){M("RemoteStore","Failed to raise snapshot:",r),yield oa(n,r)}})}function oa(n,e,t){return y(this,null,function*(){if(!ds(e))throw e;n.L_.add(1),yield fs(n),n.q_.set("Offline"),t||(t=()=>g_(n.localStore)),n.asyncQueue.enqueueRetryable(()=>y(this,null,function*(){M("RemoteStore","Retrying IndexedDB access"),yield t(),n.L_.delete(1),yield ba(n)}))})}function I_(n,e){return e().catch(t=>oa(n,t,e))}function Ra(n){return y(this,null,function*(){let e=j(n),t=an(e),r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;vR(e);)try{let i=yield hR(e.localStore,r);if(i===null){e.O_.length===0&&t.o_();break}r=i.batchId,IR(e,i)}catch(i){yield oa(e,i)}w_(e)&&E_(e)})}function vR(n){return qn(n)&&n.O_.length<10}function IR(n,e){n.O_.push(e);let t=an(n);t.r_()&&t.V_&&t.m_(e.mutations)}function w_(n){return qn(n)&&!an(n).n_()&&n.O_.length>0}function E_(n){an(n).start()}function wR(n){return y(this,null,function*(){an(n).p_()})}function ER(n){return y(this,null,function*(){let e=an(n);for(let t of n.O_)e.m_(t.mutations)})}function TR(n,e,t){return y(this,null,function*(){let r=n.O_.shift(),i=gh.from(r,e,t);yield I_(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield Ra(n)})}function AR(n,e){return y(this,null,function*(){e&&an(n).V_&&(yield function(r,i){return y(this,null,function*(){if(function(a){return Bb(a)&&a!==C.ABORTED}(i.code)){let s=r.O_.shift();an(r).s_(),yield I_(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),yield Ra(r)}})}(n,e)),w_(n)&&E_(n)})}function Sy(n,e){return y(this,null,function*(){let t=j(n);t.asyncQueue.verifyOperationInProgress(),M("RemoteStore","RemoteStore received new credentials");let r=qn(t);t.L_.add(3),yield fs(t),r&&t.q_.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.L_.delete(3),yield ba(t)})}function SR(n,e){return y(this,null,function*(){let t=j(n);e?(t.L_.delete(2),yield ba(t)):e||(t.L_.add(2),yield fs(t),t.q_.set("Unknown"))})}function Vr(n){return n.K_||(n.K_=function(t,r,i){let s=j(t);return s.w_(),new Yh(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{Eo:mR.bind(null,n),Ro:gR.bind(null,n),mo:yR.bind(null,n),d_:_R.bind(null,n)}),n.B_.push(e=>y(this,null,function*(){e?(n.K_.s_(),kd(n)?Nd(n):n.q_.set("Unknown")):(yield n.K_.stop(),v_(n))}))),n.K_}function an(n){return n.U_||(n.U_=function(t,r,i){let s=j(t);return s.w_(),new Xh(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{Eo:()=>Promise.resolve(),Ro:wR.bind(null,n),mo:AR.bind(null,n),f_:ER.bind(null,n),g_:TR.bind(null,n)}),n.B_.push(e=>y(this,null,function*(){e?(n.U_.s_(),yield Ra(n)):(yield n.U_.stop(),n.O_.length>0&&(M("RemoteStore",`Stopping write stream with ${n.O_.length} pending writes`),n.O_=[]))}))),n.U_}var nd=class n{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new rt,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,s){let a=Date.now()+r,c=new n(e,t,a,i,s);return c.start(r),c}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new x(C.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function Od(n,e){if(xt("AsyncQueue",`${e}: ${n}`),ds(n))return new x(C.UNAVAILABLE,`${e}: ${n}`);throw n}var aa=class n{constructor(e){this.comparator=e?(t,r)=>e(t,r)||V.comparator(t.key,r.key):(t,r)=>V.comparator(t.key,r.key),this.keyedMap=Gi(),this.sortedSet=new fe(this.comparator)}static emptySet(e){return new n(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var ca=class{constructor(){this.W_=new fe(V.comparator)}track(e){let t=e.doc.key,r=this.W_.get(t);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(t,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(t):e.type===1&&r.type===2?this.W_=this.W_.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):U():this.W_=this.W_.insert(t,e)}G_(){let e=[];return this.W_.inorderTraversal((t,r)=>{e.push(r)}),e}},kr=class n{constructor(e,t,r,i,s,a,c,u,d){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=a,this.syncStateChanged=c,this.excludesMetadataChanges=u,this.hasCachedResults=d}static fromInitialDocuments(e,t,r,i,s){let a=[];return t.forEach(c=>{a.push({type:0,doc:c})}),new n(e,t,aa.emptySet(t),a,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ta(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var rd=class{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}},id=class{constructor(){this.queries=by(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(t,r){let i=j(t),s=i.queries;i.queries=by(),s.forEach((a,c)=>{for(let u of c.j_)u.onError(r)})})(this,new x(C.ABORTED,"Firestore shutting down"))}};function by(){return new on(n=>Qy(n),Ta)}function xd(n,e){return y(this,null,function*(){let t=j(n),r=3,i=e.query,s=t.queries.get(i);s?!s.H_()&&e.J_()&&(r=2):(s=new rd,r=e.J_()?0:1);try{switch(r){case 0:s.z_=yield t.onListen(i,!0);break;case 1:s.z_=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(a){let c=Od(a,`Initialization of query '${yr(e.query)}' failed`);return void e.onError(c)}t.queries.set(i,s),s.j_.push(e),e.Z_(t.onlineState),s.z_&&e.X_(s.z_)&&Vd(t)})}function Md(n,e){return y(this,null,function*(){let t=j(n),r=e.query,i=3,s=t.queries.get(r);if(s){let a=s.j_.indexOf(e);a>=0&&(s.j_.splice(a,1),s.j_.length===0?i=e.J_()?0:1:!s.H_()&&e.J_()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})}function bR(n,e){let t=j(n),r=!1;for(let i of e){let s=i.query,a=t.queries.get(s);if(a){for(let c of a.j_)c.X_(i)&&(r=!0);a.z_=i}}r&&Vd(t)}function RR(n,e,t){let r=j(n),i=r.queries.get(e);if(i)for(let s of i.j_)s.onError(t);r.queries.delete(e)}function Vd(n){n.Y_.forEach(e=>{e.next()})}var sd,Ry;(Ry=sd||(sd={})).ea="default",Ry.Cache="cache";var is=class{constructor(e,t,r){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new kr(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){if(!e.fromCache||!this.J_())return!0;let r=t!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}ia(e){if(e.docChanges.length>0)return!0;let t=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}oa(e){e=kr.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==sd.Cache}};var ua=class{constructor(e){this.key=e}},la=class{constructor(e){this.key=e}},od=class{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=H(),this.mutatedKeys=H(),this.Aa=Jy(e),this.Ra=new aa(this.Aa)}get Va(){return this.Ta}ma(e,t){let r=t?t.fa:new ca,i=t?t.Ra:this.Ra,s=t?t.mutatedKeys:this.mutatedKeys,a=i,c=!1,u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,d=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((p,g)=>{let I=i.get(p),R=Aa(this.query,g)?g:null,D=!!I&&this.mutatedKeys.has(I.key),O=!!R&&(R.hasLocalMutations||this.mutatedKeys.has(R.key)&&R.hasCommittedMutations),N=!1;I&&R?I.data.isEqual(R.data)?D!==O&&(r.track({type:3,doc:R}),N=!0):this.ga(I,R)||(r.track({type:2,doc:R}),N=!0,(u&&this.Aa(R,u)>0||d&&this.Aa(R,d)<0)&&(c=!0)):!I&&R?(r.track({type:0,doc:R}),N=!0):I&&!R&&(r.track({type:1,doc:I}),N=!0,(u||d)&&(c=!0)),N&&(R?(a=a.add(R),s=O?s.add(p):s.delete(p)):(a=a.delete(p),s=s.delete(p)))}),this.query.limit!==null)for(;a.size>this.query.limit;){let p=this.query.limitType==="F"?a.last():a.first();a=a.delete(p.key),s=s.delete(p.key),r.track({type:1,doc:p})}return{Ra:a,fa:r,ns:c,mutatedKeys:s}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;let a=e.fa.G_();a.sort((p,g)=>function(R,D){let O=N=>{switch(N){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return U()}};return O(R)-O(D)}(p.type,g.type)||this.Aa(p.doc,g.doc)),this.pa(r),i=i!=null&&i;let c=t&&!i?this.ya():[],u=this.da.size===0&&this.current&&!i?1:0,d=u!==this.Ea;return this.Ea=u,a.length!==0||d?{snapshot:new kr(this.query,e.Ra,s,a,e.mutatedKeys,u===0,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:c}:{wa:c}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new ca,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(t=>this.Ta=this.Ta.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ta=this.Ta.delete(t)),this.current=e.current)}ya(){if(!this.current)return[];let e=this.da;this.da=H(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});let t=[];return e.forEach(r=>{this.da.has(r)||t.push(new la(r))}),this.da.forEach(r=>{e.has(r)||t.push(new ua(r))}),t}ba(e){this.Ta=e.Ts,this.da=H();let t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return kr.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}},ad=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},cd=class{constructor(e){this.key=e,this.va=!1}},ud=class{constructor(e,t,r,i,s,a){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=a,this.Ca={},this.Fa=new on(c=>Qy(c),Ta),this.Ma=new Map,this.xa=new Set,this.Oa=new fe(V.comparator),this.Na=new Map,this.La=new rs,this.Ba={},this.ka=new Map,this.qa=ns.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}};function CR(n,e,t=!0){return y(this,null,function*(){let r=C_(n),i,s=r.Fa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Da()):i=yield T_(r,e,t,!0),i})}function PR(n,e){return y(this,null,function*(){let t=C_(n);yield T_(t,e,!0,!1)})}function T_(n,e,t,r){return y(this,null,function*(){let i=yield dR(n.localStore,pt(e)),s=i.targetId,a=n.sharedClientState.addLocalQueryTarget(s,t),c;return r&&(c=yield DR(n,e,s,a==="current",i.resumeToken)),n.isPrimaryClient&&t&&y_(n.remoteStore,i),c})}function DR(n,e,t,r,i){return y(this,null,function*(){n.Ka=(g,I,R)=>function(O,N,$,K){return y(this,null,function*(){let Q=N.view.ma($);Q.ns&&(Q=yield Ay(O.localStore,N.query,!1).then(({documents:E})=>N.view.ma(E,Q)));let oe=K&&K.targetChanges.get(N.targetId),Ve=K&&K.targetMismatches.get(N.targetId)!=null,ee=N.view.applyChanges(Q,O.isPrimaryClient,oe,Ve);return Py(O,N.targetId,ee.wa),ee.snapshot})}(n,g,I,R);let s=yield Ay(n.localStore,e,!0),a=new od(e,s.Ts),c=a.ma(s.documents),u=es.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),d=a.applyChanges(c,n.isPrimaryClient,u);Py(n,t,d.wa);let p=new ad(e,t,a);return n.Fa.set(e,p),n.Ma.has(t)?n.Ma.get(t).push(e):n.Ma.set(t,[e]),d.snapshot})}function NR(n,e,t){return y(this,null,function*(){let r=j(n),i=r.Fa.get(e),s=r.Ma.get(i.targetId);if(s.length>1)return r.Ma.set(i.targetId,s.filter(a=>!Ta(a,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield Wh(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&Pd(r.remoteStore,i.targetId),ld(r,i.targetId)}).catch(hs))):(ld(r,i.targetId),yield Wh(r.localStore,i.targetId,!0))})}function kR(n,e){return y(this,null,function*(){let t=j(n),r=t.Fa.get(e),i=t.Ma.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),Pd(t.remoteStore,r.targetId))})}function OR(n,e,t){return y(this,null,function*(){let r=$R(n);try{let i=yield function(a,c){let u=j(a),d=Re.now(),p=c.reduce((R,D)=>R.add(D.key),H()),g,I;return u.persistence.runTransaction("Locally write mutations","readwrite",R=>{let D=Vt(),O=H();return u.cs.getEntries(R,p).next(N=>{D=N,D.forEach(($,K)=>{K.isValidDocument()||(O=O.add($))})}).next(()=>u.localDocuments.getOverlayedDocuments(R,D)).next(N=>{g=N;let $=[];for(let K of c){let Q=$b(K,g.get(K.key).overlayedDocument);Q!=null&&$.push(new yt(K.key,Q,jy(Q.value.mapValue),Ot.exists(!0)))}return u.mutationQueue.addMutationBatch(R,d,$,c)}).next(N=>{I=N;let $=N.applyToLocalDocumentSet(g,O);return u.documentOverlayCache.saveOverlays(R,N.batchId,$)})}).then(()=>({batchId:I.batchId,changes:Xy(g)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(a,c,u){let d=a.Ba[a.currentUser.toKey()];d||(d=new fe(X)),d=d.insert(c,u),a.Ba[a.currentUser.toKey()]=d}(r,i.batchId,t),yield ps(r,i.changes),yield Ra(r.remoteStore)}catch(i){let s=Od(i,"Failed to persist write");t.reject(s)}})}function A_(n,e){return y(this,null,function*(){let t=j(n);try{let r=yield uR(t.localStore,e);e.targetChanges.forEach((i,s)=>{let a=t.Na.get(s);a&&(te(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?a.va=!0:i.modifiedDocuments.size>0?te(a.va):i.removedDocuments.size>0&&(te(a.va),a.va=!1))}),yield ps(t,r,e)}catch(r){yield hs(r)}})}function Cy(n,e,t){let r=j(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.Fa.forEach((s,a)=>{let c=a.view.Z_(e);c.snapshot&&i.push(c.snapshot)}),function(a,c){let u=j(a);u.onlineState=c;let d=!1;u.queries.forEach((p,g)=>{for(let I of g.j_)I.Z_(c)&&(d=!0)}),d&&Vd(u)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function xR(n,e,t){return y(this,null,function*(){let r=j(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.Na.get(e),s=i&&i.key;if(s){let a=new fe(V.comparator);a=a.insert(s,it.newNoDocument(s,q.min()));let c=H().add(s),u=new Jo(q.min(),new Map,new fe(X),a,c);yield A_(r,u),r.Oa=r.Oa.remove(s),r.Na.delete(e),Ld(r)}else yield Wh(r.localStore,e,!1).then(()=>ld(r,e,t)).catch(hs)})}function MR(n,e){return y(this,null,function*(){let t=j(n),r=e.batch.batchId;try{let i=yield cR(t.localStore,e);b_(t,r,null),S_(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield ps(t,i)}catch(i){yield hs(i)}})}function VR(n,e,t){return y(this,null,function*(){let r=j(n);try{let i=yield function(a,c){let u=j(a);return u.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let p;return u.mutationQueue.lookupMutationBatch(d,c).next(g=>(te(g!==null),p=g.keys(),u.mutationQueue.removeMutationBatch(d,g))).next(()=>u.mutationQueue.performConsistencyCheck(d)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(d,p,c)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,p)).next(()=>u.localDocuments.getDocuments(d,p))})}(r.localStore,e);b_(r,e,t),S_(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield ps(r,i)}catch(i){yield hs(i)}})}function S_(n,e){(n.ka.get(e)||[]).forEach(t=>{t.resolve()}),n.ka.delete(e)}function b_(n,e,t){let r=j(n),i=r.Ba[r.currentUser.toKey()];if(i){let s=i.get(e);s&&(t?s.reject(t):s.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function ld(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.Ma.get(e))n.Fa.delete(r),t&&n.Ca.$a(r,t);n.Ma.delete(e),n.isPrimaryClient&&n.La.gr(e).forEach(r=>{n.La.containsKey(r)||R_(n,r)})}function R_(n,e){n.xa.delete(e.path.canonicalString());let t=n.Oa.get(e);t!==null&&(Pd(n.remoteStore,t),n.Oa=n.Oa.remove(e),n.Na.delete(t),Ld(n))}function Py(n,e,t){for(let r of t)r instanceof ua?(n.La.addReference(r.key,e),LR(n,r)):r instanceof la?(M("SyncEngine","Document no longer in limbo: "+r.key),n.La.removeReference(r.key,e),n.La.containsKey(r.key)||R_(n,r.key)):U()}function LR(n,e){let t=e.key,r=t.path.canonicalString();n.Oa.get(t)||n.xa.has(r)||(M("SyncEngine","New document in limbo: "+t),n.xa.add(r),Ld(n))}function Ld(n){for(;n.xa.size>0&&n.Oa.size<n.maxConcurrentLimboResolutions;){let e=n.xa.values().next().value;n.xa.delete(e);let t=new V(ue.fromString(e)),r=n.qa.next();n.Na.set(r,new cd(t)),n.Oa=n.Oa.insert(t,r),y_(n.remoteStore,new ts(pt(Ea(t.path)),r,"TargetPurposeLimboResolution",Fy.oe))}}function ps(n,e,t){return y(this,null,function*(){let r=j(n),i=[],s=[],a=[];r.Fa.isEmpty()||(r.Fa.forEach((c,u)=>{a.push(r.Ka(u,e,t).then(d=>{var p;if((d||t)&&r.isPrimaryClient){let g=d?!d.fromCache:(p=t?.targetChanges.get(u.targetId))===null||p===void 0?void 0:p.current;r.sharedClientState.updateQueryState(u.targetId,g?"current":"not-current")}if(d){i.push(d);let g=jh.Wi(u.targetId,d);s.push(g)}}))}),yield Promise.all(a),r.Ca.d_(i),yield function(u,d){return y(this,null,function*(){let p=j(u);try{yield p.persistence.runTransaction("notifyLocalViewChanges","readwrite",g=>P.forEach(d,I=>P.forEach(I.$i,R=>p.persistence.referenceDelegate.addReference(g,I.targetId,R)).next(()=>P.forEach(I.Ui,R=>p.persistence.referenceDelegate.removeReference(g,I.targetId,R)))))}catch(g){if(!ds(g))throw g;M("LocalStore","Failed to update sequence numbers: "+g)}for(let g of d){let I=g.targetId;if(!g.fromCache){let R=p.os.get(I),D=R.snapshotVersion,O=R.withLastLimboFreeSnapshotVersion(D);p.os=p.os.insert(I,O)}}})}(r.localStore,s))})}function FR(n,e){return y(this,null,function*(){let t=j(n);if(!t.currentUser.isEqual(e)){M("SyncEngine","User change. New user:",e.toKey());let r=yield m_(t.localStore,e);t.currentUser=e,function(s,a){s.ka.forEach(c=>{c.forEach(u=>{u.reject(new x(C.CANCELLED,a))})}),s.ka.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield ps(t,r.hs)}})}function UR(n,e){let t=j(n),r=t.Na.get(e);if(r&&r.va)return H().add(r.key);{let i=H(),s=t.Ma.get(e);if(!s)return i;for(let a of s){let c=t.Fa.get(a);i=i.unionWith(c.view.Va)}return i}}function C_(n){let e=j(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=A_.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=UR.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=xR.bind(null,e),e.Ca.d_=bR.bind(null,e.eventManager),e.Ca.$a=RR.bind(null,e.eventManager),e}function $R(n){let e=j(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=MR.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=VR.bind(null,e),e}var Dy=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(t){return y(this,null,function*(){this.serializer=Sa(t.databaseInfo.databaseId),this.sharedClientState=this.Wa(t),this.persistence=this.Ga(t),yield this.persistence.start(),this.localStore=this.za(t),this.gcScheduler=this.ja(t,this.localStore),this.indexBackfillerScheduler=this.Ha(t,this.localStore)})}ja(t,r){return null}Ha(t,r){return null}za(t){return aR(this.persistence,new zh,t.initialUser,this.serializer)}Ga(t){return new Uh(Bh.Zr,this.serializer)}Wa(t){return new Hh}terminate(){return y(this,null,function*(){var t,r;(t=this.gcScheduler)===null||t===void 0||t.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return n.provider={build:()=>new n},n})();var BR=(()=>{class n{initialize(t,r){return y(this,null,function*(){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>Cy(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=FR.bind(null,this.syncEngine),yield SR(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(t){return function(){return new id}()}createDatastore(t){let r=Sa(t.databaseInfo.databaseId),i=function(a){return new Jh(a)}(t.databaseInfo);return function(a,c,u,d){return new Zh(a,c,u,d)}(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return function(i,s,a,c,u){return new td(i,s,a,c,u)}(this.localStore,this.datastore,t.asyncQueue,r=>Cy(this.syncEngine,r,0),function(){return ra.D()?new ra:new Kh}())}createSyncEngine(t,r){return function(s,a,c,u,d,p,g){let I=new ud(s,a,c,u,d,p);return g&&(I.Qa=!0),I}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}terminate(){return y(this,null,function*(){var t,r;yield function(s){return y(this,null,function*(){let a=j(s);M("RemoteStore","RemoteStore shutting down."),a.L_.add(5),yield fs(a),a.k_.shutdown(),a.q_.set("Unknown")})}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()})}}return n.provider={build:()=>new n},n})();var ss=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):xt("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var hd=class{constructor(e,t,r,i,s){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Ee.UNAUTHENTICATED,this.clientId=zo.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,a=>y(this,null,function*(){M("FirestoreClient","Received user=",a.uid),yield this.authCredentialListener(a),this.user=a})),this.appCheckCredentials.start(r,a=>(M("FirestoreClient","Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new rt;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>y(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=Od(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function Bl(n,e){return y(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),M("FirestoreClient","Initializing OfflineComponentProvider");let t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(i=>y(this,null,function*(){r.isEqual(i)||(yield m_(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e})}function Ny(n,e){return y(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let t=yield jR(n);M("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>Sy(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>Sy(e.remoteStore,i)),n._onlineComponents=e})}function jR(n){return y(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){M("FirestoreClient","Using user provided OfflineComponentProvider");try{yield Bl(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!function(i){return i.name==="FirebaseError"?i.code===C.FAILED_PRECONDITION||i.code===C.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;Tr("Error using user provided cache. Falling back to memory cache: "+t),yield Bl(n,new Dy)}}else M("FirestoreClient","Using default OfflineComponentProvider"),yield Bl(n,new Dy);return n._offlineComponents})}function P_(n){return y(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?(M("FirestoreClient","Using user provided OnlineComponentProvider"),yield Ny(n,n._uninitializedComponentsProvider._online)):(M("FirestoreClient","Using default OnlineComponentProvider"),yield Ny(n,new BR))),n._onlineComponents})}function qR(n){return P_(n).then(e=>e.syncEngine)}function ha(n){return y(this,null,function*(){let e=yield P_(n),t=e.eventManager;return t.onListen=CR.bind(null,e.syncEngine),t.onUnlisten=NR.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=PR.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=kR.bind(null,e.syncEngine),t})}function zR(n,e,t={}){let r=new rt;return n.asyncQueue.enqueueAndForget(()=>y(this,null,function*(){return function(s,a,c,u,d){let p=new ss({next:I=>{p.Za(),a.enqueueAndForget(()=>Md(s,g));let R=I.docs.has(c);!R&&I.fromCache?d.reject(new x(C.UNAVAILABLE,"Failed to get document because the client is offline.")):R&&I.fromCache&&u&&u.source==="server"?d.reject(new x(C.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(I)},error:I=>d.reject(I)}),g=new is(Ea(c.path),p,{includeMetadataChanges:!0,_a:!0});return xd(s,g)}(yield ha(n),n.asyncQueue,e,t,r)})),r.promise}function GR(n,e,t={}){let r=new rt;return n.asyncQueue.enqueueAndForget(()=>y(this,null,function*(){return function(s,a,c,u,d){let p=new ss({next:I=>{p.Za(),a.enqueueAndForget(()=>Md(s,g)),I.fromCache&&u.source==="server"?d.reject(new x(C.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(I)},error:I=>d.reject(I)}),g=new is(c,p,{includeMetadataChanges:!0,_a:!0});return xd(s,g)}(yield ha(n),n.asyncQueue,e,t,r)})),r.promise}function D_(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var ky=new Map;function Fd(n,e,t){if(!t)throw new x(C.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function WR(n,e,t,r){if(e===!0&&r===!0)throw new x(C.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function Oy(n){if(!V.isDocumentKey(n))throw new x(C.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function xy(n){if(V.isDocumentKey(n))throw new x(C.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Ca(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":U()}function Be(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new x(C.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=Ca(n);throw new x(C.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}var da=class{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new x(C.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new x(C.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}WR("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=D_((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new x(C.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new x(C.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new x(C.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},Bn=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new da({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new x(C.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new x(C.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new da(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new jl;switch(r.type){case"firstParty":return new Wl(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new x(C.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return y(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){let r=ky.get(t);r&&(M("ComponentProvider","Removing Datastore"),ky.delete(t),r.terminate())}(this),Promise.resolve()}};function N_(n,e,t,r={}){var i;let s=(n=Be(n,Bn))._getSettings(),a=`${e}:${t}`;if(s.host!=="firestore.googleapis.com"&&s.host!==a&&Tr("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},s),{host:a,ssl:!1})),r.mockUserToken){let c,u;if(typeof r.mockUserToken=="string")c=r.mockUserToken,u=Ee.MOCK_USER;else{c=xm(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);let d=r.mockUserToken.sub||r.mockUserToken.user_id;if(!d)throw new x(C.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new Ee(d)}n._authCredentials=new ql(new qo(c,u))}}var cn=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},xe=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new nn(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}},nn=class n extends cn{constructor(e,t,r){super(e,t,Ea(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new xe(this.firestore,null,new V(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function k_(n,e,...t){if(n=de(n),Fd("collection","path",e),n instanceof Bn){let r=ue.fromString(e,...t);return xy(r),new nn(n,null,r)}{if(!(n instanceof xe||n instanceof nn))throw new x(C.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(ue.fromString(e,...t));return xy(r),new nn(n.firestore,null,r)}}function O_(n,e){if(n=Be(n,Bn),Fd("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new x(C.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new cn(n,null,function(r){return new sn(ue.emptyPath(),r)}(e))}function x_(n,e,...t){if(n=de(n),arguments.length===1&&(e=zo.newId()),Fd("doc","path",e),n instanceof Bn){let r=ue.fromString(e,...t);return Oy(r),new xe(n,null,new V(r))}{if(!(n instanceof xe||n instanceof nn))throw new x(C.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(ue.fromString(e,...t));return Oy(r),new xe(n.firestore,n instanceof nn?n.converter:null,new V(r))}}var fa=class{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new ia(this,"async_queue_retry"),this.Vu=()=>{let r=$l();r&&M("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;let t=$l();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;let t=$l();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});let t=new rt;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}pu(){return y(this,null,function*(){if(this.Pu.length!==0){try{yield this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!ds(e))throw e;M("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}})}gu(e){let t=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;let i=function(a){let c=a.message||"";return a.stack&&(c=a.stack.includes(a.message)?a.stack:a.message+`
`+a.stack),c}(r);throw xt("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=t,t}enqueueAfterDelay(e,t,r){this.fu(),this.Ru.indexOf(e)>-1&&(t=0);let i=nd.createAndSchedule(this,e,t,r,s=>this.yu(s));return this.Tu.push(i),i}fu(){this.Eu&&U()}verifyOperationInProgress(){}wu(){return y(this,null,function*(){let e;do e=this.mu,yield e;while(e!==this.mu)})}Su(e){for(let t of this.Tu)if(t.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.Tu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){let t=this.Tu.indexOf(e);this.Tu.splice(t,1)}};function My(n){return function(t,r){if(typeof t!="object"||t===null)return!1;let i=t;for(let s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(n,["next","error","complete"])}var _t=class extends Bn{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new fa,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return y(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new fa(e),this._firestoreClient=void 0,yield e}})}};function M_(n,e){let t=typeof n=="object"?n:lr(),r=typeof n=="string"?n:e||"(default)",i=Ni(t,"firestore").getImmediate({identifier:r});if(!i._initialized){let s=Om("firestore");s&&N_(i,...s)}return i}function Pa(n){if(n._terminated)throw new x(C.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||HR(n),n._firestoreClient}function HR(n){var e,t,r;let i=n._freezeSettings(),s=function(c,u,d,p){return new Yl(c,u,d,p.host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,D_(p.experimentalLongPollingOptions),p.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new hd(n._authCredentials,n._appCheckCredentials,n._queue,s,n._componentsProvider&&function(c){let u=c?._online.build();return{_offline:c?._offline.build(u),_online:u}}(n._componentsProvider))}var os=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(Me.fromBase64String(e))}catch(t){throw new x(C.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(Me.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var Or=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new x(C.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new He(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var xr=class{constructor(e){this._methodName=e}};var as=class{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new x(C.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new x(C.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return X(this._lat,e._lat)||X(this._long,e._long)}};var cs=class{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}};var KR=/^__.*__$/,dd=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new yt(e,this.data,this.fieldMask,t,this.fieldTransforms):new $n(e,this.data,t,this.fieldTransforms)}},pa=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new yt(e,this.data,this.fieldMask,t,this.fieldTransforms)}};function V_(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw U()}}var fd=class n{constructor(e,t,r,i,s,a){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new n(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return ga(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(V_(this.Cu)&&KR.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}},pd=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Sa(e)}Qu(e,t,r,i=!1){return new fd({Cu:e,methodName:t,qu:r,path:He.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function Ud(n){let e=n._freezeSettings(),t=Sa(n._databaseId);return new pd(n._databaseId,!!e.ignoreUndefinedProperties,t)}function QR(n,e,t,r,i,s={}){let a=n.Qu(s.merge||s.mergeFields?2:0,e,t,i);$d("Data must be an object, but it was:",a,r);let c=L_(r,a),u,d;if(s.merge)u=new Xe(a.fieldMask),d=a.fieldTransforms;else if(s.mergeFields){let p=[];for(let g of s.mergeFields){let I=gd(e,g,t);if(!a.contains(I))throw new x(C.INVALID_ARGUMENT,`Field '${I}' is specified in your field mask but missing from your input data.`);U_(p,I)||p.push(I)}u=new Xe(p),d=a.fieldTransforms.filter(g=>u.covers(g.field))}else u=null,d=a.fieldTransforms;return new dd(new We(c),u,d)}var ma=class n extends xr{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof n}};var md=class n extends xr{_toFieldTransform(e){return new dh(e.path,new Ln)}isEqual(e){return e instanceof n}};function JR(n,e,t,r){let i=n.Qu(1,e,t);$d("Data must be an object, but it was:",i,r);let s=[],a=We.empty();jn(r,(u,d)=>{let p=Bd(e,u,t);d=de(d);let g=i.Nu(p);if(d instanceof ma)s.push(p);else{let I=ms(d,g);I!=null&&(s.push(p),a.set(p,I))}});let c=new Xe(s);return new pa(a,c,i.fieldTransforms)}function YR(n,e,t,r,i,s){let a=n.Qu(1,e,t),c=[gd(e,r,t)],u=[i];if(s.length%2!=0)throw new x(C.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let I=0;I<s.length;I+=2)c.push(gd(e,s[I])),u.push(s[I+1]);let d=[],p=We.empty();for(let I=c.length-1;I>=0;--I)if(!U_(d,c[I])){let R=c[I],D=u[I];D=de(D);let O=a.Nu(R);if(D instanceof ma)d.push(R);else{let N=ms(D,O);N!=null&&(d.push(R),p.set(R,N))}}let g=new Xe(d);return new pa(p,g,a.fieldTransforms)}function XR(n,e,t,r=!1){return ms(t,n.Qu(r?4:3,e))}function ms(n,e){if(F_(n=de(n)))return $d("Unsupported field value:",e,n),L_(n,e);if(n instanceof xr)return function(r,i){if(!V_(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);let s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){let s=[],a=0;for(let c of r){let u=ms(c,i.Lu(a));u==null&&(u={nullValue:"NULL_VALUE"}),s.push(u),a++}return{arrayValue:{values:s}}}(n,e)}return function(r,i){if((r=de(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return Mb(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let s=Re.fromDate(r);return{timestampValue:ea(i.serializer,s)}}if(r instanceof Re){let s=new Re(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:ea(i.serializer,s)}}if(r instanceof as)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof os)return{bytesValue:c_(i.serializer,r._byteString)};if(r instanceof xe){let s=i.databaseId,a=r.firestore._databaseId;if(!a.isEqual(s))throw i.Bu(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:Cd(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof cs)return function(a,c){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:a.toArray().map(u=>{if(typeof u!="number")throw c.Bu("VectorValues must only contain numeric values.");return Rd(c.serializer,u)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${Ca(r)}`)}(n,e)}function L_(n,e){let t={};return Uy(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):jn(n,(r,i)=>{let s=ms(i,e.Mu(r));s!=null&&(t[r]=s)}),{mapValue:{fields:t}}}function F_(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Re||n instanceof as||n instanceof os||n instanceof xe||n instanceof xr||n instanceof cs)}function $d(n,e,t){if(!F_(t)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(t)){let r=Ca(t);throw r==="an object"?e.Bu(n+" a custom object"):e.Bu(n+" "+r)}}function gd(n,e,t){if((e=de(e))instanceof Or)return e._internalPath;if(typeof e=="string")return Bd(n,e);throw ga("Field path arguments must be of type string or ",n,!1,void 0,t)}var ZR=new RegExp("[~\\*/\\[\\]]");function Bd(n,e,t){if(e.search(ZR)>=0)throw ga(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Or(...e.split("."))._internalPath}catch{throw ga(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function ga(n,e,t,r,i){let s=r&&!r.isEmpty(),a=i!==void 0,c=`Function ${e}() called with invalid data`;t&&(c+=" (via `toFirestore()`)"),c+=". ";let u="";return(s||a)&&(u+=" (found",s&&(u+=` in field ${r}`),a&&(u+=` in document ${i}`),u+=")"),new x(C.INVALID_ARGUMENT,c+n+u)}function U_(n,e){return n.some(t=>t.isEqual(e))}var ya=class{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new xe(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new yd(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(jd("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},yd=class extends ya{data(){return super.data()}};function jd(n,e){return typeof e=="string"?Bd(n,e):e instanceof Or?e._internalPath:e._delegate._internalPath}function $_(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new x(C.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var us=class{},_d=class extends us{};function B_(n,e,...t){let r=[];e instanceof us&&r.push(e),r=r.concat(t),function(s){let a=s.filter(u=>u instanceof vd).length,c=s.filter(u=>u instanceof _a).length;if(a>1||a>0&&c>0)throw new x(C.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(let i of r)n=i._apply(n);return n}var _a=class n extends _d{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=this._parse(e);return q_(e._query,t),new cn(e.firestore,e.converter,lh(e._query,t))}_parse(e){let t=Ud(e.firestore);return function(s,a,c,u,d,p,g){let I;if(d.isKeyField()){if(p==="array-contains"||p==="array-contains-any")throw new x(C.INVALID_ARGUMENT,`Invalid Query. You can't perform '${p}' queries on documentId().`);if(p==="in"||p==="not-in"){Ly(g,p);let R=[];for(let D of g)R.push(Vy(u,s,D));I={arrayValue:{values:R}}}else I=Vy(u,s,g)}else p!=="in"&&p!=="not-in"&&p!=="array-contains-any"||Ly(g,p),I=XR(c,a,g,p==="in"||p==="not-in");return ye.create(d,p,I)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}};function j_(n,e,t){let r=e,i=jd("where",n);return _a._create(i,r,t)}var vd=class n extends us{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new n(e,t)}_parse(e){let t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:st.create(t,this._getOperator())}_apply(e){let t=this._parse(e);return t.getFilters().length===0?e:(function(i,s){let a=i,c=s.getFlattenedFilters();for(let u of c)q_(a,u),a=lh(a,u)}(e._query,t),new cn(e.firestore,e.converter,lh(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};function Vy(n,e,t){if(typeof(t=de(t))=="string"){if(t==="")throw new x(C.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Ky(e)&&t.indexOf("/")!==-1)throw new x(C.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);let r=e.path.child(ue.fromString(t));if(!V.isDocumentKey(r))throw new x(C.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return ay(n,new V(r))}if(t instanceof xe)return ay(n,t._key);throw new x(C.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Ca(t)}.`)}function Ly(n,e){if(!Array.isArray(n)||n.length===0)throw new x(C.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function q_(n,e){let t=function(i,s){for(let a of i)for(let c of a.getFlattenedFilters())if(s.indexOf(c.op)>=0)return c.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new x(C.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new x(C.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}var Id=class{convertValue(e,t="none"){switch(Vn(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ce(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(rn(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw U()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return jn(e,(i,s)=>{r[i]=this.convertValue(s,t)}),r}convertVectorValue(e){var t,r,i;let s=(i=(r=(t=e.fields)===null||t===void 0?void 0:t.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(a=>ce(a.doubleValue));return new cs(s)}convertGeoPoint(e){return new as(ce(e.latitude),ce(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=Td(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Yi(e));default:return null}}convertTimestamp(e){let t=Mt(e);return new Re(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=ue.fromString(e);te(p_(r));let i=new Ko(r.get(1),r.get(3)),s=new V(r.popFirst(5));return i.isEqual(t)||xt(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}};function e0(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}var On=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},va=class extends ya{constructor(e,t,r,i,s,a){super(e,t,r,i,a),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new Er(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(jd("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}},Er=class extends va{data(e={}){return super.data(e)}},Ia=class{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new On(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Er(this._firestore,this._userDataWriter,r.key,r,new On(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new x(C.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let a=0;return i._snapshot.docChanges.map(c=>{let u=new Er(i._firestore,i._userDataWriter,c.doc.key,c.doc,new On(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);return c.doc,{type:"added",doc:u,oldIndex:-1,newIndex:a++}})}{let a=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(c=>s||c.type!==3).map(c=>{let u=new Er(i._firestore,i._userDataWriter,c.doc.key,c.doc,new On(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter),d=-1,p=-1;return c.type!==0&&(d=a.indexOf(c.doc.key),a=a.delete(c.doc.key)),c.type!==1&&(a=a.add(c.doc),p=a.indexOf(c.doc.key)),{type:t0(c.type),doc:u,oldIndex:d,newIndex:p}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}};function t0(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return U()}}function z_(n){n=Be(n,xe);let e=Be(n.firestore,_t);return zR(Pa(e),n._key).then(t=>Q_(e,n,t))}var ls=class extends Id{constructor(e){super(),this.firestore=e}convertBytes(e){return new os(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new xe(this.firestore,null,t)}};function G_(n){n=Be(n,cn);let e=Be(n.firestore,_t),t=Pa(e),r=new ls(e);return $_(n._query),GR(t,n._query).then(i=>new Ia(e,r,n,i))}function W_(n,e,t){n=Be(n,xe);let r=Be(n.firestore,_t),i=e0(n.converter,e,t);return zd(r,[QR(Ud(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,Ot.none())])}function H_(n,e,t,...r){n=Be(n,xe);let i=Be(n.firestore,_t),s=Ud(i),a;return a=typeof(e=de(e))=="string"||e instanceof Or?YR(s,"updateDoc",n._key,e,t,r):JR(s,"updateDoc",n._key,e),zd(i,[a.toMutation(n._key,Ot.exists(!0))])}function K_(n){return zd(Be(n.firestore,_t),[new Zi(n._key,Ot.none())])}function qd(n,...e){var t,r,i;n=de(n);let s={includeMetadataChanges:!1,source:"default"},a=0;typeof e[a]!="object"||My(e[a])||(s=e[a],a++);let c={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(My(e[a])){let g=e[a];e[a]=(t=g.next)===null||t===void 0?void 0:t.bind(g),e[a+1]=(r=g.error)===null||r===void 0?void 0:r.bind(g),e[a+2]=(i=g.complete)===null||i===void 0?void 0:i.bind(g)}let u,d,p;if(n instanceof xe)d=Be(n.firestore,_t),p=Ea(n._key.path),u={next:g=>{e[a]&&e[a](Q_(d,n,g))},error:e[a+1],complete:e[a+2]};else{let g=Be(n,cn);d=Be(g.firestore,_t),p=g._query;let I=new ls(d);u={next:R=>{e[a]&&e[a](new Ia(d,I,g,R))},error:e[a+1],complete:e[a+2]},$_(n._query)}return function(I,R,D,O){let N=new ss(O),$=new is(R,N,D);return I.asyncQueue.enqueueAndForget(()=>y(this,null,function*(){return xd(yield ha(I),$)})),()=>{N.Za(),I.asyncQueue.enqueueAndForget(()=>y(this,null,function*(){return Md(yield ha(I),$)}))}}(Pa(d),p,c,u)}function zd(n,e){return function(r,i){let s=new rt;return r.asyncQueue.enqueueAndForget(()=>y(this,null,function*(){return OR(yield qR(r),i,s)})),s.promise}(Pa(n),e)}function Q_(n,e,t){let r=t.docs.get(e._key),i=new ls(n);return new va(n,i,e._key,r,new On(t.hasPendingWrites,t.fromCache),e.converter)}function J_(){return new md("serverTimestamp")}(function(e,t=!0){(function(i){Mr=i})(Xt),Yt(new Ye("firestore",(r,{instanceIdentifier:i,options:s})=>{let a=r.getProvider("app").getImmediate(),c=new _t(new zl(r.getProvider("auth-internal")),new Kl(r.getProvider("app-check-internal")),function(d,p){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new x(C.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ko(d.options.projectId,p)}(a,i),a);return s=Object.assign({useFetchStreams:t},s),c._setSettings(s),c},"PUBLIC").setMultipleInstances(!0)),_e(ry,"4.7.3",e),_e(ry,"4.7.3","esm2017")})();var Da=function(){return Da=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++){t=arguments[r];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},Da.apply(this,arguments)};var i0={includeMetadataChanges:!1};function Y_(n,e){return e===void 0&&(e=i0),new fn(function(t){var r=qd(n,e,{next:t.next.bind(t),error:t.error.bind(t),complete:t.complete.bind(t)});return{unsubscribe:r}})}function X_(n,e){var t;e===void 0&&(e={});var r=n.data(e);return!n.exists()||typeof r!="object"||r===null||!e.idField?r:Da(Da({},r),(t={},t[e.idField]=n.id,t))}function Z_(n){return Y_(n,{includeMetadataChanges:!0}).pipe(ne(function(e){return e.docs}))}function ev(n,e){return e===void 0&&(e={}),Z_(n).pipe(ne(function(t){return t.map(function(r){return X_(r,e)})}))}var zn=class{constructor(e){return e}},tv="firestore",Gd=class{constructor(){return ki(tv)}};var Wd=new Ie("angularfire2.firestore-instances");function s0(n,e){let t=mo(tv,n,e);return t&&new zn(t)}function o0(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new zn(r)}}var a0={provide:Gd,deps:[[new $e,Wd]]},c0={provide:zn,useFactory:s0,deps:[[new $e,Wd],bt]};function GN(n,...e){return _e("angularfire",Sn.full,"fst"),Et([c0,a0,{provide:Wd,useFactory:o0(n),multi:!0,deps:[Se,Gt,fr,bn,[new $e,ji],[new $e,dr],...e]}])}var nv=le(ev,!0);var Na=le(k_,!0),rv=le(O_,!0);var iv=le(K_,!0);var Lr=le(x_,!0);var sv=le(z_,!0);var Hd=le(G_,!0);var WN=le(M_,!0);var ov=le(B_,!0);var Kd=le(J_,!0),av=le(W_,!0);var cv=le(H_,!0);var uv=le(j_,!0);var QN=(()=>{class n{constructor(t){this.firestore=t}createDocument(t,r,i=null){return y(this,null,function*(){let s;if(i)s=Lr(this.firestore,`${t}/${i}`);else{let c=Na(this.firestore,t);s=Lr(c)}let a=r;return a.id=s.id,a.fecha=Kd(),yield av(s,a),a.id})}updateDocument(t,r){return y(this,null,function*(){let i=Lr(this.firestore,t);return r.updateAt=Kd(),yield cv(i,r)})}deleteDocument(t){return y(this,null,function*(){let r=Lr(this.firestore,t);return yield iv(r)})}getDocument(t){return y(this,null,function*(){let r=Lr(this.firestore,t);return yield sv(r)})}getDocuments(t,r=!1){return y(this,null,function*(){if(r){let i=rv(this.firestore,t);return yield Hd(i)}else{let i=Na(this.firestore,t);return yield Hd(i)}})}getEspecialidades(){return y(this,null,function*(){return(yield this.getDocuments("especialidades")).docs.map(r=>r.data().nombre)})}getUsuarios(){return y(this,null,function*(){return(yield this.getDocuments("usuarios")).docs.map(r=>r.data())})}validateEspecialista(t){return new Promise((r,i)=>{let s=Na(this.firestore,"usuarios"),a=ov(s,uv("email","==",t));nv(a).subscribe(u=>{u[0]?u[0].rol=="especialista"&&u[0].habilitado==!1?i("Tu cuenta aun no fue habilitada."):r(!0):i("El correo electronico no se encuentra registrado.")})})}validarEspecialista(t){return y(this,null,function*(){let r=yield this.getDocument(`usuarios/${t}`);return!(r.data().rol=="especialista"&&r.data().habilitado==!1)})}habilitarEspecialista(t){return this.updateDocument(`usuarios/${t}`,{habilitado:!0})}static{this.\u0275fac=function(r){return new(r||n)(se(zn))}}static{this.\u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();export{jp as a,N0 as b,dI as c,Tt as d,wn as e,jI as f,ao as g,tm as h,oC as i,aC as j,Om as k,xm as l,Ge as m,de as n,Ye as o,Yt as p,Ni as q,Xt as r,lr as s,_e as t,Sn as u,mo as v,ki as w,dr as x,fr as y,le as z,bt as A,bn as B,JC as C,YC as D,Bi as E,ji as F,JP as G,YP as H,XP as I,ZP as J,eD as K,tD as L,nD as M,k_ as N,B_ as O,j_ as P,G_ as Q,zn as R,GN as S,WN as T,QN as U};
