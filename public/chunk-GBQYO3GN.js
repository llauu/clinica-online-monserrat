import{a as ot,b as at,c as rt}from"./chunk-OYFTGMMC.js";import{a as V,b as j,c as Q,d as B,e as N,f as A,g as L,h as G,i as J,j as K,k as U,l as W,m as X,n as h,o as Y,p as Z,q as C,r as nt}from"./chunk-YWMTEUM4.js";import{a as it}from"./chunk-I42HQYJ5.js";import{a as F,b as H,c as z,d as $,e as q,p as tt,r as et}from"./chunk-D2JUWNLN.js";import"./chunk-UBX73J6E.js";import"./chunk-LDTVX5G4.js";import{L as k}from"./chunk-VNZCHZJ2.js";import{k as R}from"./chunk-JV3CWM4K.js";import{Fb as o,Gb as i,Hb as _,Ib as s,Jb as u,Lb as M,Qb as b,Rb as S,Wb as w,Xb as v,Yb as y,_b as a,ac as f,bb as m,cb as T,gc as D,hc as P,kc as O,lc as I,pa as E,tb as p,vb as d,ya as g,za as x}from"./chunk-7MNHCEPS.js";var dt=()=>[5,10,25,100];function mt(t,n){t&1&&(o(0,"th",22)(1,"b",23),a(2,"Paciente"),i()())}function pt(t,n){if(t&1&&(o(0,"td",24),a(1),i()),t&2){let e=n.$implicit;d("appEstadoTurno",e.estado),m(),f(" ",e.paciente," ")}}function ct(t,n){t&1&&(o(0,"th",25)(1,"b"),a(2,"Especialista"),i()())}function st(t,n){if(t&1&&(o(0,"td",24),a(1),i()),t&2){let e=n.$implicit;d("appEstadoTurno",e.estado),m(),f(" ",e.especialista," ")}}function ut(t,n){t&1&&(o(0,"th",25)(1,"b"),a(2,"Especialidad"),i()())}function ft(t,n){if(t&1&&(o(0,"td",24),a(1),i()),t&2){let e=n.$implicit;d("appEstadoTurno",e.estado),m(),f(" ",e.especialidad," ")}}function _t(t,n){t&1&&(o(0,"th",25)(1,"b"),a(2,"Fecha"),i()())}function ht(t,n){if(t&1&&(o(0,"td",24),a(1),O(2,"timestamp"),i()),t&2){let e=n.$implicit;d("appEstadoTurno",e.estado),m(),f(" ",I(2,2,e.fecha)," ")}}function Ct(t,n){t&1&&(o(0,"th",25)(1,"b"),a(2,"Horario"),i()())}function gt(t,n){if(t&1&&(o(0,"td",24),a(1),i()),t&2){let e=n.$implicit;d("appEstadoTurno",e.estado),m(),f(" ",e.hora,"hs ")}}function xt(t,n){t&1&&(o(0,"th",25)(1,"b"),a(2,"Estado"),i()())}function Tt(t,n){if(t&1&&(o(0,"td",24),a(1),i()),t&2){let e=n.$implicit;d("appEstadoTurno",e.estado),m(),f(" ",e.estado," ")}}function Mt(t,n){t&1&&(o(0,"th",26)(1,"b"),a(2,"Acciones"),i()())}function bt(t,n){if(t&1){let e=M();o(0,"button",28),b("click",function(){g(e);let l=S().$implicit,c=S();return x(c.cancelarTurno(l))}),a(1," Cancelar "),i()}}function St(t,n){if(t&1&&(o(0,"td",24),p(1,bt,2,0,"button",27),i()),t&2){let e=n.$implicit;d("appEstadoTurno",e.estado),m(),d("ngIf",e.estado==="pendiente")}}function wt(t,n){t&1&&_(0,"tr",29)}function vt(t,n){t&1&&_(0,"tr",30)}function yt(t,n){t&1&&(o(0,"tr",31)(1,"td",32),a(2,"No se encontraron resultados."),i()())}var Jt=(()=>{class t{constructor(e,r){this.firestoreService=e,this.dialog=r,this.displayedColumns=["paciente","especialista","especialidad","fecha","hora","estado","acciones"],this.turnoSeleccionado=null}ngOnInit(){this.firestoreService.getTurnos().then(e=>{this.dataSource=new X(e),this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort})}applyFilter(e){let r=e.target.value;this.dataSource.filter=r.trim().toLowerCase(),this.dataSource.paginator&&this.dataSource.paginator.firstPage()}cancelarTurno(e){this.dialog.open(rt,{data:{titulo:"Cancelar turno",mensaje:"Por favor, indique el motivo de la cancelacion del turno.",requiereComentario:!0}}).afterClosed().subscribe(l=>{l&&(e.estado="cancelado",e.comentario=l,this.firestoreService.updateDocument(`turnos/${e.id}`,{estado:"cancelado",comentario:l}))})}static{this.\u0275fac=function(r){return new(r||t)(T(k),T(at))}}static{this.\u0275cmp=E({type:t,selectors:[["app-turnos"]],viewQuery:function(r,l){if(r&1&&(w(C,5),w(h,5)),r&2){let c;v(c=y())&&(l.paginator=c.first),v(c=y())&&(l.sort=c.first)}},standalone:!0,features:[D],decls:34,vars:5,consts:[["input",""],[1,"table-usuarios","mx-5"],[1,"w-100"],[1,"search-field"],["matInput","","placeholder","Buscar...",3,"keyup"],[1,"mat-elevation-z8","shadow-none"],["mat-table","","matSort","","matSortActive","fecha","matSortDirection","asc",3,"dataSource"],["matColumnDef","paciente"],["mat-header-cell","","mat-sort-header","","class","th-p","id","izq",4,"matHeaderCellDef"],["mat-cell","","class","fila-turno",3,"appEstadoTurno",4,"matCellDef"],["matColumnDef","especialista"],["mat-header-cell","","mat-sort-header","","class","th-p",4,"matHeaderCellDef"],["matColumnDef","especialidad"],["matColumnDef","fecha"],["matColumnDef","hora"],["matColumnDef","estado"],["matColumnDef","acciones"],["mat-header-cell","","class","th-p der","id","der",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","fail-search",4,"matNoDataRow"],["aria-label","Selecciona",1,"div-paginator",3,"pageSizeOptions"],["mat-header-cell","","mat-sort-header","","id","izq",1,"th-p"],[1,"izq"],["mat-cell","",1,"fila-turno",3,"appEstadoTurno"],["mat-header-cell","","mat-sort-header","",1,"th-p"],["mat-header-cell","","id","der",1,"th-p","der"],["mat-button","","class","btn-accion shadow-sm me-2",3,"click",4,"ngIf"],["mat-button","",1,"btn-accion","shadow-sm","me-2",3,"click"],["mat-header-row",""],["mat-row",""],[1,"fail-search"],["colspan","4",1,"mat-cell","ps-4","pt-4"]],template:function(r,l){if(r&1){let c=M();o(0,"div",1)(1,"div",2)(2,"mat-form-field",3)(3,"mat-label"),a(4,"Buscar"),i(),o(5,"input",4,0),b("keyup",function(lt){return g(c),x(l.applyFilter(lt))}),i()()(),o(7,"div",5)(8,"table",6),s(9,7),p(10,mt,3,0,"th",8)(11,pt,2,2,"td",9),u(),s(12,10),p(13,ct,3,0,"th",11)(14,st,2,2,"td",9),u(),s(15,12),p(16,ut,3,0,"th",11)(17,ft,2,2,"td",9),u(),s(18,13),p(19,_t,3,0,"th",11)(20,ht,3,4,"td",9),u(),s(21,14),p(22,Ct,3,0,"th",11)(23,gt,2,2,"td",9),u(),s(24,15),p(25,xt,3,0,"th",11)(26,Tt,2,2,"td",9),u(),s(27,16),p(28,Mt,3,0,"th",17)(29,St,2,2,"td",9),u(),p(30,wt,1,0,"tr",18)(31,vt,1,0,"tr",19)(32,yt,3,0,"tr",20),i(),_(33,"mat-paginator",21),i()()}r&2&&(m(8),d("dataSource",l.dataSource),m(22),d("matHeaderRowDef",l.displayedColumns),m(),d("matRowDefColumns",l.displayedColumns),m(2),d("pageSizeOptions",P(4,dt)))},dependencies:[z,H,F,q,$,W,V,Q,L,B,j,G,N,A,J,K,U,Z,h,Y,nt,C,R,it,et,tt,ot],styles:[".table-usuarios[_ngcontent-%COMP%]{padding-top:150px;padding-bottom:100px}.search-field[_ngcontent-%COMP%]{width:100%;margin:auto}.th-p[_ngcontent-%COMP%]{font-size:17px}th[_ngcontent-%COMP%]{background-color:#d7d7d7!important}#izq[_ngcontent-%COMP%]{border-radius:5px 0 0!important}#der[_ngcontent-%COMP%]{border-radius:0 5px 0 0!important}.fila-turno[_ngcontent-%COMP%]{cursor:pointer;border:none;color:#171717;background-color:#d7d7d7}.div-paginator[_ngcontent-%COMP%]{background-color:#d7d7d7;border-radius:0 0 5px 5px}.div-detalle[_ngcontent-%COMP%]{height:700px;width:35%;background-color:#d7d7d7;border-radius:5px;margin-top:25px;display:flex;flex-direction:column;justify-content:center;align-items:center}.div-alta-usuario[_ngcontent-%COMP%]{height:700px;width:49%;background-color:#d7d7d7;border-radius:5px;margin-top:25px;display:flex;flex-direction:column;justify-content:center;align-items:center}.txt-alta-usuario[_ngcontent-%COMP%]{font-size:30px;font-weight:600}.div-imgs[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.btn-sel[_ngcontent-%COMP%], .img-btn-sel[_ngcontent-%COMP%]{border-radius:50%}.btn-sel[_ngcontent-%COMP%]:hover{opacity:.3}.div-detalle-usuario[_ngcontent-%COMP%]{width:440px}.img-usuario[_ngcontent-%COMP%]{width:200px;height:200px;border-radius:5px}.detalle-turno[_ngcontent-%COMP%]{width:100%;min-height:600px;border-radius:5px;background-color:#d7d7d7;display:flex}.btn-accion[_ngcontent-%COMP%]{background-color:#bebebe;min-width:110px;font-weight:600!important}"]})}}return t})();export{Jt as TurnosComponent};
